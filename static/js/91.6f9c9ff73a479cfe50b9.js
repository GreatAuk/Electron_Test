webpackJsonp([91],{1100:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(773);t.default={data:function(){var e=this;return{step:"step1",formCheck:{phone:"",code:""},formCheckRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/,message:"请输入正确的手机格式",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},formPwd:{pwd:"",rePwd:""},formPwdRules:{pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,16}$/,message:"8到16位（由字母和数字组成）"}],rePwd:[{validator:function(t,r,n){""===r?n(new Error("请再次输入密码")):r!==e.formPwd.pwd?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}]},canSent:!0,time:120}},mounted:function(){this.$route.query.phone&&(this.formCheck.phone=this.$route.query.phone)},methods:{next:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;r.i(n.d)(t.formCheck.phone,t.formCheck.code).then(function(e){e.data?t.step="step2":t.$message.error("验证码错误")})})},submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o={mobile:t.formCheck.phone,pwd:t.formPwd.pwd,code:t.formCheck.code};r.i(n.f)(o).then(function(e){e.data?(t.$message.success("密码修改成功"),setTimeout(function(){t.$router.go(-1)},2e3)):t.$message.error("密码修改失败")})})},sendMsg:function(){this.canSent=!1,this.countDown(),r.i(n.b)(this.formCheck.phone).catch(function(e){})},countDown:function(){var e=this;0===this.time?(this.canSent=!0,this.time=120):(this.time--,setTimeout(function(){e.countDown()},1e3))}}}},1282:function(e,t,r){t=e.exports=r(539)(),t.push([e.i,".title[data-v-6f0871d3]{margin:0 auto 20px;text-align:center;color:#505458;font-size:14px}.form-wrap[data-v-6f0871d3]{width:280px;margin:0 auto 25px;padding:25px;border-radius:5px;background:#fff}.next-btn[data-v-6f0871d3]{width:100%}.send-msg-btn[data-v-6f0871d3]:hover{color:#13ce66}.forget-wrap[data-v-6f0871d3]{width:100%;height:100%;overflow-y:auto;background:#324157}.ms-title[data-v-6f0871d3]{width:100%;text-align:center;font-size:28px;color:#fff;padding-top:150px;padding-bottom:15px}",""])},1412:function(e,t,r){var n=r(1282);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(540)("ee494bb8",n,!0)},1563:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"forget-wrap"},[r("div",{staticClass:"ms-title"},[e._v("\n    CoolCare\n  ")]),e._v(" "),r("div",{staticClass:"form-wrap"},["step1"===e.step?r("el-form",{ref:"formCheck",attrs:{rules:e.formCheckRules,model:e.formCheck}},[r("h3",{staticClass:"title"},[e._v("\n        找回密码\n      ")]),e._v(" "),r("el-form-item",{attrs:{prop:"phone"}},[r("el-input",{attrs:{placeholder:"请输入注册手机"},model:{value:e.formCheck.phone,callback:function(t){e.$set(e.formCheck,"phone",t)},expression:"formCheck.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{attrs:{maxlength:4,minlength:4,placeholder:"短信验证码"},model:{value:e.formCheck.code,callback:function(t){e.$set(e.formCheck,"code",t)},expression:"formCheck.code"}},[r("template",{slot:"append"},[r("el-button",{staticClass:"send-msg-btn",attrs:{disabled:!e.canSent},nativeOn:{click:function(t){return e.sendMsg(t)}}},[r("span",{directives:[{name:"show",rawName:"v-show",value:e.canSent,expression:"canSent"}]},[e._v("发送短信")]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:!e.canSent,expression:"!canSent"}]},[e._v(e._s(e.time)+" S")])])],1)],2)],1),e._v(" "),r("el-button",{staticClass:"next-btn",attrs:{type:"primary"},on:{click:function(t){return e.next("formCheck")}}},[e._v("\n        下一步\n      ")])],1):r("el-form",{ref:"formPwd",attrs:{rules:e.formPwdRules,model:e.formPwd}},[r("h3",{staticClass:"title"},[e._v("\n        修改密码\n      ")]),e._v(" "),r("el-form-item",{attrs:{prop:"pwd"}},[r("el-input",{attrs:{type:"password",placeholder:"新密码"},model:{value:e.formPwd.pwd,callback:function(t){e.$set(e.formPwd,"pwd",t)},expression:"formPwd.pwd"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"rePwd"}},[r("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.formPwd.rePwd,callback:function(t){e.$set(e.formPwd,"rePwd",t)},expression:"formPwd.rePwd"}})],1),e._v(" "),r("el-button",{staticClass:"next-btn",attrs:{type:"primary"},on:{click:function(t){return e.submit("formPwd")}}},[e._v("\n        确认修改\n      ")])],1)],1)])},staticRenderFns:[]}},599:function(e,t,r){r(1412);var n=r(38)(r(1100),r(1563),"data-v-6f0871d3",null);e.exports=n.exports},773:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"e",function(){return a}),r.d(t,"b",function(){return s}),r.d(t,"d",function(){return i}),r.d(t,"f",function(){return c}),r.d(t,"g",function(){return u}),r.d(t,"c",function(){return d});var n=r(32),o=function(e){return n.a.post("/api/user/Exists",e)},a=function(e){return n.a.post("/api/user/AddUser",e)},s=function(e){return n.a.get("/api/user/MobileCode",{params:{mobile:e}})},i=function(e,t){return n.a.get("/api/user/CheckCode",{params:{mobile:e,code:t}})},c=function(e){return n.a.post("/api/user/ForgetPwd",e)},u=function(e){return n.a.get("/api/user/InvitationUser",{params:{mobile:e}})},d=function(e){return n.a.get("/api/user/GetCompanyName",{params:{companyName:e}})}}});
webpackJsonp([27],{1123:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(218),i=n.n(a),r=n(132),o=n.n(r),s=n(702),l=(n.n(s),n(840)),c=n(808);t.default={data:function(){return{currentPage:1,total:0,num:10,projectid:0,searchInput:"",alarmTableLoading:!1,form:{},userInfo:null,myHeader:{Authorization:""},updateFileName:"",suggestContact:null,inviteAble:!1,restaurants:[],timeout:null,handleDataArr:[],userNameInputIndex:null,configDialogVisible:!0,centerDialogVisible:!1,centerDialogVisible2:!1,contactFilterLoading:!1,senserData:[],formVisible:!1,excelUpUrl:"",excelUpPar:null,delids:[],querytext:"",assetForm:{ID:null,action:null,check_user:null,content:"",cycle:null,editable:!1,mobile:null,planID:null,type:"",userName:""},compileData:[],projectTitle:"全部项目 设备点检",ruleForm:{},dialogPname:"",formInline:{},versionsData:[{value:1,label:"每日一次"},{value:2,label:"每周一次"},{value:3,label:"每月一次"}],value2:"",tableData:[],value:"0",value3:"",port:_host}},computed:{proList:function(){var e={id:"0",label:"全部项目"},t=[].concat(o()(this.$store.state.app.proList));return t.unshift(e),t},proList2:function(){return[].concat(o()(this.$store.state.app.proList))}},mounted:function(){this.getQuerySpotcheckPlan(),this.getQuerySpotcheckPlanRow()},methods:{clearVisible2:function(){this.handleDataArr=[]},fetchSuggestContact:function(e,t){var a=this;this.contactFilterLoading=!0,this.userNameInputIndex=t,n.i(c.m)(e.userName).then(function(t){var n=JSON.parse(t.data);a.suggestContact=n,a.inviteAble=!1,n||/^1[0-9]{10}$/.test(e)&&(a.inviteAble=!0)}).catch(function(e){}).then(function(){a.contactFilterLoading=!1})},selectUser:function(e,t,n,a){"userName"===a&&(this.$refs.popover1.showPopper=!1,this.compileData[this.userNameInputIndex].userName=""+e,this.compileData[this.userNameInputIndex].check_user=""+n),this.suggestContact=[]},excelBeforeUpload:function(e){var t="xls"===e.name.split(".")[1],n="xlsx"===e.name.split(".")[1];t||n||this.$message.warning("上传失败，只能上传.xls .xlsx格式的文件")},handleRemove:function(e,t){},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},versionsChange:function(e){},saveCompileData:function(){var e=this;if(this.handleDataArr.length<1)return this.centerDialogVisible2=!1,this.$message({type:"info",message:"数据未修改!"}),!1;this.centerDialogVisible2=!1,n.i(c.n)({dataTable:this.handleDataArr}).then(function(t){e.$alert('<p><i class="el-icon-success saveicon" style="color:#339999; font-size:22px; vertical-align: sub;";></i><span style="font-size:16px;color:rgba(0,0,0,0.85);padding-left:12px;font-family:MicrosoftYaHei-Bold;font-weight:600;">计划修改完成</span></p><p style="color:#656565;font-size=12px;margin-top:10px;">修改后的点检计划将在下个周期开始生效。</p>',"",{confirmButtonText:"确定",center:!0,dangerouslyUseHTMLString:!0}),e.getQuerySpotcheckPlan(),e.getQuerySpotcheckPlanRow()}).catch(function(e){})},copy:function(e){var t={};t.ID="",t.check_user=e.check_user,t.type=e.type,t.action="add",t.mobile=e.mobile,t.planID=e.planID,t.content=e.content,t.userName=e.userName,t.cycle=e.cycle,t.editable=!1,this.compileData.unshift(t),this.handleDataArr.push(t),this.$message("已成功复制指定行至列表头部")},delCheckData:function(){var e=this;if(this.senserData.length<1)return this.$message("请选择需要删除的计划"),!1;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.i(c.o)(e.delids.join(",")).then(function(t){e.getQuerySpotcheckPlan(),e.getQuerySpotcheckPlanRow()}).catch(function(e){}),e.$message({type:"success",message:"删除成功!"})}).catch(function(){})},delEntryData:function(e,t){var n;t[e].action="del",(n=this.handleDataArr).push.apply(n,o()(t.splice(e,1))),this.$message({type:"success",message:"删除成功!"})},transformDate:function(e,t){return new Date(e.customizedTime).format("yyyy/MM/dd")},cancelEntry:function(){document.getElementById("fileInput").value="",this.centerDialogVisible=!1,this.dialogPname="",this.senserData=[],this.updateFileName=""},judgeValue:function(){""==this.dialogPname&&this.$message("请输入计划名称")},exportExcel:function(){if(this.delids.length<1)return this.$message("请选择要导出的计划"),!1;this.userInfo=JSON.parse(sessionStorage.getItem("userInfo"));var e=this.userInfo.uid;window.open(_host+"/api/Spotcheck/Export_SpotCheck?planID="+this.delids+"&userID="+e)},s2ab:function(e){var t=void 0;if("undefined"!=typeof ArrayBuffer){t=new ArrayBuffer(e.length);for(var n=new Uint8Array(t),a=0;a!==e.length;++a)n[a]=255&e.charCodeAt(a);return t}t=new Array(e.length);for(var i=0;i!==e.length;++i)t[i]=255&e.charCodeAt(i);return t},clickEdit:function(e){if(e.editable=!e.editable,"up"===e.action)return!1;"add"===e.action?e.action="add":(e.action="up",this.handleDataArr.push(e))},openCompileDialog:function(e){var t=this;this.centerDialogVisible2=!0,n.i(c.p)(""+e.ID).then(function(e){var n=JSON.parse(e.data);i()(t.assetForm,n),t.compileData=n}).catch(function(e){})},handleBlur:function(e,t){t.msg=""},rowClickRow:function(e){e.editable=!e.editable},uploadExcel:function(e){var t=this;this.senserData=[];var a=e.target.files[0].type;if("application/vnd.ms-excel"!==a&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==a){this.$message("请选择.xls .xlsx格式的文件");return document.getElementById("fileInput").value="",this.updateFileName="",!1}var i=new FileReader;i.onload=function(a){var i,r,s=a.target.result,c=t.toArrData(s);r=XLSX.read(btoa(c),{type:"base64"}),(i=t.senserData).push.apply(i,o()(n.i(l.a)(t.toJson(r),"fromExcel"))),t.$message({type:"success",message:"上传完成!"}),t.updateFileName=e.target.files[0].name},i.readAsArrayBuffer(e.target.files[0])},toArrData:function(e){for(var t="",n=0,a=10240;n<e.byteLength/a;++n)t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(n*a,n*a+a)));return t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(n*a)))},addPointData:function(){var e=this;n.i(c.q)({planName:this.dialogPname,projectID:this.projectid,excelTable:this.senserData}).then(function(t){var n=JSON.parse(t.data),a=n.text.join(",");e.$alert(a,"",{confirmButtonText:"确定",center:!0,dangerouslyUseHTMLString:!0}),e.projectid="",e.getQuerySpotcheckPlan(),e.getQuerySpotcheckPlanRow()}).catch(function(e){}),this.cancelEntry()},toJson:function(e){var t=[];return e.SheetNames.forEach(function(n){var a=XLSX.utils.sheet_to_row_object_array(e.Sheets[n]);a.length>0&&(t=a)}),t},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){var t=[];this.senserData=e,e.forEach(function(e){t.push(e.ID)}),this.delids=t},executePause:function(){var e=this;n.i(c.r)(this.delids.join(",")).then(function(t){1==t.data?(e.$message({type:"success",message:"状态变更成功，次日生效!"}),e.senserData.forEach(function(e){0==e.status?e.status=1:1==e.status&&(e.status=0)})):e.$message("请选择计划！")}).catch(function(e){})},searchKeyWords:function(){this.alarmTableLoading=!0,this.getQuerySpotcheckPlan(),this.getQuerySpotcheckPlanRow()},getQuerySpotcheckPlan:function(){var e=this;this.alarmTableLoading=!0,n.i(c.s)({projectID:this.projectid,querytext:this.searchInput,pagesize:this.currentPage,show_number:this.num}).then(function(t){var n=JSON.parse(t.data);e.tableData=n,e.alarmTableLoading=!1}).catch(function(e){})},getQuerySpotcheckPlanRow:function(){var e=this;n.i(c.t)({projectID:this.projectid,querytext:this.searchInput}).then(function(t){var n=JSON.parse(t.data);e.total=n}).catch(function(e){})},switchProject:function(e){this.$store.commit("UPDATE_CHECKID",e),this.projectid=e;var t={};t=this.proList.find(function(t){return t.id===e}),this.projectTitle=t.label+" 设备点检",this.getQuerySpotcheckPlan()},switchProject2:function(e){this.$store.commit("UPDATE_CHECKID",e),this.projectid=e;var t={};t=this.proList2.find(function(t){return t.id===e}),this.projectTitle=t.label+" 设备点检"},handleSizeChange:function(e){this.num=e,this.getQuerySpotcheckPlan()},handleCurrentChange:function(e){this.currentPage=e,this.getQuerySpotcheckPlan()}}}},1253:function(e,t,n){t=e.exports=n(539)(),t.push([e.i,".compactform1 .el-form-item{display:-ms-flexbox;display:flex}.compactform1 .el-form-item .el-form-item__label{margin-left:15px}.compactform1 .el-form-item .el-form-item__content{-ms-flex:3;flex:3}.compactform1 .el-form-item .el-form-item__content .el-select--small{width:100%}.el-input__inner{box-shadow:none}.detectioncontent .entrytable th{color:#3c3c3c;padding:10px 0}.detectioncontent .entrytable .el-table__row{height:48px}.device-contact-list{list-style:none;height:48px;overflow:auto}.device-contact-list-item{cursor:pointer;padding:6px 15px;border-bottom:1px solid #d8dde4}.device-contact-list-item:hover{background:#f2f4f6}.device-contact-list-item .contact-avatar{display:table-cell;vertical-align:middle;width:25px;height:25px}.device-contact-list-item .contact-avatar img{width:25px;height:25px;border-radius:50%}.device-contact-list-item .contact-info{padding-left:10px;display:table-cell}.device-contact-list-item .contact-username{font-size:14px}.device-contact-list-item .contact-phone{font-size:12px;color:#ccc}",""])},1254:function(e,t,n){t=e.exports=n(539)(),t.push([e.i,".detectioncontent[data-v-49d699f5]{background-color:#f5f5f5}.detectioncontent .mgr10[data-v-49d699f5]{margin-right:10px}.detectioncontent .file-btn[data-v-49d699f5]{position:relative;overflow:hidden;cursor:pointer;display:inline-block;line-height:1;white-space:nowrap;background:#fff;border:1px solid #dcdfe6;color:#606266;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:0;margin:0;transition:.1s;font-weight:500;padding:10px 15px;font-size:14px;border-radius:4px}.detectioncontent .file-btn input[data-v-49d699f5]{position:absolute;top:0;right:0;font-size:30px;opacity:0;cursor:pointer}.detectioncontent .file-btn[data-v-49d699f5]:hover{color:#399;border-color:#c2e0e0;background-color:#ebf5f5}.detectioncontent .contact-popover[data-v-49d699f5]{padding:0}.detectioncontent .contact-popover .loading-mask[data-v-49d699f5]{height:48px;text-align:center;line-height:48px}.detectioncontent .contact-popover .no-contact[data-v-49d699f5]{height:48px;text-align:center;line-height:48px;color:#ccc}.detectioncontent .contact-popover .el-icon-loading[data-v-49d699f5]{font-size:25px}.detectioncontent .contact-popover .register-invite[data-v-49d699f5]{height:48px;text-align:center;line-height:48px}.detectioncontent .entrytable .entryTableBtn[data-v-49d699f5]{margin:3px 5px;border:none;outline:none;background-color:#fff;font-weight:600;font-size:12px;color:#128fe9;cursor:pointer}.detectioncontent .entrytable div.cell[data-v-49d699f5]{width:auto}.detectioncontent .boxShadow[data-v-49d699f5]{border-radius:4px;background:#fff}.detectioncontent .headbtns[data-v-49d699f5]{margin-left:19px}.detectioncontent .iconsize[data-v-49d699f5]{width:14px;height:14px;vertical-align:sub}.detectioncontent .headbtns[data-v-49d699f5]{position:relative;overflow:hidden}.detectioncontent .headbtns input[data-v-49d699f5]{position:absolute;top:0;right:0;left:0;bottom:0;opacity:0}",""])},1383:function(e,t,n){var a=n(1253);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(540)("c9e98436",a,!0)},1384:function(e,t,n){var a=n(1254);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(540)("4e714e83",a,!0)},1537:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pdg"},[n("div",{staticClass:"detectioncontent",staticStyle:{"margin-top":"20px"}},[n("div",{staticClass:"bg-fff boxShadow",staticStyle:{padding:"32px"},attrs:{"label-width":"70px"}},[n("el-form",{staticClass:"demo-form-inline compactform1",attrs:{inline:!0,model:e.formInline}},[n("el-row",{attrs:{gutter:48}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"选择项目",prop:"repairStatus"}},[n("el-select",{staticClass:"mgr10",attrs:{placeholder:"请选择项目",size:"small"},on:{change:e.switchProject},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.proList,function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.label}})}),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"搜索查询",prop:"repairStatus"}},[n("el-input",{staticStyle:{"margin-right":"10%"},attrs:{size:"small",clearable:"",placeholder:"请输入关键字"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchKeyWords(t)}},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),e._v(" "),n("el-col",{style:{float:e.formVisible?"right":"auto"},attrs:{span:8}},[n("el-form-item",{staticStyle:{"margin-right":"0px","text-align":"right"}},[n("el-button",{staticClass:"headbtns",attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(t){e.centerDialogVisible=!0}}},[e._v("\n                导入计划\n              ")]),e._v(" "),n("el-button",{staticClass:"headbtns",attrs:{plain:"",size:"small"},on:{click:e.executePause}},[e._v("\n                执行/暂停\n              ")]),e._v(" "),n("el-button",{staticClass:"headbtns",attrs:{plain:"",size:"small"},on:{click:e.exportExcel}},[e._v("\n                导出\n              ")]),e._v(" "),n("el-button",{staticClass:"headbtns",attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:e.delCheckData}},[e._v("\n                删除\n              ")])],1)],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"导入规划",visible:e.centerDialogVisible,width:"30%"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[n("span",[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"计划名称"}},[n("el-input",{staticStyle:{width:"215px"},on:{blur:e.judgeValue},model:{value:e.dialogPname,callback:function(t){e.dialogPname=t},expression:"dialogPname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"所属项目"}},[n("el-select",{staticClass:"mgr10",attrs:{placeholder:"请选择项目",size:"small"},on:{change:e.switchProject2},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}},e._l(e.proList2,function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.label}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"上传文件"}},[n("span",{staticClass:"file-btn",attrs:{size:"mini"}},[n("c-svg",{staticClass:"iconsize",attrs:{name:"shangchuan"}}),e._v("\n                上传文件\n                "),e.configDialogVisible?n("input",{attrs:{id:"fileInput",type:"file",multiple:"false",accept:".xlsx,.xls"},on:{change:function(t){return e.uploadExcel(t)}}}):e._e()],1),e._v(" "),n("p",[e._v(e._s(e.updateFileName))]),e._v(" "),n("div",[e._v("支持拓展名：.xls .xlsx")])])],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelEntry}},[e._v("取 消")]),e._v(" "),""==e.dialogPname?n("el-button",{attrs:{size:"mini",type:"primary",disabled:!0}},[e._v("导 入")]):n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addPointData}},[e._v("导 入")])],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.alarmTableLoading,expression:"alarmTableLoading"}],ref:"multipleTable",staticClass:"entrytable",staticStyle:{width:"100%","margin-top":"20px","border-radius":"6px"},attrs:{data:e.tableData,"tooltip-effect":"dark","element-loading-text":"加载中...","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"计划名称",prop:"PlanName"}}),e._v(" "),n("el-table-column",{attrs:{prop:"projectName",label:"项目"}}),e._v(" "),n("el-table-column",{attrs:{prop:"customizedTime",label:"制订时间","show-overflow-tooltip":"",formatter:e.transformDate}}),e._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"制订人","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"edition",label:"版本号","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\n              V"+e._s(t.row.edition)+"\n            ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(0==t.row.status||"执行中"==t.row.status?"执行中":1==t.row.status||"已暂停"==t.row.status?"已暂停":""))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.openCompileDialog(t.row)}}},[e._v("\n              编辑\n            ")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:e.projectTitle,visible:e.centerDialogVisible2,width:"70%"},on:{"update:visible":function(t){e.centerDialogVisible2=t},close:e.clearVisible2}},[n("el-table",{ref:"multipleTable",staticClass:"entrytable",staticStyle:{width:"100%","margin-top":"20px","border-radius":"6px"},attrs:{data:e.compileData,"tooltip-effect":"dark",border:""}},[n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("button",{staticClass:"entryTableBtn",on:{click:function(n){return e.clickEdit(t.row)}}},[e._v("\n                "+e._s(t.row.editable?"保存":"编辑")+"\n              ")]),e._v(" "),n("button",{staticClass:"entryTableBtn",on:{click:function(n){return e.copy(t.row)}}},[e._v("\n                复制\n              ")]),e._v(" "),n("button",{staticClass:"entryTableBtn",attrs:{type:"danger"},on:{click:function(n){return e.delEntryData(t.$index,e.compileData)}}},[e._v("\n                删除\n              ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"点检类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editable?n("el-input",{attrs:{size:"mini"},model:{value:t.row.type,callback:function(n){e.$set(t.row,"type","string"==typeof n?n.trim():n)},expression:"scope.row.type"}}):n("span",[e._v("\n                "+e._s(t.row.type)+"\n              ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"content",label:"点检项","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editable?n("el-input",{attrs:{size:"mini"},model:{value:t.row.content,callback:function(n){e.$set(t.row,"content","string"==typeof n?n.trim():n)},expression:"scope.row.content"}}):n("span",[e._v("\n                "+e._s(t.row.content)+"\n              ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"点检人","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editable?n("span",[n("el-popover",{ref:"popover1",attrs:{placement:"bottom",width:"280",trigger:"click","popper-class":"contact-popover"},on:{hide:function(t){e.inviteAble=!1}}},[e.suggestContact?n("ul",{staticClass:"device-contact-list thin-scroll"},[n("li",{staticClass:"device-contact-list-item",on:{click:function(t){return e.selectUser(e.suggestContact.nickname,e.suggestContact.mobile,e.suggestContact.id,"userName")}}},[n("div",{staticClass:"contact-avatar"},[n("img",{attrs:{src:e.port+"/Img/Person/"+e.suggestContact.avatar,width:"25px",height:"25px",alt:""}})]),e._v(" "),n("div",{staticClass:"contact-info"},[n("div",{staticClass:"contact-username"},[e._v(e._s(e.suggestContact.nickname))]),e._v(" "),n("div",{staticClass:"contact-phone"},[e._v(e._s(e.suggestContact.mobile))])])])]):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.suggestContact&&!e.contactFilterLoading&&!e.inviteAble,expression:"!suggestContact && !contactFilterLoading && !inviteAble"}],staticClass:"no-contact"},[e._v("\n                    "+e._s(t.row.userName?"没有找到该用户":"请输入用户名或手机号查找")+"\n                  ")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.contactFilterLoading,expression:"contactFilterLoading"}],staticClass:"loading-mask"},[n("i",{staticClass:"el-icon-loading"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.inviteAble,expression:"inviteAble"}],staticClass:"register-invite"},[e._v("\n                    没有找到该用户 \n                    "),n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return e.invite(t.row.userName)}}},[e._v("邀请加入")])],1)]),e._v(" "),n("el-input",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],attrs:{clearable:"",size:"mini",placeholder:"通过用户名或手机号搜索"},on:{input:function(n){return e.fetchSuggestContact(t.row,t.$index)},focus:function(n){return e.fetchSuggestContact(t.row,t.$index)}},model:{value:t.row.userName,callback:function(n){e.$set(t.row,"userName","string"==typeof n?n.trim():n)},expression:"scope.row.userName"}})],1):n("span",[e._v("\n                "+e._s(t.row.userName)+"\n              ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"cycle",label:"点检周期","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editable?n("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.versionsChange},model:{value:t.row.cycle,callback:function(n){e.$set(t.row,"cycle",n)},expression:"scope.row.cycle"}},e._l(e.versionsData,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):n("span",[e._v("\n                "+e._s(1==t.row.cycle?"每日一次":2==t.row.cycle?"每周一次":3==t.row.cycle?"每月一次":"")+"\n              ")])]}}])})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.centerDialogVisible2=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveCompileData}},[e._v("保 存")])],1)],1),e._v(" "),n("table",{staticStyle:{display:"none"},attrs:{id:"excel-table"}},[e._m(0),e._v(" "),e._l(e.compileData,function(t,a){return n("tr",{key:a},[n("td",[e._v(e._s(t.type))]),e._v(" "),n("td",[e._v(e._s(t.content))]),e._v(" "),n("td",[e._v(e._s(t.mobile))]),e._v(" "),n("td",[e._v(e._s(t.cycle))])])})],2),e._v(" "),n("div",{staticClass:"block",staticStyle:{"text-align":"center","margin-top":"20px"}},[n("el-pagination",{attrs:{background:"","page-sizes":[10,20,50,100],"page-size":this.num,"current-page":this.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",[e._v("点检类型")]),e._v(" "),n("th",[e._v("点检项")]),e._v(" "),n("th",[e._v("点检人账号")]),e._v(" "),n("th",[e._v("点检周期")])])}]}},623:function(e,t,n){n(1384),n(1383);var a=n(38)(n(1123),n(1537),"data-v-49d699f5",null);e.exports=a.exports},684:function(e,t,n){var a=n(133)("meta"),i=n(58),r=n(69),o=n(59).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(68)(function(){return l(Object.preventExtensions({}))}),u=function(e){o(e,a,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,a)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[a].i},f=function(e,t){if(!r(e,a)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[a].w},p=function(e){return c&&v.NEED&&l(e)&&!r(e,a)&&u(e),e},v=e.exports={KEY:a,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},685:function(e,t,n){var a=n(58);e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},686:function(e,t,n){var a=n(70);e.exports=Array.isArray||function(e){return"Array"==a(e)}},687:function(e,t,n){e.exports={default:n(688),__esModule:!0}},688:function(e,t,n){n(215),n(134),n(213),n(698),n(701),n(700),n(699),e.exports=n(14).Set},689:function(e,t,n){var a=n(210);e.exports=function(e,t){var n=[];return a(e,!1,n.push,n,t),n}},690:function(e,t,n){var a=n(60),i=n(136),r=n(72),o=n(90),s=n(692);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,v){for(var m,g,h=r(t),y=i(h),b=a(s,v,3),_=o(y.length),x=0,w=n?p(t,_):l?p(t,0):void 0;_>x;x++)if((f||x in y)&&(m=y[x],g=b(m,x,h),e))if(n)w[x]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return x;case 2:w.push(m)}else if(u)return!1;return d?-1:c||u?u:w}}},691:function(e,t,n){var a=n(58),i=n(686),r=n(21)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),a(t)&&null===(t=t[r])&&(t=void 0)),void 0===t?Array:t}},692:function(e,t,n){var a=n(691);e.exports=function(e,t){return new(a(e))(t)}},693:function(e,t,n){"use strict";var a=n(59).f,i=n(214),r=n(212),o=n(60),s=n(211),l=n(210),c=n(137),u=n(216),d=n(217),f=n(61),p=n(684).fastKey,v=n(685),m=f?"_s":"size",g=function(e,t){var n,a=p(t);if("F"!==a)return e._i[a];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var u=e(function(e,a){s(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=a&&l(a,n,e[c],e)});return r(u.prototype,{clear:function(){for(var e=v(this,t),n=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete n[a.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=v(this,t),a=g(n,e);if(a){var i=a.n,r=a.p;delete n._i[a.i],a.r=!0,r&&(r.n=i),i&&(i.p=r),n._f==a&&(n._f=i),n._l==a&&(n._l=r),n[m]--}return!!a},forEach:function(e){v(this,t);for(var n,a=o(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(a(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(v(this,t),e)}}),f&&a(u.prototype,"size",{get:function(){return v(this,t)[m]}}),u},def:function(e,t,n){var a,i,r=g(e,t);return r?r.v=n:(e._l=r={i:i=p(t,!0),k:t,v:n,p:a=e._l,n:void 0,r:!1},e._f||(e._f=r),a&&(a.n=r),e[m]++,"F"!==i&&(e._i[i]=r)),e},getEntry:g,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=v(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?u(0,n.k):"values"==t?u(0,n.v):u(0,[n.k,n.v]):(e._t=void 0,u(1))},n?"entries":"values",!n,!0),d(t)}}},694:function(e,t,n){var a=n(135),i=n(689);e.exports=function(e){return function(){if(a(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},695:function(e,t,n){"use strict";var a=n(15),i=n(39),r=n(684),o=n(68),s=n(52),l=n(212),c=n(210),u=n(211),d=n(58),f=n(89),p=n(59).f,v=n(690)(0),m=n(61);e.exports=function(e,t,n,g,h,y){var b=a[e],_=b,x=h?"set":"add",w=_&&_.prototype,S={};return m&&"function"==typeof _&&(y||w.forEach&&!o(function(){(new _).entries().next()}))?(_=t(function(t,n){u(t,_,e,"_c"),t._c=new b,void 0!=n&&c(n,h,t[x],t)}),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!y||"clear"!=e)&&s(_.prototype,e,function(n,a){if(u(this,_,e),!t&&y&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,a);return t?this:i})}),y||p(_.prototype,"size",{get:function(){return this._c.size}})):(_=g.getConstructor(t,e,h,x),l(_.prototype,n),r.NEED=!0),f(_,e),S[e]=_,i(i.G+i.W+i.F,S),y||g.setStrong(_,e,h),_}},696:function(e,t,n){"use strict";var a=n(39),i=n(71),r=n(60),o=n(210);e.exports=function(e){a(a.S,e,{from:function(e){var t,n,a,s,l=arguments[1];return i(this),t=void 0!==l,t&&i(l),void 0==e?new this:(n=[],t?(a=0,s=r(l,arguments[2],2),o(e,!1,function(e){n.push(s(e,a++))})):o(e,!1,n.push,n),new this(n))}})}},697:function(e,t,n){"use strict";var a=n(39);e.exports=function(e){a(a.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},698:function(e,t,n){"use strict";var a=n(693),i=n(685);e.exports=n(695)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return a.def(i(this,"Set"),e=0===e?0:e,e)}},a)},699:function(e,t,n){n(696)("Set")},700:function(e,t,n){n(697)("Set")},701:function(e,t,n){var a=n(39);a(a.P+a.R,"Set",{toJSON:n(694)("Set")})},702:function(e,t,n){var a,i=i||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},a=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in a,r=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},u=function(e,t,n){t=[].concat(t);for(var a=t.length;a--;){var i=e["on"+t[a]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){l(e)}}},d=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},f=function(t,l,f){f||(t=d(t));var p,v=this,m=t.type,g="application/octet-stream"===m,h=function(){u(v,"writestart progress write writeend".split(" "))};if(v.readyState=v.INIT,i)return p=n().createObjectURL(t),void setTimeout(function(){a.href=p,a.download=l,r(a),h(),c(p),v.readyState=v.DONE});!function(){if((s||g&&o)&&e.FileReader){var a=new FileReader;return a.onloadend=function(){var t=s?a.result:a.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,v.readyState=v.DONE,h()},a.readAsDataURL(t),void(v.readyState=v.INIT)}if(p||(p=n().createObjectURL(t)),g)e.location.href=p;else{e.open(p,"_blank")||(e.location.href=p)}v.readyState=v.DONE,h(),c(p)}()},p=f.prototype,v=function(e,t,n){return new f(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=d(e)),navigator.msSaveOrOpenBlob(e,t)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,v)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=i:null!==n(703)&&null!==n(704)&&void 0!==(a=function(){return i}.call(t,n,t,e))&&(e.exports=a)},703:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},704:function(e,t){(function(t){e.exports=t}).call(t,{})},808:function(e,t,n){"use strict";n.d(t,"o",function(){return i}),n.d(t,"m",function(){return r}),n.d(t,"p",function(){return o}),n.d(t,"r",function(){return s}),n.d(t,"n",function(){return l}),n.d(t,"q",function(){return c}),n.d(t,"s",function(){return u}),n.d(t,"t",function(){return d}),n.d(t,"h",function(){return f}),n.d(t,"k",function(){return p}),n.d(t,"f",function(){return v}),n.d(t,"e",function(){return m}),n.d(t,"i",function(){return g}),n.d(t,"j",function(){return h}),n.d(t,"g",function(){return y}),n.d(t,"y",function(){return b}),n.d(t,"x",function(){return _}),n.d(t,"b",function(){return x}),n.d(t,"v",function(){return w}),n.d(t,"d",function(){return S}),n.d(t,"l",function(){return k}),n.d(t,"a",function(){return C}),n.d(t,"u",function(){return D}),n.d(t,"w",function(){return I}),n.d(t,"c",function(){return N});var a=n(32),i=function(e){return a.a.get("/api/Spotcheck/DeleteSpotcheck_plan",{params:{planID:e}})},r=function(e){return a.a.get("/api/Maintenance_team/QueryUser",{params:{screen:e}})},o=function(e){return a.a.get("/api/Spotcheck/GetSpotcheckPlan",{params:{planID:e}})},s=function(e){return a.a.get("/api/Spotcheck/StatusSpotcheck_plan",{params:{planID:e}})},l=function(e){return a.a.post("/api/Spotcheck/UpdateSpotcheckPlan",e)},c=function(e){return a.a.post("/api/Spotcheck/InserSpotcheckPlan",e)},u=function(e){return a.a.post("/api/Spotcheck/QuerySpotcheckPlan",e)},d=function(e){return a.a.post("/api/Spotcheck/QuerySpotcheckPlanRow",e)},f=function(e){return a.a.post("/api/MaintainContract/AddMaintain_Contract",e)},p=function(e){return a.a.post("/api/MaintainContract/Maintain_ContractList",e)},v=function(e){return a.a.post("/api/Upload_File/Upload_Maintain_ContractFile",e,{headers:{"Content-Type":"multipart/form-data"}})},m=function(e){return a.a.get("/api/MaintainContract/QueryMaintain_Contract",{params:{contractNumber:e}})},g=function(e){return a.a.post("/api/MaintainContract/UpdateMaintain_Contract",e)},h=function(e,t){return a.a.get("/api/MaintainContract/DeleteMaintain_Contract",{params:{ContractID:e,pwd:t}})},y=function(e){return a.a.post("/api/MaintainContract/APMaintain_Contract",e)},b=function(e){return a.a.post("/api/MaintainContract/Maintain_OrderList",e)},_=function(e){return a.a.get("/api/MaintainContract/QueryMaintain_Order",{params:{orderNumber:e}})},x=function(e){return a.a.post("/api/MaintainContract/UpdateMaintain_Order",e)},w=function(e){return a.a.post("/api/MaintainContract/UploadMaintain_OrderRecord",e)},S=function(e){return a.a.get("/api/MaintainContract/MaintainPlanList",{params:{contractNumber:e}})},k=function(e){return a.a.get("/api/MaintainContract/Maintain_ContractScreen",{params:{role:e}})},C=function(e,t){return a.a.get("/api/MaintainContract/Project_Company",{params:{projectID:e,companyName:t}})},D=function(){return a.a.get("/api/MaintainContract/Maintain_OrderScreen")},I=function(e){return a.a.post("/api/MaintainContract/UpdateMaintain_OrderRecord",e)},N=function(e){return a.a.get("/api/MaintainContract/Maintain_OrderPerson",{params:{text:e}})}},840:function(e,t,n){"use strict";function a(e){var t=parseInt(e/20);return e%20!=0&&(t+=1),t}n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"f",function(){return f}),n.d(t,"e",function(){return p}),n.d(t,"d",function(){return v}),n.d(t,"g",function(){return m});var i=n(687),r=n.n(i),o=n(234),s=n.n(o),l=this,c=function(e,t){var n=[],i=[];if(t)for(var o=0;o<e.length;o++){var l=!1;e[o].sensorName.value&&"Error"!==e[o].sensorName.value||(e[o].sensorName.msg="请输入传感器名称",l=!0),e[o].sensorTypeId.value||(e[o].sensorTypeId.msg="请选择点位类型",l=!0),e[o].decimal.value,e[o].unit.value,(e[o].field1.value||e[o].field2.value||e[o].field3.value||e[o].field4.value)&&(m(e[o].field1.value)&&m(e[o].field2.value)&&m(e[o].field3.value)&&m(e[o].field4.value)?e[o].field1.value===e[o].field2.value&&(e[o].field1.msg="映射参数 x1 不能等于 x2",l=!0):(e[o].field1.msg="映射参数由4个数{x1,x2,x3,x4}组成,如: -1000~1000 -> -100 ~ 100",l=!0)),l?(n.push(o+1),e[o].editable=!0):e[o].editable=!1}else for(var c=e.map(function(e){return e.address.value+"/"+e.funcode.value+"/"+e.bias.value+"/"+e.datas.value}),o=0;o<e.length;o++)!function(t){var a=!1;c.filter(function(n){return n===e[t].address.value+"/"+e[t].funcode.value+"/"+e[t].bias.value+"/"+e[t].datas.value}).length>1?(e[t].sensorName.msg="不可同时存在两个以上具有相同从站地址、功能码、寄存器地址、地址位的传感器，请修改完成后再校验一次",a=!0):e[t].sensorName.msg="",e[t].sensorName.value&&"Error"!==e[t].sensorName.value||(e[t].sensorName.msg="请输入传感器名称",a=!0),e[t].sensorTypeId.value||(e[t].sensorTypeId.msg="请选择点位类型",a=!0),e[t].decimal.value,e[t].unit.value,(e[t].field1.value||e[t].field2.value||e[t].field3.value||e[t].field4.value)&&(m(e[t].field1.value)&&m(e[t].field2.value)&&m(e[t].field3.value)&&m(e[t].field4.value)?e[t].field1.value===e[t].field2.value&&(e[t].field1.msg="映射参数 x1 不能等于 x2",a=!0):(e[t].field1.msg="映射参数由4个数{x1,x2,x3,x4}组成,如: -1000~1000 -> -100 ~ 100",a=!0)),m(e[t].address.value)?(Number(e[t].address.value)<1||Number(e[t].address.value)>255)&&(e[t].address.msg="请输入一个 1-255 之间的整数",a=!0):(e[t].address.msg="请输入一个 1-255 之间的整数",a=!0),m(e[t].bias.value)?(Number(e[t].bias.value)<=0||Number(e[t].bias.value)>=65535)&&(e[t].bias.msg="请输入一个 0-65535 之间的整数",a=!0):(e[t].bias.msg="请输入一个 0-65535 之间的整数",a=!0),e[t].funcode.value||(e[t].funcode.msg="功能码不能为空",a=!0),1===e[t].funcode.value||2===e[t].funcode.value?7!==e[t].datatype.value&&(e[t].datatype.msg="当功能码为 01读写 / 02只读 时，数据格式应该为 bit",a=!0):7===e[t].datatype.value&&(e[t].datatype.msg="当功能码为 03读写 / 04只读 时，数据格式不能为 bit",a=!0),e[t].datatype.value||(e[t].datatype.msg="数据格式不能为空",a=!0),e[t].orderStr.value?(1!==e[t].datatype.value&&2!==e[t].datatype.value&&6!==e[t].datatype.value||"AB"!==e[t].orderStr.value&&"BA"!==e[t].orderStr.value&&(e[t].orderStr.msg="当数据格式为 16位有符号数 / 16位无符号数 / 16位按位读取，字节顺序应该为 AB / BA",a=!0),3!==e[t].datatype.value&&4!==e[t].datatype.value&&5!==e[t].datatype.value||"AB"!==e[t].orderStr.value&&"BA"!==e[t].orderStr.value&&""!==e[t].orderStr.value||(e[t].orderStr.msg="当数据格式为 32位有符号数 / 32位无符号数 / 32位浮点型数 时，字节顺序应该为 ABCD / CDAB / BADC / DCAB",a=!0),7===e[t].datatype.value&&""!==e[t].orderStr.value&&(e[t].orderStr.msg="当数据格式为 bit 时，字节顺序应该为 空",a=!0)):7!==e[t].datatype.value&&(e[t].orderStr.msg="当数据格式不为 bit 时，字节顺序不能为 空",a=!0),e[t].datas.value?6!==e[t].datatype.value&&(e[t].datas.msg="当数据格式不为 16位按位读取 时，值应该为 空",a=!0):6===e[t].datatype.value&&(e[t].datas.msg="当数据格式为 16位按位读取 时，值不能为 空",a=!0),m(e[t].cycle.value)?10!=e[t].cycle.value&&30!=e[t].cycle.value&&e[t].cycle.value%60!=0&&(e[t].cycle.msg="可选择 10s/30s/60s/120s 或自定义(输入60的倍数)",a=!0):(e[t].cycle.msg="可选择 10s/30s/60s/120s 或自定义(输入60的倍数)",a=!0),a?(n.push(t+1),e[t].editable=!0):e[t].editable=!1}(o);return n.forEach(function(e){i.push(a(e))}),{data:e,errPages:s()(new r.a(i))}},u=function(e,t){if("fromExcel"===t)try{for(var n=0;n<e.length;n++)e[n].type=e[n]["点检类型"],e[n].content=e[n]["点检项"],e[n].mobile=e[n]["点检人账号"],e[n].cycle=e[n]["点检周期"],e[n].editable=!1,delete e[n]["点检类型"],delete e[n]["点检项"],delete e[n]["点检人账号"],delete e[n]["点检周期"]}catch(e){return void l.$message("无法识别的内容，请参照模板文件生成文件")}return e},d=function(e,t,n){if("fromExcel"===t)try{for(var a=0;a<e.length;a++)!function(t){if(e[t]["传感器名称"]?e[t].sensorName={value:e[t]["传感器名称"],msg:""}:e[t].sensorName={value:"",msg:""},e[t]["点位类型"]?(n[0].options.forEach(function(n){n.TypeName===e[t]["点位类型"]&&(e[t].typeSection="state",e[t]["小数位"]="",e[t]["单位"]="",e[t].sensorTypeId={value:n.ID,msg:""})}),n[1].options.forEach(function(n){if(n.TypeName===e[t]["点位类型"]){e[t].typeSection="simulate",e[t].sensorTypeId={value:n.ID,msg:""};var a=[];n.Value&&(a=n.Value.split("|")),-1===a.indexOf(e[t]["单位"])&&(e[t]["单位"]=""),e[t].unitOptions=a}}),e[t].sensorTypeId||(e[t].sensorTypeId={value:"",msg:""})):e[t].sensorTypeId={value:"",msg:""},e[t]["小数位"]?e[t].decimal={value:Number(e[t]["小数位"]),msg:""}:e[t].decimal={value:"",msg:""},e[t]["单位"]?e[t].unit={value:e[t]["单位"],msg:""}:e[t].unit={value:"",msg:""},e[t]["映射"]){var a=e[t]["映射"].split("/");e[t].field1={value:a[0],msg:""},e[t].field2={value:a[1],msg:""},e[t].field3={value:a[2],msg:""},e[t].field4={value:a[3],msg:""}}else e[t].field1={value:"",msg:""},e[t].field2={value:"",msg:""},e[t].field3={value:"",msg:""},e[t].field4={value:"",msg:""};if(e[t]["从站地址"]?e[t].address={value:e[t]["从站地址"],msg:""}:e[t].address={value:"",msg:""},e[t]["功能码"])switch(e[t].funcode={value:e[t]["功能码"],msg:""},e[t].funcode.value){case"01读写":e[t].funcode.value=1;break;case"02只读":e[t].funcode.value=2;break;case"03读写":e[t].funcode.value=3;break;case"04只读":e[t].funcode.value=4}else e[t].funcode={value:"",msg:""};if(e[t]["寄存器地址"]?e[t].bias={value:e[t]["寄存器地址"],msg:""}:e[t].bias={value:"",msg:""},e[t]["数据格式"])switch(e[t].datatype={value:e[t]["数据格式"],msg:""},e[t].datatype.value){case"16位有符号数":e[t].datatype.value=1;break;case"16位无符号数":e[t].datatype.value=2;break;case"32位有符号数":e[t].datatype.value=3;break;case"32位无符号数":e[t].datatype.value=4;break;case"32位浮点型数":e[t].datatype.value=5;break;case"16位按位读取":e[t].datatype.value=6;break;case"bit":e[t].datatype.value=7}else e[t].datatype={value:"",msg:""};e[t]["字节顺序"]?e[t].orderStr={value:e[t]["字节顺序"],msg:""}:e[t].orderStr={value:"",msg:""},e[t]["地址位"]?e[t].datas={value:e[t]["地址位"],msg:""}:e[t].datas={value:"",msg:""},e[t]["采集周期/s"]?e[t].cycle={value:e[t]["采集周期/s"],msg:""}:e[t].cycle={value:"",msg:""},e[t].pointType="1",e[t].editable=!1,e[t].flag=Math.random()}(a)}catch(e){return void alert("无法识别的内容，请参照模板文件生成文件")}else if("fromServer"===t)for(var a=0;a<e.length;a++)!function(t){e[t].sensorName={value:e[t].NEW_NAME,msg:""},e[t].sensorTypeId={value:e[t].TYPE,msg:""},e[t].decimal={value:e[t].DECIMAL_POINT,msg:""},e[t].unit={value:e[t].UNIT,msg:""},e[t].field1={value:""!==e[t].field1&&null!==e[t].field1?e[t].field1:"",msg:""},e[t].field2={value:""!==e[t].field2&&null!==e[t].field2?e[t].field2:"",msg:""},e[t].field3={value:""!==e[t].field3&&null!==e[t].field3?e[t].field3:"",msg:""},e[t].field4={value:""!==e[t].field4&&null!==e[t].field4?e[t].field4:"",msg:""},e[t].funcode={value:e[t].function,msg:""},e[t].bias={value:e[t].address,msg:""},e[t].datatype={value:e[t].dataType,msg:""},e[t].address={value:e[t].slaveId,msg:""},e[t].orderStr={value:e[t].orderStr,msg:""},e[t].datas={value:e[t].bit?e[t].bit:"",msg:""},e[t].cycle={value:e[t].cycle.toString(),msg:""},n[0].options.forEach(function(n){n.ID===e[t].TYPE&&(e[t].typeSection="state")}),n[1].options.forEach(function(n){if(n.ID===e[t].TYPE){e[t].typeSection="simulate";var a=[];n.Value&&(a=n.Value.split("|")),e[t].unitOptions=a}}),e[t].editable=!1,e[t].flag=Math.random()}(a);else if("templateFromServer"===t)for(var a=0;a<e.length;a++)!function(t){e[t].sensorName={value:e[t].sensorName,msg:""},n[0].options.forEach(function(n){n.ID===e[t].sensorTypeId&&(e[t].typeSection="state")}),n[1].options.forEach(function(n){if(n.ID===e[t].sensorTypeId){e[t].typeSection="simulate";var a=[];n.Value&&(a=n.Value.split("|")),e[t].unitOptions=a}}),e[t].sensorTypeId={value:e[t].sensorTypeId,msg:""},e[t].decimal={value:e[t].decimal,msg:""},e[t].unit={value:e[t].unit,msg:""},e[t].field1={value:e[t].field1,msg:""},e[t].field2={value:e[t].field2,msg:""},e[t].field3={value:e[t].field3,msg:""},e[t].field4={value:e[t].field4,msg:""},e[t].fieldId=e[t].fieldId,e[t].address={value:e[t].address,msg:""},e[t].funcode={value:e[t].funcode,msg:""},e[t].bias={value:e[t].bias,msg:""},e[t].datatype={value:e[t].datatype,msg:""},e[t].orderStr={value:e[t].orderStr,msg:""},e[t].datas={value:e[t].datas?e[t].datas:"",msg:""},e[t].cycle={value:e[t].cycle,msg:""},e[t].editable=!1,e[t].flag=Math.random()}(a);else if("tcpGateway"===t)for(var a=0;a<e.length;a++)!function(t){e[t].channel=e[t].Channel,e[t].sensorName={value:e[t].NAME,msg:""},e[t].sensorTypeId={value:e[t].TYPE,msg:""},e[t].decimal={value:e[t].DECIMAL_POINT,msg:""},e[t].unit={value:e[t].UNIT,msg:""};var a=e[t].Map?e[t].Map.split(","):[];e[t].field1={value:a.length?a[0]:"",msg:""},e[t].field2={value:a.length?a[1]:"",msg:""},e[t].field3={value:a.length?a[2]:"",msg:""},e[t].field4={value:a.length?a[3]:"",msg:""},n[0].options.forEach(function(n){n.ID===e[t].TYPE&&(e[t].typeSection="state")}),n[1].options.forEach(function(n){if(n.ID===e[t].TYPE){e[t].typeSection="simulate";var a=[];n.Value&&(a=n.Value.split("|")),e[t].unitOptions=a}}),e[t].editable=!1}(a);return e},f=function(e,t,n){var a={};a.sensorName=t.sensorName,a.sensorName.value=a.sensorName.value+"-copy",a.sensorTypeId=t.sensorTypeId,a.decimal=t.decimal,a.unit=t.unit,a.field1=t.field1,a.field2=t.field2,a.field3=t.field3,a.field4=t.field4,a.editable=!0,n||(a.address=t.address,a.funcode=t.funcode,a.bias=t.bias,a.datatype=t.datatype,a.orderStr=t.orderStr,a.datas=t.datas,a.cycle=t.cycle,a.pointType=t.pointType,a.editable=!0,a.flag=Math.random()),e.unshift(a)},p=function(e,t){var n=[];t.forEach(function(e){var t={};t.sensorName=e.sensorName,t.sensorName.value=t.sensorName.value+"-copy",t.sensorTypeId=e.sensorTypeId,t.decimal=e.decimal,t.unit=e.unit,t.field1=e.field1,t.field2=e.field2,t.field3=e.field3,t.field4=e.field4,t.address=e.address,t.funcode=e.funcode,t.bias=e.bias,t.datatype=e.datatype,t.orderStr=e.orderStr,t.datas=e.datas,t.cycle=e.cycle,t.pointType=e.pointType,t.editable=!0,t.flag=Math.random(),n.push(t)}),e.unshift.apply(e,n)},v=function(e,t,n){if(t)if(n){for(var a=[],i=1;i<n+1;i++){var r={sensorName:{value:"",msg:""},sensorTypeId:{value:"",msg:""},decimal:{value:0,msg:""},unit:{value:"",msg:""},field1:{value:"",msg:""},field2:{value:"",msg:""},field3:{value:"",msg:""},field4:{value:"",msg:""},editable:!0,channel:i};a.push(r)}e.unshift.apply(e,a)}else e.unshift({sensorName:{value:"",msg:""},sensorTypeId:{value:"",msg:""},decimal:{value:0,msg:""},unit:{value:"",msg:""},field1:{value:"",msg:""},field2:{value:"",msg:""},field3:{value:"",msg:""},field4:{value:"",msg:""},editable:!0,channel:""});else e.unshift({sensorName:{value:"",msg:""},sensorTypeId:{value:"",msg:""},decimal:{value:0,msg:""},unit:{value:"",msg:""},field1:{value:"",msg:""},field2:{value:"",msg:""},field3:{value:"",msg:""},field4:{value:"",msg:""},address:{value:"",msg:""},funcode:{value:"",msg:""},bias:{value:"",msg:""},datatype:{value:"",msg:""},orderStr:{value:"",msg:""},datas:{value:"",msg:""},cycle:{value:"",msg:""},pointType:"1",editable:!0,flag:Math.random()})},m=function(e){return""!==e&&parseInt(e,10)==e}}});
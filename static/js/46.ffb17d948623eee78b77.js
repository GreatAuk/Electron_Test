webpackJsonp([46,112],{542:function(e,t,a){a(756);var i=a(38)(a(741),a(759),"data-v-644a5a6f",null);e.exports=i.exports},545:function(e,t,a){a(823);var i=a(38)(a(806),a(829),"data-v-01c02aae",null);e.exports=i.exports},717:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"e",function(){return s}),a.d(t,"f",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"b",function(){return c});var i=a(32),n=function(e){return i.a.get("/api/StatisticalAnalysis/GetProjectAlarm",{params:{user:e}})},r=function(e,t,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectAlarmStatistics",{params:{type:e,user:t,startTime:a,endTime:n}})},s=function(e,t,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectSysAlarmNum",{params:{type:e,user:t,startTime:a,endTime:n}})},o=function(e,t,a){return i.a.get("/api/StatisticalAnalysis/GetProjectAlarmTime",{params:{user:e,startTime:t,endTime:a}})},l=function(e,t,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectAlarmRanking",{params:{type:e,user:t,startTime:a,endTime:n}})},c=function(e,t,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectAlarmSumRanking",{params:{type:e,user:t,startTime:a,endTime:n}})}},718:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"d",function(){return r}),a.d(t,"e",function(){return s}),a.d(t,"f",function(){return o}),a.d(t,"g",function(){return l}),a.d(t,"a",function(){return c}),a.d(t,"b",function(){return d});var i=a(32),n=function(e,t,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectTimeRepair",{params:{type:e,user:t,startTime:a,endTime:n}})},r=function(){return i.a.get("/api/StatisticalAnalysis/GetProjectRepair")},s=function(e,t,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectSysRepair",{params:{type:e,user:t,startTime:a,endTime:n}})},o=function(e,t,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectSysFaultReason",{params:{user:e,startTime:t,endTime:a,SysID:n}})},l=function(e,t,a,n,r){return i.a.get("/api/StatisticalAnalysis/GetProjectSysTable",{params:{type:e,user:t,startTime:a,endTime:n,SysID:r}})},c=function(e,t,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectRepairRanking",{params:{type:e,user:t,startTime:a,endTime:n}})},d=function(e,t,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectRepairSumRanking",{params:{type:e,user:t,startTime:a,endTime:n}})}},719:function(e,t,a){"use strict";a.d(t,"e",function(){return n}),a.d(t,"d",function(){return r}),a.d(t,"a",function(){return s}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return l});var i=a(32),n=function(){return i.a.get("api//StatisticalAnalysis/GetProjectPassenger")},r=function(e,t,a,n){return i.a.get("api//StatisticalAnalysis/GetProjectTimePassenger",{params:{type:e,user:t,startTime:a,endTime:n}})},s=function(e,t,a,n){return i.a.get("api//StatisticalAnalysis/GetProjectWeekPassenger",{params:{type:e,user:t,startTime:a,endTime:n}})},o=function(e,t,a,n){return i.a.get("api//StatisticalAnalysis/GetProjectPassengerRanking",{params:{type:e,user:t,startTime:a,endTime:n}})},l=function(e,t,a,n){return i.a.get("api//StatisticalAnalysis/GetProjectPassengerSumRanking",{params:{type:e,user:t,startTime:a,endTime:n}})}},741:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{isShow:{type:Boolean,default:!0},fixedDate:{type:String,default:"日"},isRanking:{type:Boolean,default:!1}},data:function(){return{startTime:null,endTime:null,date:"日",day:"",month:"",week:new Date,year:"",currentTime:"",currentYear:"",currentmonthDays:null,pickerOptions:{firstDayOfWeek:1,disabledDate:function(e){return e.getTime()>Date.now()-864e4}},pickerOptionsWeek:{firstDayOfWeek:1,disabledDate:function(e){return e.getTime()>Date.now()-6048e5}},pickerOptionsCommon:{disabledDate:function(e){return e.getTime()>Date.now()}},pickerOptionsDay:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}},pickerOptionsMonth:{disabledDate:function(e){return e.getTime()>Date.now()-2592e6}},pickerOptionsYear:{disabledDate:function(e){return e.getTime()>Date.now()-31536e6}},dateType:1}},mounted:function(){this.startTime=(new Date).format("yyyy-MM-dd"),this.endTime=(new Date).format("yyyy-MM-dd"),this.day=new Date,this.date=this.fixedDate,this.handleTrendRange()},methods:{handleTrendRange:function(){if("日"===this.date){var e=(new Date).format("yyyy-MM-dd");this.isRanking?(this.startTime=new Date((new Date).getTime()-864e5).format("yyyy-MM-dd"),this.endTime=new Date((new Date).getTime()-864e5).format("yyyy-MM-dd"),this.day=new Date((new Date).getTime()-864e5)):(this.startTime=e,this.endTime=e,this.day=new Date),this.dateType=1}else if("周"===this.date){var t=0===(new Date).getDay()?7:(new Date).getDay(),a=(new Date).getTime();if(this.isRanking){var i=new Date(a-24*(t-1+7)*60*60*1e3).format("yyyy-MM-dd");this.startTime=i,this.endTime=new Date(new Date(i).getTime()+5184e5).format("yyyy-MM-dd"),this.week=new Date((new Date).getTime()-6048e5)}else{var n=new Date(a-24*(t-1)*60*60*1e3).format("yyyy-MM-dd");this.startTime=n,this.endTime=new Date(new Date(n).getTime()+5184e5).format("yyyy-MM-dd"),this.week=new Date}this.dateType=2}else if("月"===this.date){if(this.currentTime=(new Date).format("yyyy-M"),this.isRanking){var r=new Date(this.currentTime.split("-")[0],Number(this.currentTime.split("-")[1])-1,0).getDate(),s=new Date((new Date).getTime()-24*r*3600*1e3).format("yyyy-MM");this.startTime=s+"-01",this.endTime=s+"-"+r,this.month=new Date((new Date).getTime()-24*r*3600*1e3)}else{this.currentmonthDays=new Date(this.currentTime.split("-")[0],this.currentTime.split("-")[1],0).getDate();var o=(new Date).format("yyyy-MM");this.startTime=o+"-01",this.endTime=(new Date).format("yyyy-MM-dd"),this.month=new Date}this.dateType=3}else{if(this.isRanking){var l=(new Date).format("yyyy");this.currentYear=l,this.startTime=Number(l)-1+"-01-01",this.endTime=Number(l)-1+"-12-31",this.year=new Date((new Date).getTime()-31536e6)}else{var c=(new Date).format("yyyy");this.currentYear=c,this.startTime=c+"-01-01",this.endTime=(new Date).format("yyyy-MM-dd"),this.year=new Date}this.dateType=4}this.$emit("handleChartData",this.startTime,this.endTime,this.dateType)},handleformatTime:function(e){if("日"===this.date)this.startTime=new Date(e).format("yyyy-MM-dd"),this.endTime=new Date(e).format("yyyy-MM-dd");else if("周"===this.date)this.startTime=new Date(new Date(e).getTime()-864e5).format("yyyy-MM-dd"),this.endTime=new Date(new Date(e).getTime()+432e6).format("yyyy-MM-dd");else if("月"===this.date){this.currentTime=e;var t=e.split("-")[0],a=e.split("-")[1],i=new Date(t,a,0);this.currentmonthDays=i.getDate(),this.startTime=e+"-01",this.endTime=new Date(new Date(this.startTime).getTime()+86400*this.currentmonthDays*1e3).format("yyyy-MM-dd")}else{var n=(new Date).format("yyyy");n===e?(this.currentYear=e,this.startTime=e+"-01-01",this.endTime=(new Date).format("yyyy-MM-dd")):(this.currentYear=e,this.startTime=e+"-01-01",this.endTime=+e+"-12-31")}this.$emit("handleChartData",this.startTime,this.endTime,this.dateType)}}}},754:function(e,t,a){t=e.exports=a(539)(),t.push([e.i,".dateSwitch-wrap[data-v-644a5a6f]{float:right}",""])},756:function(e,t,a){var i=a(754);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(540)("239baac4",i,!0)},759:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dateSwitch-wrap"},[a("div",{staticStyle:{float:"right"}},["日"===e.date?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd","picker-options":e.isRanking?e.pickerOptionsDay:e.pickerOptionsCommon,size:"small"},on:{change:e.handleformatTime},model:{value:e.day,callback:function(t){e.day=t},expression:"day"}}):"周"===e.date?a("el-date-picker",{attrs:{"picker-options":e.isRanking?e.pickerOptionsWeek:e.pickerOptions,type:"week",size:"small",format:"yyyy 第 WW 周",placeholder:"选择周"},on:{change:e.handleformatTime},model:{value:e.week,callback:function(t){e.week=t},expression:"week"}}):"月"===e.date?a("el-date-picker",{attrs:{type:"month",size:"small","value-format":"yyyy-M","picker-options":e.isRanking?e.pickerOptionsMonth:e.pickerOptionsCommon,placeholder:"选择月"},on:{change:e.handleformatTime},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}}):a("el-date-picker",{attrs:{type:"year",size:"small",placeholder:"选择年","picker-options":e.isRanking?e.pickerOptionsYear:e.pickerOptionsCommon,"value-format":"yyyy"},on:{change:e.handleformatTime},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1),e._v(" "),a("el-radio-group",{staticStyle:{float:"right",margin:"1px 20px 0 0"},attrs:{size:"small"},on:{change:e.handleTrendRange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[e.isShow?a("el-radio-button",{attrs:{label:"日"}}):e._e(),e._v(" "),a("el-radio-button",{attrs:{label:"周"}}),e._v(" "),a("el-radio-button",{attrs:{label:"月"}}),e._v(" "),a("el-radio-button",{attrs:{label:"年"}})],1)],1)},staticRenderFns:[]}},806:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(132),n=a.n(i),r=a(542),s=a.n(r),o=a(717),l=a(719),c=a(718);t.default={components:{DateSwitch:s.a},data:function(){return{dayxAxislabel:["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],weekxAxislabel:["周一","周二","周三","周四","周五","周六","周日"],monthxAxislabel:["1日","2日","3日","4日","5日","6日","7日","8日","9日","10日","11日","12日","13日","14日","15日","16日","17日","18日","19日","20日","21日","22日","23日","24日","25日","26日","27日","28日","29日","30日","31日"],yearxAxislabel:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],totalTrendAxislabel:[],uid:JSON.parse(sessionStorage.getItem("userInfo")).uid-0,trendDate:"周",totalTrendChart:null,trendSeriesName:"",chartName:""}},methods:{handleTrendChartDate:function(e,t,a){this.totalTrendAxislabel=[],this.totalTrendAxislabel=[].concat(1===a?n()(this.dayxAxislabel):2===a?n()(this.weekxAxislabel):3===a?n()(this.monthxAxislabel):n()(this.yearxAxislabel)),"operationAnalysis"===this.$route.name?(this.trendSeriesName="报修量",this.chartName="报修总趋势",this.fetchRepairNum(e,t,a)):"alarmAnalysis"===this.$route.name?(this.trendSeriesName="报警量",this.chartName="报警总趋势",this.fetchAlarmNum(e,t,a)):(this.trendSeriesName="客流量 /人",this.chartName="客流总趋势",this.fetchPassengerNum(e,t,a))},fetchPassengerNum:function(e,t,i){var n=this;a.i(l.d)(i,this.uid,e,t).then(function(e){n.TotalTrendChart(e.data)}).catch(function(e){})},fetchRepairNum:function(e,t,i){var n=this;a.i(c.c)(i,this.uid,e,t).then(function(e){n.TotalTrendChart(e.data)})},fetchAlarmNum:function(e,t,i){var n=this;a.i(o.c)(i,this.uid,e,t).then(function(e){n.TotalTrendChart(e.data)})},TotalTrendChart:function(e){this.totalTrendChart=echarts.init(document.getElementById("TotalTrend"));var t={color:["#2297E8","#48CE38","#F8D156","#FD9827","#9764DC","#339999","#50c2c2","#abd4dd","#7b98c1","#84b5ef","#ffc281","#ff8080"],tooltip:{trigger:"axis",axisPointer:{type:"shadow",crossStyle:{color:"#999"}}},calculable:!0,legend:{show:!0,top:5},toolbox:{right:40,feature:{magicType:{show:!0,type:["line","bar"]},saveAsImage:{}}},xAxis:[{type:"category",boundaryGap:!1,data:this.totalTrendAxislabel}],yAxis:[{type:"value",name:this.trendSeriesName,axisLabel:{formatter:function(e){return e>=1e3?e/1e3+"k":e}}}],grid:{left:60,right:60,top:60,bottom:40},series:e};this.totalTrendChart.setOption(t),window.addEventListener("resize",this.totalTrendChart.resize)}}}},818:function(e,t,a){t=e.exports=a(539)(),t.push([e.i,".alarmAnalysis-section[data-v-01c02aae]{box-sizing:inherit}.alarmAnalysis-section .alarm-trend-chart[data-v-01c02aae]{background:#fff}.alarmAnalysis-section .title-wrap[data-v-01c02aae]{line-height:32px}",""])},823:function(e,t,a){var i=a(818);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(540)("0c5ea87f",i,!0)},829:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"alarmAnalysis-section"},[a("el-col",{attrs:{lg:24}},[a("div",{staticClass:"alarm-trend-chart"},[a("div",{staticClass:"title-wrap"},[a("h3",[a("c-svg",{staticClass:"title-icon",attrs:{name:"bar_chart"}}),e._v(" "),a("span",{staticClass:"text"},[e._v(e._s(e.chartName))])],1),e._v(" "),a("date-switch",{attrs:{"fixed-date":e.trendDate},on:{handleChartData:e.handleTrendChartDate}})],1),e._v(" "),a("div",[a("div",{staticStyle:{height:"350px"},attrs:{id:"TotalTrend"}})])])])],1)},staticRenderFns:[]}}});
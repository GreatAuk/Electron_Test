webpackJsonp([24],{1127:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(687),n=a.n(i),o=a(132),r=a.n(o),s=a(711),l=a(808),c=a(902);e.default={data:function(){var t=this;return{currentPage:1,total:0,num:10,formInline:{},newcompact:!0,firstcompany:!0,acceptCompact:!1,remark:"",compactDialogTitle:"",tags:[],ContractID:"",pdUpRoot:null,upFileloading:!1,contractNumber:"",restaurants:[],formVisible:!1,shotrFileName:"",allFileName:"",switchValue1:"",switchValue2:"",switchValue3:"",switchValue4:"",partyBName:"",resultsCheck:null,formInline2:{contractName:"",projectId:"",partyA:"",partyB:"",startDate:"",endDate:"",firstDate:"",maintainPeriod:"",maintainPeriodUnit:"",artificialFee:0,accessoriesFee:0,contractFilePath:"",deviceTable:null,deviceList:null,deviceQuantity:null,projectName:""},wbpeoId:null,bygdRoot:null,rules:{contractName:[{required:!0,message:"请输入合同名称",trigger:"blur"}],projectId:[{required:!0,message:"请选择项目名称",trigger:"change"}],partyA:[{required:!0,message:"请输入公司名称",trigger:"blur"}],startDate:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],endDate:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],firstDate:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],maintainPeriod:[{required:!0,message:"请输入保养周期",trigger:"blur"}],maintainPeriodUnit:[{required:!0,message:"请选择周期单位",trigger:"change"}]},sendOrderForm:{task:1,qenum:null},value:"",value2:"",projectid:"",listStatus:"",delids:[],suggestContact:null,contactFilterLoading:!1,searchInput:"",inviteAble:!1,alarmTableLoading:!1,alarmTableLoading2:!1,alarmTableLoading3:!1,centerDialogVisible:!1,centerDialogVisible2:!1,centerDialogVisible3:!1,checkradio:!1,userNameInputIndex:null,updateFileName:"",pdContractNumber:"",configDialogVisible:!0,radioValue:"使用方",radio:"0",port:c.a,treedata:[],treeidarr:[],treeload:!0,defaultcheckedarr:[],wbgdRoot:null,pickerOptions1:{disabledDate:function(e){return e.getTime()<t.formInline2.startDate}},pickerOptions2:{disabledDate:function(e){if(null!=t.formInline2.firstDate&&""!=t.formInline2.firstDate)return e.getTime()>t.formInline2.firstDate}},pickerOptions3:{disabledDate:function(e){return e.getTime()<t.formInline2.startDate}},tableData:[],role:1,selectEqnum:null,resultsCheckStatus:null,str:"",sendOrderData:[],options:[{value:1,label:"周"},{value:2,label:"月"},{value:3,label:"季"},{value:4,label:"年"}],filterArr:[],filterArr2:[],filterArr3:[],filterArr4:[{value:0,text:"未开始"},{value:1,text:"待受理"},{value:5,text:"已受理"},{value:2,text:"进行中"},{value:3,text:"有逾期"},{value:4,text:"已过期"}],handledata:[]}},computed:{proList:function(){var t={id:"0",label:"全部项目"},e=[].concat(r()(this.$store.state.app.proList));return e.unshift(t),e},proList2:function(){return[].concat(r()(this.$store.state.app.proList))}},mounted:function(){this.total=this.tableData.length,this.getCompactList(),this.getFilterTagData()},methods:{partyBCheck:function(t,e,a){var i="";i=this.resultsCheck.find(function(t){return t.value===e}),""===e?a(new Error("请输入公司名称")):i?a():a(new Error("项目下没此公司"))},stripscript:function(){this.str=this.formInline2.contractName.replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g,""),this.formInline2.contractName=this.str},downloadFile:function(){window.open(c.a+"/api/Upload_File/Maintain_ContractFile_DownLoad?filepath="+this.allFileName)},updateSelectEqnum:function(){this.sendOrderData[this.userNameInputIndex].deviceList=this.treeidarr.join(","),this.sendOrderData[this.userNameInputIndex].devicenum=this.selectEqnum,this.centerDialogVisible3=!1},closefn:function(){this.projectid=""},handleSelect:function(t){this.formInline2.partyB=t.value},querySearch:function(t,e){var a=this.restaurants,i=t?a.filter(this.createFilter(t)):a;this.resultsCheck=i,e(i)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},getCompany:function(t,e){var i=this;a.i(l.a)(t,e).then(function(t){var e=JSON.parse(t.data),a=[];e.forEach(function(t){a.push({value:t.company})}),i.restaurants=a}).catch(function(t){i.restaurants=[]})},toKeepOrder:function(){this.$router.push({path:"keepOrder"}),sessionStorage.setItem("orderSessionName",this.formInline2.contractName)},getCheckedKeys:function(){var t=this;this.treeidarr=[],this.$refs.tree.getCheckedNodes().forEach(function(e){0==e.children.length&&t.treeidarr.push(e.id)}),this.selectEqnum=this.treeidarr.length,this.formInline2.deviceList=this.treeidarr.join(","),this.formInline2.deviceQuantity=this.treeidarr.length},treeFunction:function(){var t=this;this.alarmTableLoading2=!0,a.i(s.b)(this.projectid).then(function(e){var a=JSON.parse(e.data);t.treedata=t.treeFactory(a),t.alarmTableLoading2=!1}).catch(function(t){})},changeradio:function(){"使用方"==this.radioValue?this.role=1:this.role=2,this.getCompactList()},treeFactory:function(t){var e=[],a=[],i=[];t.forEach(function(t){a.push(t.sid),i.push(t.sname)}),a=[].concat(r()(new n.a(a))),i=[].concat(r()(new n.a(i)));for(var o=0;o<a.length;o++)e.push({id:a[o],label:i[o],children:[]});return"维保方"!=this.radioValue&&this.treeload?e.forEach(function(e){t.forEach(function(t){e.id===t.sid&&e.children.push({id:t.id,label:t.mname,children:[]})})}):e.forEach(function(e){t.forEach(function(t){e.id===t.sid&&e.children.push({id:t.deviceID,label:t.deviceName,children:[]})})}),e},savepddata:function(){var t=this;if(0==this.pdUpRoot)return this.$message({type:"info",message:"维保人员不能为空"}),!1;a.i(l.b)({remind:this.sendOrderForm.task,contractNumber:this.pdContractNumber,data:this.handledata}).then(function(e){e.data?(t.centerDialogVisible2=!1,t.$message({type:"success",message:"保存成功"})):t.$message({type:"danger",message:"保存失败"})}).catch(function(t){}),this.centerDialogVisible2=!1,this.getCompactList()},clickEdit:function(t){t.editable=!t.editable,""==t.personnelName||null==t.personnelName?this.pdUpRoot=!1:this.pdUpRoot=!0,"up"!=t.action&&(t.action="up",this.handledata.push(t))},fetchSuggestContact:function(t,e){var i=this;this.contactFilterLoading=!0,this.userNameInputIndex=e,this.suggestContact=[],a.i(l.c)(t.personnelName).then(function(e){var a=JSON.parse(e.data);i.suggestContact=a[0],i.inviteAble=!1,a||/^1[0-9]{10}$/.test(t)&&(i.inviteAble=!0)}).catch(function(t){}).then(function(){i.contactFilterLoading=!1})},selectUser:function(t,e,a,i){"userName"===i&&(this.$refs.popover1.showPopper=!1,this.sendOrderData[this.userNameInputIndex].personnelName=""+t,this.sendOrderData[this.userNameInputIndex].personnel=a)},eqnumDetail:function(t,e){"up"!=t.action&&(t.action="up",this.handledata.push(t)),this.newcompact=!1,this.centerDialogVisible3=!0,this.userNameInputIndex=e,this.selectEqnum=t.devicenum,this.treedata=this.treeFactory(t.deviceTable),null!=t.deviceList&&(this.defaultcheckedarr=t.deviceList.split(",")),t.devicenum=this.defaultcheckedarr.length},sendOrder:function(t){var e=this;this.handledata=[],this.userNameInputIndex="",this.centerDialogVisible2=!0,this.pdContractNumber=t.contractNumber,a.i(l.d)(t.contractNumber).then(function(t){var a=JSON.parse(t.data);e.sendOrderData=a,e.sendOrderForm.task=a[0].remind}).catch(function(t){})},compactDetails:function(t,e){var i=this;this.alarmTableLoading3=!0,this.defaultcheckedarr=[],t.contractStatus>1&&t.timeStatus>1?this.bygdRoot=!0:this.bygdRoot=!1,2!=t.contractStatus?this.wbgdRoot=!0:this.wbgdRoot=!1,"sl"===e?(this.acceptCompact=!0,this.contractID=t.contractID,this.contractNumber=t.contractNumber):this.acceptCompact=!1,this.centerDialogVisible=!0,this.newcompact=!1,this.compactDialogTitle=t.contractName+" - "+t.contractNumber,1!=t.contractStatus?this.treeload=!1:this.treeload=!0,a.i(l.e)(t.contractNumber).then(function(t){var e=JSON.parse(t.data);if(i.projectid=e.projectId,i.partyBName=e.partyB,i.formInline2=e,i.allFileName=e.contractFilePath,i.formInline2.startDate=new Date(e.startDate),i.formInline2.endDate=new Date(e.endDate),i.formInline2.firstDate=new Date(e.firstDate),null!=e.contractFilePath){var a=e.contractFilePath.substring(e.contractFilePath.indexOf("/")+1,e.contractFilePath.indexOf("-")),n=e.contractFilePath.substring(e.contractFilePath.lastIndexOf(".")),o=a+n;i.formInline2.contractFilePath=o}i.proList.find(function(t){t.id==e.projectId&&(i.formInline2.projectName=t.label)}),"维保方"!=i.radioValue&&i.treeload?i.treeFunction():i.treedata=i.treeFactory(e.deviceTable),i.selectEqnum=e.deviceQuantity,null!=e.deviceList&&(i.defaultcheckedarr=e.deviceList.split(",")),i.alarmTableLoading2=!1,i.alarmTableLoading3=!1,i.getCompactList()}).catch(function(t){})},handleCurrentChange:function(t){this.currentPage=t,this.getCompactList()},handleSizeChange:function(t){this.num=t,this.getCompactList()},beforeUpload2:function(t){var e=this,i=new FormData;return i.append("file",t),a.i(l.f)(i).then(function(a){e.allFileName=a.data,e.formInline2.contractFilePath=t.name,""!=a.data?e.$message({type:"success",message:"修改成功"}):e.$message({type:"info",message:"修改失败"})}).catch(function(t){}),!1},beforeUpload:function(t){var e=this;this.upFileloading=!0;var i=new FormData,n=document.getElementById("fileInput");i.append("file",t.target.files[0]),a.i(l.f)(i).then(function(a){e.allFileName=a.data,e.formInline2.contractFilePath=a.data,e.$message({type:"success",message:"文件上传完成"}),""==n.value?e.updateFileName="":e.updateFileName=t.target.files[0].name,e.upFileloading=!1}).catch(function(t){})},updateFn:function(t){var e=this;if(this.acceptCompact){if(this.remark.length<5)return this.$message({type:"info",message:"请填写受理备注！"}),!1;this.centerDialogVisible=!1,a.i(l.g)({ContractID:this.contractID,contractNumber:this.contractNumber,acceptResult:this.radio,acceptRemark:this.remark}).then(function(t){var a=e.formInline2.startDate.format("yyyy-MM-dd");t.data;0==e.radio?e.$message({type:"success",message:"受理成功！合同将在 "+a+" 开始生效。"}):e.$message({type:"success",message:"提交成功！请等待设备方修改合同内容。"}),e.getCompactList()}).catch(function(t){})}else this.$refs[t].validate(function(t){if(!t)return!1;e.newcompact?(e.centerDialogVisible=!1,e.formInline2.contractFilePath=e.allFileName,a.i(l.h)(e.formInline2).then(function(t){e.$message({type:"success",message:"合同创建成功！请等待维保商受理通过。"}),e.getCompactList()}).catch(function(t){})):e.firstcompany&&(e.centerDialogVisible=!1,e.formInline2.contractFilePath=e.allFileName,a.i(l.i)(e.formInline2).then(function(t){e.$message({type:"success",message:"合同已更新！请等待维保商受理通过。"}),e.getCompactList()}).catch(function(t){}))})},cancelUp:function(){this.centerDialogVisible=!1},updateFile:function(){a.i(l.f)().then(function(t){}).catch(function(t){})},formInline2Clear:function(t){var e=JSON.parse(sessionStorage.getItem("userInfo")).company;this.formInline2={contractName:"",projectId:"",partyA:"",partyB:"",startDate:"",endDate:"",firstDate:"",maintainPeriod:"",maintainPeriodUnit:"",artificialFee:0,accessoriesFee:0,contractFilePath:"",deviceTable:null,deviceList:null,deviceQuantity:null,wbpeoId:null,projectName:""},this.formInline2.partyB="",this.defaultcheckedarr=[],this.formInline2.partyA=e,this.selectEqnum="",this.remark="",this.$refs[t].resetFields(),document.getElementById("fileInput").value="",this.updateFileName="",this.radio="1"},delCompact:function(){var t=this;if(this.delids.length<1)return this.$message("请选择合同"),!1;this.$prompt('<p class="alertboxp" style="font-weight:900;"><i style="color:#ffdd0d;font-size:26px;margin-right:20px;" class="el-icon-warning"></i>您将要删除这条合同。</p><p style="margin-left:46px;">请输入您的密码来完成删除：</p>',"",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,inputType:"password",cancelButtonText:"取消"}).then(function(e){var i=e.value;if(""==i||null==i)return t.$message({type:"info",message:"删除失败，密码不能为空！"}),!1;a.i(l.j)(t.delids.join(","),i).then(function(e){e.data>=2?t.$message({type:"success",message:"合同已删除，受影响"+(e.data-2)+"行"}):1==e.data?t.$alert('<p class="alertboxp" style="font-weight:900;"><i style="color:#909399;font-size:26px;margin-right:20px;" class="el-icon-info"></i>您将要删除这条合同。</p><p style="margin-left:46px;">合同已通过受理，若需要强制删除，请联系后台服务人员。</p>',"",{confirmButtonText:"知道了",dangerouslyUseHTMLString:!0}):t.$message({type:"info",message:"删除失败，账号或密码错误！"}),t.getCompactList()})}).catch(function(){})},addCompact:function(){this.centerDialogVisible=!0,this.newcompact=!0,this.acceptCompact=!1,this.restaurants=[],this.treedata=[]},getCompactList2:function(){var t=this;a.i(l.k)({projectID:this.projectid,partyA:this.switchValue1,partyB:this.switchValue2,projectIDs:this.switchValue3,contractNumber:this.searchInput,status:this.switchValue4,pagesize:1,show_number:this.num,role:this.role}).then(function(e){var a=JSON.parse(e.data);t.tableData=a.list,t.total=a.sumCount,t.alarmTableLoading=!1}).catch(function(t){})},getCompactList:function(){var t=this;this.alarmTableLoading=!0,a.i(l.k)({projectID:this.projectid,partyA:this.switchValue1,partyB:this.switchValue2,projectIDs:this.switchValue3,contractNumber:this.searchInput,status:this.switchValue4,pagesize:this.currentPage,show_number:this.num,role:this.role}).then(function(e){var a=JSON.parse(e.data);t.tableData=a.list,t.total=a.sumCount,t.alarmTableLoading=!1}).catch(function(t){})},handleSelectionChange:function(t){var e=[];t.forEach(function(t){e.push(t.contractID)}),this.delids=e},getFilterTagData:function(){var t=this;"使用方"==this.radioValue?this.role=1:this.role=2,a.i(l.l)(this.role).then(function(e){var a=JSON.parse(e.data);t.filterArr=a.partyA,t.filterArr2=a.partyB,t.filterArr3=a.project}).catch(function(t){})},transformDate:function(t,e){return new Date(t.customizedTime).format("yyyy/MM/dd")},resetSearch:function(){this.switchValue1="",this.switchValue2="",this.switchValue3="",this.switchValue4="",this.projectid="",this.value="",this.searchInput="",this.getCompactList()},searchKeyWords:function(){this.alarmTableLoading=!0,this.getCompactList2()},switchData1:function(t){this.getCompactList2()},switchData2:function(t){this.getCompactList2()},switchData3:function(t){this.getCompactList2()},switchData4:function(t){this.getCompactList2()},switchProject:function(t){this.$store.commit("UPDATE_CHECKID",t),this.projectid=t;this.proList.find(function(e){return e.id===t}),this.getCompactList()},switchProject2:function(t){this.selectEqnum="",this.$store.commit("UPDATE_CHECKID",t),this.projectid=t,this.treeFunction(),this.formInline2.partyB="",this.getCompany(t,this.formInline2.partyB);this.proList.find(function(e){return e.id===t})}}}},1277:function(t,e,a){e=t.exports=a(539)(),e.push([t.i,".managediv .compactform1 .el-form-item{display:-ms-flexbox;display:flex}.managediv .compactform1 .el-form-item .el-form-item__label{margin-left:15px}.managediv .compactform1 .el-form-item .el-form-item__content{-ms-flex:3;flex:3}.managediv .compactform1 .el-form-item .el-form-item__content .el-select--small{width:100%}.managediv .projectEdit .el-tag--success{margin-left:0}.managediv .el-input input[type=password]{width:300px;margin-left:46px}.contact-popover{padding:0}.contact-popover .loading-mask,.contact-popover .no-contact{height:48px;text-align:center;line-height:48px}.contact-popover .no-contact{color:#ccc}.contact-popover .el-icon-loading{font-size:25px}.contact-popover .register-invite{height:48px;text-align:center;line-height:48px}.device-contact-list{list-style:none;height:48px;overflow:auto}.device-contact-list-item{cursor:pointer;padding:6px 15px}.device-contact-list-item:hover{background:#f2f4f6}.device-contact-list-item .contact-avatar{display:table-cell;vertical-align:middle;width:25px;height:25px}.device-contact-list-item .contact-avatar img{width:25px;height:25px;border-radius:50%}.device-contact-list-item .contact-info{padding-left:10px;display:table-cell}.device-contact-list-item .contact-username{font-size:14px}.device-contact-list-item .contact-phone{font-size:12px;color:#ccc}",""])},1278:function(t,e,a){e=t.exports=a(539)(),e.push([t.i,".managediv .file-btn[data-v-6c4065ae]{position:relative;overflow:hidden;width:136px;cursor:pointer;display:inline-block;line-height:1;white-space:nowrap;background:#fff;border:1px solid #dcdfe6;color:#606266;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:0;margin:0;transition:.1s;font-weight:500;padding:10px 15px;font-size:14px;border-radius:4px}.managediv .file-btn input[data-v-6c4065ae]{position:absolute;top:0;right:0;font-size:37px;opacity:0;cursor:pointer}.managediv .file-btn .iconsize[data-v-6c4065ae]{width:14px;height:14px;vertical-align:sub}.managediv .file-btn[data-v-6c4065ae]:hover{color:#409eff;border-color:#c6e2ff;background-color:#ecf5ff}.managediv .tagsdiv[data-v-6c4065ae]{width:340px;min-height:80px;overflow:hidden;margin-left:100px;border:1px solid #c0c4cc;border-radius:4px}.managediv .tagsdiv .el-tag[data-v-6c4065ae]{margin:3px 5px}",""])},1407:function(t,e,a){var i=a(1277);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(540)("061ebcf1",i,!0)},1408:function(t,e,a){var i=a(1278);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(540)("40e589db",i,!0)},1560:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"managediv bg-fff",staticStyle:{padding:"32px"}},[a("el-form",{staticClass:"compactform1",staticStyle:{overflow:"hidden"},attrs:{inline:!0,model:t.formInline}},[a("el-row",{attrs:{gutter:48}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"项目选择"}},[a("el-select",{attrs:{placeholder:"请选择项目",size:"small"},on:{change:t.switchProject},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.proList,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同查找"}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"合同名称、合同编号"},on:{clear:t.searchKeyWords},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchKeyWords(e)}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:t.formVisible,expression:"formVisible"}],attrs:{span:8}},[a("el-form-item",{attrs:{label:"甲方单位"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择单位",size:"small"},on:{clear:t.switchData1,change:t.switchData1},model:{value:t.switchValue1,callback:function(e){t.switchValue1=e},expression:"switchValue1"}},t._l(t.filterArr,function(t){return a("el-option",{key:t.value,attrs:{value:t.text,label:t.text}})}),1)],1)],1),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:t.formVisible,expression:"formVisible"}],attrs:{span:8}},[a("el-form-item",{attrs:{label:"乙方单位"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择单位",size:"small"},on:{clear:t.switchData2,change:t.switchData2},model:{value:t.switchValue2,callback:function(e){t.switchValue2=e},expression:"switchValue2"}},t._l(t.filterArr2,function(t){return a("el-option",{key:t.value,attrs:{value:t.text,label:t.text}})}),1)],1)],1),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:t.formVisible,expression:"formVisible"}],attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属项目"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择项目",size:"small"},on:{clear:t.switchData3,change:t.switchData3},model:{value:t.switchValue3,callback:function(e){t.switchValue3=e},expression:"switchValue3"}},t._l(t.filterArr3,function(t){return a("el-option",{key:t.value,attrs:{value:t.value,label:t.text}})}),1)],1)],1),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:t.formVisible,expression:"formVisible"}],attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择状态",size:"small"},on:{clear:t.switchData4,change:t.switchData4},model:{value:t.switchValue4,callback:function(e){t.switchValue4=e},expression:"switchValue4"}},t._l(t.filterArr4,function(t){return a("el-option",{key:t.value,attrs:{value:t.value,label:t.text}})}),1)],1)],1),t._v(" "),a("el-col",{style:{float:t.formVisible?"right":"auto"},attrs:{span:8}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{staticClass:"headbtns",staticStyle:{"margin-right":"5px"},attrs:{icon:"el-icon-refresh",size:"small"},on:{click:t.resetSearch}},[t._v("\n            重 置\n          ")]),t._v(" "),a("el-button",{staticClass:"headbtns",staticStyle:{"margin-right":"5px"},attrs:{type:"primary",disabled:"维保方"==t.radioValue,size:"small"},on:{click:t.addCompact}},[t._v("\n            新增合同\n          ")]),t._v(" "),a("el-button",{staticClass:"headbtns",attrs:{type:"danger",disabled:"维保方"==t.radioValue,size:"small"},on:{click:t.delCompact}},[t._v("\n            删除合同\n          ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"text",icon:t.formVisible?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:function(e){t.formVisible=!t.formVisible}}},[t._v("\n            "+t._s(t.formVisible?"收起":"展开")+"\n          ")])],1)],1)],1)],1),t._v(" "),a("el-radio-group",{staticStyle:{"margin-bottom":"15px"},attrs:{size:"mini"},on:{change:t.changeradio},model:{value:t.radioValue,callback:function(e){t.radioValue=e},expression:"radioValue"}},[a("el-radio-button",{attrs:{label:"使用方"}}),t._v(" "),a("el-radio-button",{attrs:{label:"维保方"}})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.alarmTableLoading,expression:"alarmTableLoading"}],staticClass:"entrytable",staticStyle:{width:"100%","border-radius":"6px"},attrs:{data:t.tableData,"tooltip-effect":"dark","element-loading-text":"加载中...","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"合同名称",prop:"contractName","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.compactDetails(e.row)}}},[t._v("\n          "+t._s(e.row.contractName)+"\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"contractNumber",label:"合同编号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partyA",label:"甲方单位","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partyB",label:"乙方单位","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"projectName",label:"所属项目","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"deviceQuantity",label:"设备数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Status",label:"合同状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.contractStatus?a("el-tag",{staticStyle:{background:"rgba(236,254,245,0.2)",color:"rgb(111, 143, 127)"}},[t._v("\n          待受理\n        ")]):2==e.row.contractStatus?a("el-tag",{attrs:{type:"warning"}},[t._v("\n          已受理\n        ")]):3==e.row.contractStatus?a("el-tag",{attrs:{type:"danger"}},[t._v("\n          有逾期\n        ")]):t._e(),t._v(" "),a("el-tag",{attrs:{type:0==e.row.timeStatus?"info":2==e.row.timeStatus?"success":(e.row.timeStatus,"")}},[t._v("\n          "+t._s(0==e.row.timeStatus?"未开始":2==e.row.timeStatus?"进行中":4==e.row.timeStatus?"已过期":"")+"\n        ")])]}}])}),t._v(" "),"维保方"===t.radioValue?a("el-table-column",{attrs:{prop:"compactStatus",label:"操作",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.contractStatus?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.sendOrder(e.row)}}},[t._v("\n          派单计划\n        ")]):a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.compactDetails(e.row,"sl")}}},[t._v("\n          受理合同\n        ")])]}}],null,!1,2145002657)}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:this.newcompact?"新增合同":this.compactDialogTitle,visible:t.centerDialogVisible,width:"640px"},on:{"update:visible":function(e){t.centerDialogVisible=e},open:function(e){return t.formInline2Clear("formInline2")},close:t.closefn}},[a("span",[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.alarmTableLoading3,expression:"alarmTableLoading3"}],ref:"formInline2",staticClass:"demo-form-inline",staticStyle:{overflow:"hidden"},attrs:{inline:!0,rules:t.rules,model:t.formInline2,"element-loading-text":"加载中...","label-width":"100px"}},[this.acceptCompact?a("div",{staticStyle:{width:"100%",height:"auto",overflow:"hidden"}},[a("el-tag",{staticStyle:{width:"100%"},attrs:{type:"danger"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"#F56C6C","margin-right":"10px"}}),t._v("请仔细核对表单中的合同内容。")]),t._v(" "),a("el-form-item",{attrs:{label:"受理结果："}},[a("el-radio",{attrs:{label:"0"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("通过")]),t._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("不通过")])],1)],1):t._e(),t._v(" "),this.acceptCompact?a("div",{staticStyle:{width:"100%",height:"auto",overflow:"hidden"}},[a("el-form-item",{attrs:{label:"受理备注："}},[a("el-input",{staticStyle:{width:"360px"},attrs:{type:"textarea",autosize:{minRows:3},placeholder:"不少于5个字符",size:"small"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"合同名称：",prop:"contractName"}},[(this.acceptCompact||0==this.wbgdRoot)&&0==this.newcompact||"维保方"==this.radioValue||"维保方"==this.radioValue?a("el-input",{staticStyle:{width:"188px"},attrs:{disabled:"",size:"small"},model:{value:t.formInline2.contractName,callback:function(e){t.$set(t.formInline2,"contractName",e)},expression:"formInline2.contractName"}}):a("el-input",{staticStyle:{width:"188px"},attrs:{placeholder:"请输入",size:"small"},on:{blur:t.stripscript},model:{value:t.formInline2.contractName,callback:function(e){t.$set(t.formInline2,"contractName",e)},expression:"formInline2.contractName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属项目：",prop:"projectId"}},[this.newcompact?a("el-select",{staticStyle:{width:"188px"},attrs:{placeholder:"请选择项目",size:"small"},on:{change:t.switchProject2},model:{value:t.formInline2.projectId,callback:function(e){t.$set(t.formInline2,"projectId",e)},expression:"formInline2.projectId"}},t._l(t.proList2,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})}),1):a("el-input",{staticStyle:{width:"188px"},attrs:{disabled:"",size:"small"},model:{value:t.formInline2.projectName,callback:function(e){t.$set(t.formInline2,"projectName",e)},expression:"formInline2.projectName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"甲方公司：",prop:"partyA"}},[this.newcompact?a("el-input",{staticStyle:{width:"188px"},attrs:{placeholder:"请输入",size:"small"},model:{value:t.formInline2.partyA,callback:function(e){t.$set(t.formInline2,"partyA",e)},expression:"formInline2.partyA"}}):a("el-input",{staticStyle:{width:"188px"},attrs:{disabled:"",size:"small"},model:{value:t.formInline2.partyA,callback:function(e){t.$set(t.formInline2,"partyA",e)},expression:"formInline2.partyA"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"乙方公司：",prop:"partyB",rules:0==this.newcompact?{}:[{required:!0,validator:t.partyBCheck,trigger:"blur"},{required:!0,validator:t.partyBCheck,trigger:"input"},{required:!0,validator:t.partyBCheck,trigger:"change"}]}},[this.newcompact?a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"188px"},attrs:{size:"small","fetch-suggestions":t.querySearch,placeholder:"请输入内容"},on:{select:t.handleSelect},model:{value:t.formInline2.partyB,callback:function(e){t.$set(t.formInline2,"partyB",e)},expression:"formInline2.partyB"}}):a("el-input",{staticStyle:{width:"188px"},attrs:{disabled:"",size:"small"},model:{value:t.formInline2.partyB,callback:function(e){t.$set(t.formInline2,"partyB",e)},expression:"formInline2.partyB"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间：",prop:"startDate"}},[(this.acceptCompact||0==this.wbgdRoot)&&0==this.newcompact||"维保方"==this.radioValue?a("el-date-picker",{staticStyle:{width:"188px"},attrs:{disabled:"",size:"small",type:"date",placeholder:"选择日期"},model:{value:t.formInline2.startDate,callback:function(e){t.$set(t.formInline2,"startDate",e)},expression:"formInline2.startDate"}}):a("el-date-picker",{staticStyle:{width:"188px"},attrs:{"picker-options":t.pickerOptions2,size:"small",type:"date",placeholder:"选择日期"},model:{value:t.formInline2.startDate,callback:function(e){t.$set(t.formInline2,"startDate",e)},expression:"formInline2.startDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间：",prop:"endDate"}},[(this.acceptCompact||0==this.wbgdRoot)&&0==this.newcompact||"维保方"==this.radioValue?a("el-date-picker",{staticStyle:{width:"188px"},attrs:{disabled:"",size:"small",type:"date",placeholder:"选择日期"},model:{value:t.formInline2.endDate,callback:function(e){t.$set(t.formInline2,"endDate",e)},expression:"formInline2.endDate"}}):a("el-date-picker",{staticStyle:{width:"188px"},attrs:{"picker-options":t.pickerOptions1,size:"small",type:"date",placeholder:"选择日期"},model:{value:t.formInline2.endDate,callback:function(e){t.$set(t.formInline2,"endDate",e)},expression:"formInline2.endDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"首保日期：",prop:"firstDate"}},[(this.acceptCompact||0==this.wbgdRoot)&&0==this.newcompact||"维保方"==this.radioValue?a("el-date-picker",{staticStyle:{width:"188px"},attrs:{disabled:"",size:"small",type:"date",placeholder:"选择日期"},model:{value:t.formInline2.firstDate,callback:function(e){t.$set(t.formInline2,"firstDate",e)},expression:"formInline2.firstDate"}}):a("el-date-picker",{staticStyle:{width:"188px"},attrs:{"picker-options":t.pickerOptions3,size:"small",type:"date",placeholder:"选择日期"},model:{value:t.formInline2.firstDate,callback:function(e){t.$set(t.formInline2,"firstDate",e)},expression:"formInline2.firstDate"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-right":"0px"},attrs:{label:"保养周期：",prop:"maintainPeriod",rules:[{required:!0,message:"周期不能为空"},{type:"number",message:"周期必须为数字值"}]}},[(this.acceptCompact||0==this.wbgdRoot)&&0==this.newcompact||"维保方"==this.radioValue?a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",disabled:""},model:{value:t.formInline2.maintainPeriod,callback:function(e){t.$set(t.formInline2,"maintainPeriod",t._n(e))},expression:"formInline2.maintainPeriod"}}):a("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",placeholder:"请输入"},model:{value:t.formInline2.maintainPeriod,callback:function(e){t.$set(t.formInline2,"maintainPeriod",t._n(e))},expression:"formInline2.maintainPeriod"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"maintainPeriodUnit"}},[(this.acceptCompact||0==this.wbgdRoot)&&0==this.newcompact||"维保方"==this.radioValue?a("el-select",{staticStyle:{width:"104px"},attrs:{placeholder:"请选择",disabled:"",size:"small"},model:{value:t.formInline2.maintainPeriodUnit,callback:function(e){t.$set(t.formInline2,"maintainPeriodUnit",e)},expression:"formInline2.maintainPeriodUnit"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1):a("el-select",{staticStyle:{width:"104px"},attrs:{placeholder:"请选择",size:"small"},model:{value:t.formInline2.maintainPeriodUnit,callback:function(e){t.$set(t.formInline2,"maintainPeriodUnit",e)},expression:"formInline2.maintainPeriodUnit"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"人工收费：",prop:"artificialFee"}},[(this.acceptCompact||0==this.wbgdRoot)&&0==this.newcompact||"维保方"==this.radioValue?a("el-switch",{attrs:{"active-text":"是","inactive-text":"否","active-value":0,"inactive-value":1,disabled:""},model:{value:t.formInline2.artificialFee,callback:function(e){t.$set(t.formInline2,"artificialFee",e)},expression:"formInline2.artificialFee"}}):a("el-switch",{attrs:{"active-text":"是","inactive-text":"否","active-value":0,"inactive-value":1},model:{value:t.formInline2.artificialFee,callback:function(e){t.$set(t.formInline2,"artificialFee",e)},expression:"formInline2.artificialFee"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"配件收费：",prop:"accessoriesFee"}},[(this.acceptCompact||0==this.wbgdRoot)&&0==this.newcompact||"维保方"==this.radioValue?a("el-switch",{attrs:{"active-text":"是","inactive-text":"否","active-value":0,"inactive-value":1,disabled:""},model:{value:t.formInline2.accessoriesFee,callback:function(e){t.$set(t.formInline2,"accessoriesFee",e)},expression:"formInline2.accessoriesFee"}}):a("el-switch",{attrs:{"active-text":"是","inactive-text":"否","active-value":0,"inactive-value":1},model:{value:t.formInline2.accessoriesFee,callback:function(e){t.$set(t.formInline2,"accessoriesFee",e)},expression:"formInline2.accessoriesFee"}})],1)],1),t._v(" "),this.newcompact?a("div",{staticStyle:{width:"100%",height:"auto",overflow:"hidden"}},[a("el-form-item",{attrs:{label:"保养合同："}},[a("span",{staticClass:"file-btn",attrs:{size:"mini"}},[this.upFileloading?a("i",{staticClass:"el-icon-loading"}):a("c-svg",{staticClass:"iconsize",attrs:{name:"shangchuan"}}),t._v("\n              上传文件\n              "),t.configDialogVisible?a("input",{attrs:{id:"fileInput",type:"file",multiple:"false",accept:".xlsx, .xls, .doc, .docx, .pdf, .jpg, .png"},on:{change:function(e){return t.beforeUpload(e)}}}):t._e()],1),t._v(" "),a("p",[t._v(t._s(this.updateFileName))]),t._v(" "),a("div",[t._v("支持扩展名： .doc .docx .pdf .jpg .png")])])],1):"维保方"!=t.radioValue?a("div",{staticStyle:{width:"100%",height:"auto",overflow:"hidden"}},[a("el-form-item",{attrs:{label:"合同文件："}},[null!=t.formInline2.contractFilePath?a("el-button",{attrs:{type:"text"},on:{click:t.downloadFile}},[t._v(t._s(t.formInline2.contractFilePath))]):t._e(),t._v(" "),a("el-upload",{staticClass:"upload-demo",staticStyle:{"margin-left":"20px",float:"right"},attrs:{action:"123",accept:".xlsx, .xls, .doc, .docx, .pdf, .jpg, .png","before-upload":t.beforeUpload2,multiple:""}},[(this.acceptCompact||0==this.wbgdRoot)&&0==this.newcompact||"维保方"==this.radioValue?t._e():a("el-button",{attrs:{size:"mini"}},[t._v("修改")])],1)],1)],1):t._e(),t._v(" "),0==this.newcompact?a("div",{staticStyle:{width:"100%",height:"auto",overflow:"hidden"}},[a("el-form-item",{attrs:{label:"合同动态："}},[a("span",[t._v(t._s(t.formInline2.contractdynamics))])])],1):t._e(),t._v(" "),0==this.newcompact&&1==this.bygdRoot?a("div",{staticStyle:{width:"100%",height:"auto",overflow:"hidden"}},[a("el-form-item",{attrs:{label:"保养工单："}},[a("el-button",{attrs:{type:"text"},on:{click:t.toKeepOrder}},[t._v("跳转保养工单页面")])],1)],1):t._e(),t._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"设备列表："}},[a("span",{staticStyle:{"margin-right":"15px"}},[t._v("已选中设备数量")]),a("span",{staticStyle:{color:"#ff9306","font-size":"18px","font-weight":"900"}},[t._v(" "+t._s(this.selectEqnum))])]),t._v(" "),(this.acceptCompact||0==this.wbgdRoot)&&0==this.newcompact||"维保方"==this.radioValue?a("div",{staticStyle:{width:"100%",height:"auto",overflow:"hidden"}},[a("el-tree",{staticStyle:{"margin-left":"100px"},attrs:{data:t.treedata}})],1):a("div",{staticStyle:{width:"100%",height:"auto",overflow:"hidden"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.alarmTableLoading2,expression:"alarmTableLoading2"}],ref:"tree",staticStyle:{"margin-left":"100px"},attrs:{data:t.treedata,"element-loading-text":"加载中...","show-checkbox":"","default-checked-keys":t.defaultcheckedarr,"node-key":"id"},on:{check:t.getCheckedKeys}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.cancelUp}},[t._v("取 消")]),t._v(" "),this.acceptCompact?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.updateFn("formInline2")}}},[t._v("确定")]):t._e(),t._v(" "),this.acceptCompact||!this.newcompact&&!this.wbgdRoot||"维保方"==this.radioValue?t._e():a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.updateFn("formInline2")}}},[t._v(t._s(this.newcompact?"新增并提交受理":"更新并提交受理"))])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"派单计划",visible:t.centerDialogVisible2,width:"60%"},on:{"update:visible":function(e){t.centerDialogVisible2=e}}},[a("span",[a("el-form",{ref:"sendOrderForm",staticClass:"sendOrderForm",staticStyle:{overflow:"hidden"},attrs:{model:t.sendOrderForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务提醒：",prop:""}},[t._v("\n          提前\n          "),a("el-input",{staticStyle:{width:"72px"},attrs:{placeholder:"请输入",size:"mini"},model:{value:t.sendOrderForm.task,callback:function(e){t.$set(t.sendOrderForm,"task",e)},expression:"sendOrderForm.task"}}),t._v("\n          天\n        ")],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.alarmTableLoading,expression:"alarmTableLoading"}],staticClass:"entrytable",staticStyle:{width:"100%","border-radius":"6px"},attrs:{data:t.sendOrderData,"tooltip-effect":"dark","element-loading-text":"加载中...","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"保养单",prop:"orderName","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.editable?a("span",[a("el-input",{attrs:{size:"mini"},model:{value:e.row.orderName,callback:function(a){t.$set(e.row,"orderName","string"==typeof a?a.trim():a)},expression:"scope.row.orderName"}})],1):a("span",[t._v("\n              "+t._s(e.row.orderName)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"maintainDate",label:"计划完成时间",align:"center","min-width":"140px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.editable?a("span",[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{"value-format":"yyyy/MM/dd",size:"small",type:"date",placeholder:"选择日期"},model:{value:e.row.maintainDate,callback:function(a){t.$set(e.row,"maintainDate",a)},expression:"scope.row.maintainDate"}})],1):a("span",[t._v("\n              "+t._s(e.row.maintainDate)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"devicenum",label:"设备数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.eqnumDetail(e.row,e.$index)}}},[t._v(t._s(e.row.devicenum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderState",label:"完成状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:1==e.row.orderState?"success":"info"}},[t._v(t._s(1==e.row.orderState?"已保养":"未保养"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"personnelName",label:"维保人员",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.editable?a("span",[a("el-popover",{ref:"popover1",attrs:{placement:"bottom",width:"280",trigger:"click","popper-class":"contact-popover"},on:{hide:function(e){t.inviteAble=!1}}},[t.suggestContact?a("ul",{staticClass:"device-contact-list thin-scroll"},[a("li",{staticClass:"device-contact-list-item",on:{click:function(e){return t.selectUser(t.suggestContact.nickname,t.suggestContact.mobile,t.suggestContact.RepairUserID,"userName")}}},[a("div",{staticClass:"contact-avatar"},[a("img",{attrs:{src:t.port+"/Img/Person/"+t.suggestContact.avatar,width:"25px",height:"25px",alt:""}})]),t._v(" "),a("div",{staticClass:"contact-info"},[a("div",{staticClass:"contact-username"},[t._v(t._s(t.suggestContact.nickname))]),t._v(" "),a("div",{staticClass:"contact-phone"},[t._v(t._s(t.suggestContact.mobile))])])])]):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.suggestContact&&!t.contactFilterLoading&&!t.inviteAble,expression:"!suggestContact && !contactFilterLoading && !inviteAble"}],staticClass:"no-contact"},[t._v("\n                  "+t._s(e.row.userName?"没有找到该用户":"请输入用户名或手机号查找")+"\n                ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.contactFilterLoading,expression:"contactFilterLoading"}],staticClass:"loading-mask"},[a("i",{staticClass:"el-icon-loading"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.inviteAble,expression:"inviteAble"}],staticClass:"register-invite"},[t._v("\n                  没有找到该用户 \n                  "),a("el-button",{attrs:{type:"text"},nativeOn:{click:function(a){return t.invite(e.row.personnelName)}}},[t._v("邀请加入")])],1)]),t._v(" "),a("el-input",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],attrs:{clearable:"",size:"mini",placeholder:"通过用户名或手机号搜索"},on:{focus:function(a){return t.fetchSuggestContact(e.row,e.$index)},input:function(a){return t.fetchSuggestContact(e.row,e.$index)}},model:{value:e.row.personnelName,callback:function(a){t.$set(e.row,"personnelName","string"==typeof a?a.trim():a)},expression:"scope.row.personnelName"}})],1):a("span",[t._v("\n              "+t._s(e.row.personnelName)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.clickEdit(e.row)}}},[t._v(t._s(e.row.editable?"保存":"编辑"))])]}}])})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.centerDialogVisible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.savepddata}},[t._v("确定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择设备",visible:t.centerDialogVisible3,width:"640px"},on:{"update:visible":function(e){t.centerDialogVisible3=e}}},[a("span",[a("el-form",{ref:"sendOrderForm",staticClass:"sendOrderForm",staticStyle:{overflow:"hidden"},attrs:{model:t.sendOrderForm,"label-width":"100px"}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"设备列表："}},[a("span",{staticStyle:{"margin-right":"15px"}},[t._v("已选中设备数量")]),t._v(t._s(this.selectEqnum)+"\n        ")])],1),t._v(" "),a("div",{staticStyle:{width:"100%",height:"auto",overflow:"hidden"}},[a("el-tree",{ref:"tree",staticStyle:{"margin-left":"100px"},attrs:{data:t.treedata,"show-checkbox":"","default-checked-keys":t.defaultcheckedarr,"node-key":"id"},on:{check:t.getCheckedKeys}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.centerDialogVisible3=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.updateSelectEqnum}},[t._v("确定")])],1)]),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-pagination",{attrs:{background:"","page-sizes":[10,20,50,100],"page-size":this.num,"current-page":this.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},627:function(t,e,a){a(1408),a(1407);var i=a(38)(a(1127),a(1560),"data-v-6c4065ae",null);t.exports=i.exports},684:function(t,e,a){var i=a(133)("meta"),n=a(58),o=a(69),r=a(59).f,s=0,l=Object.isExtensible||function(){return!0},c=!a(68)(function(){return l(Object.preventExtensions({}))}),u=function(t){r(t,i,{value:{i:"O"+ ++s,w:{}}})},p=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[i].i},d=function(t,e){if(!o(t,i)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[i].w},h=function(t){return c&&f.NEED&&l(t)&&!o(t,i)&&u(t),t},f=t.exports={KEY:i,NEED:!1,fastKey:p,getWeak:d,onFreeze:h}},685:function(t,e,a){var i=a(58);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},686:function(t,e,a){var i=a(70);t.exports=Array.isArray||function(t){return"Array"==i(t)}},687:function(t,e,a){t.exports={default:a(688),__esModule:!0}},688:function(t,e,a){a(215),a(134),a(213),a(698),a(701),a(700),a(699),t.exports=a(14).Set},689:function(t,e,a){var i=a(210);t.exports=function(t,e){var a=[];return i(t,!1,a.push,a,e),a}},690:function(t,e,a){var i=a(60),n=a(136),o=a(72),r=a(90),s=a(692);t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,u=4==t,p=6==t,d=5==t||p,h=e||s;return function(e,s,f){for(var m,v,g=o(e),_=n(g),b=i(s,f,3),y=r(_.length),w=0,x=a?h(e,y):l?h(e,0):void 0;y>w;w++)if((d||w in _)&&(m=_[w],v=b(m,w,g),t))if(a)x[w]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return w;case 2:x.push(m)}else if(u)return!1;return p?-1:c||u?u:x}}},691:function(t,e,a){var i=a(58),n=a(686),o=a(21)("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),i(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},692:function(t,e,a){var i=a(691);t.exports=function(t,e){return new(i(t))(e)}},693:function(t,e,a){"use strict";var i=a(59).f,n=a(214),o=a(212),r=a(60),s=a(211),l=a(210),c=a(137),u=a(216),p=a(217),d=a(61),h=a(684).fastKey,f=a(685),m=d?"_s":"size",v=function(t,e){var a,i=h(e);if("F"!==i)return t._i[i];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,c){var u=t(function(t,i){s(t,u,e,"_i"),t._t=e,t._i=n(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=i&&l(i,a,t[c],t)});return o(u.prototype,{clear:function(){for(var t=f(this,e),a=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete a[i.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var a=f(this,e),i=v(a,t);if(i){var n=i.n,o=i.p;delete a._i[i.i],i.r=!0,o&&(o.n=n),n&&(n.p=o),a._f==i&&(a._f=n),a._l==i&&(a._l=o),a[m]--}return!!i},forEach:function(t){f(this,e);for(var a,i=r(t,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(i(a.v,a.k,this);a&&a.r;)a=a.p},has:function(t){return!!v(f(this,e),t)}}),d&&i(u.prototype,"size",{get:function(){return f(this,e)[m]}}),u},def:function(t,e,a){var i,n,o=v(t,e);return o?o.v=a:(t._l=o={i:n=h(e,!0),k:e,v:a,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[m]++,"F"!==n&&(t._i[n]=o)),t},getEntry:v,setStrong:function(t,e,a){c(t,e,function(t,a){this._t=f(t,e),this._k=a,this._l=void 0},function(){for(var t=this,e=t._k,a=t._l;a&&a.r;)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?"keys"==e?u(0,a.k):"values"==e?u(0,a.v):u(0,[a.k,a.v]):(t._t=void 0,u(1))},a?"entries":"values",!a,!0),p(e)}}},694:function(t,e,a){var i=a(135),n=a(689);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return n(this)}}},695:function(t,e,a){"use strict";var i=a(15),n=a(39),o=a(684),r=a(68),s=a(52),l=a(212),c=a(210),u=a(211),p=a(58),d=a(89),h=a(59).f,f=a(690)(0),m=a(61);t.exports=function(t,e,a,v,g,_){var b=i[t],y=b,w=g?"set":"add",x=y&&y.prototype,I={};return m&&"function"==typeof y&&(_||x.forEach&&!r(function(){(new y).entries().next()}))?(y=e(function(e,a){u(e,y,t,"_c"),e._c=new b,void 0!=a&&c(a,g,e[w],e)}),f("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in x&&(!_||"clear"!=t)&&s(y.prototype,t,function(a,i){if(u(this,y,t),!e&&_&&!p(a))return"get"==t&&void 0;var n=this._c[t](0===a?0:a,i);return e?this:n})}),_||h(y.prototype,"size",{get:function(){return this._c.size}})):(y=v.getConstructor(e,t,g,w),l(y.prototype,a),o.NEED=!0),d(y,t),I[t]=y,n(n.G+n.W+n.F,I),_||v.setStrong(y,t,g),y}},696:function(t,e,a){"use strict";var i=a(39),n=a(71),o=a(60),r=a(210);t.exports=function(t){i(i.S,t,{from:function(t){var e,a,i,s,l=arguments[1];return n(this),e=void 0!==l,e&&n(l),void 0==t?new this:(a=[],e?(i=0,s=o(l,arguments[2],2),r(t,!1,function(t){a.push(s(t,i++))})):r(t,!1,a.push,a),new this(a))}})}},697:function(t,e,a){"use strict";var i=a(39);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},698:function(t,e,a){"use strict";var i=a(693),n=a(685);t.exports=a(695)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(n(this,"Set"),t=0===t?0:t,t)}},i)},699:function(t,e,a){a(696)("Set")},700:function(t,e,a){a(697)("Set")},701:function(t,e,a){var i=a(39);i(i.P+i.R,"Set",{toJSON:a(694)("Set")})},711:function(t,e,a){"use strict";a.d(e,"p",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"o",function(){return r}),a.d(e,"i",function(){return s}),a.d(e,"a",function(){return l}),a.d(e,"n",function(){return c}),a.d(e,"h",function(){return u}),a.d(e,"g",function(){return p}),a.d(e,"f",function(){return d}),a.d(e,"e",function(){return h}),a.d(e,"b",function(){return f}),a.d(e,"l",function(){return m}),a.d(e,"m",function(){return v}),a.d(e,"k",function(){return g}),a.d(e,"d",function(){return _}),a.d(e,"j",function(){return b});var i=a(32),n=function(t){return i.a.get("/api/project/loadSite",{params:{uid:t}})},o=function(t){return i.a.post("/api/project/addProject",t)},r=function(t){return i.a.post("/api/project/upProject",t)},s=function(t,e){return i.a.get("/api/project/delProject",{params:{pid:t,pwd:e}})},l=function(t,e){return i.a.get("/api/project/projectShow",{params:{page:t,num:e}})},c=function(t,e){return i.a.get("/api/project/queryProject",{params:{pid:t,uid:e}})},u=function(){return i.a.get("/api/project/getTagByUid")},p=function(t){return i.a.get("/api/project/getTag",{params:{pid:t}})},d=function(t,e){return i.a.get("/api/project/delete",{params:{pid:t,id:e}})},h=function(t,e){return i.a.get("/api/project/addTag",{params:{pid:t,tag:e}})},f=function(t){return i.a.get("/api/project/getDeviceTree",{params:{project:t}})},m=function(t,e){return i.a.get("/api/project/getDevice",{params:{project:t,user:e}})},v=function(t){return i.a.post("/api/project/updateDevOrPoint",t)},g=function(t,e){return i.a.get("/api/project/getUserbyPro",{params:{project:t,inp:e}})},_=function(t){return i.a.get("/api/project/Signout",{params:{project:t}})},b=function(t,e,a){return i.a.get("/api/project/assignMent",{params:{project:t,user:e,pwd:a}})}},724:function(t,e,a){t.exports={default:a(726),__esModule:!0}},725:function(t,e,a){"use strict";e.__esModule=!0;var i=a(724),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,a){return e in t?(0,n.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},726:function(t,e,a){a(728);var i=a(14).Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},728:function(t,e,a){var i=a(39);i(i.S+i.F*!a(61),"Object",{defineProperty:a(59).f})},808:function(t,e,a){"use strict";a.d(e,"o",function(){return n}),a.d(e,"m",function(){return o}),a.d(e,"p",function(){return r}),a.d(e,"r",function(){return s}),a.d(e,"n",function(){return l}),a.d(e,"q",function(){return c}),a.d(e,"s",function(){return u}),a.d(e,"t",function(){return p}),a.d(e,"h",function(){return d}),a.d(e,"k",function(){return h}),a.d(e,"f",function(){return f}),a.d(e,"e",function(){return m}),a.d(e,"i",function(){return v}),a.d(e,"j",function(){return g}),a.d(e,"g",function(){return _}),a.d(e,"y",function(){return b}),a.d(e,"x",function(){return y}),a.d(e,"b",function(){return w}),a.d(e,"v",function(){return x}),a.d(e,"d",function(){return I}),a.d(e,"l",function(){return D}),a.d(e,"a",function(){return k}),a.d(e,"u",function(){return C}),a.d(e,"w",function(){return S}),a.d(e,"c",function(){return N});var i=a(32),n=function(t){return i.a.get("/api/Spotcheck/DeleteSpotcheck_plan",{params:{planID:t}})},o=function(t){return i.a.get("/api/Maintenance_team/QueryUser",{params:{screen:t}})},r=function(t){return i.a.get("/api/Spotcheck/GetSpotcheckPlan",{params:{planID:t}})},s=function(t){return i.a.get("/api/Spotcheck/StatusSpotcheck_plan",{params:{planID:t}})},l=function(t){return i.a.post("/api/Spotcheck/UpdateSpotcheckPlan",t)},c=function(t){return i.a.post("/api/Spotcheck/InserSpotcheckPlan",t)},u=function(t){return i.a.post("/api/Spotcheck/QuerySpotcheckPlan",t)},p=function(t){return i.a.post("/api/Spotcheck/QuerySpotcheckPlanRow",t)},d=function(t){return i.a.post("/api/MaintainContract/AddMaintain_Contract",t)},h=function(t){return i.a.post("/api/MaintainContract/Maintain_ContractList",t)},f=function(t){return i.a.post("/api/Upload_File/Upload_Maintain_ContractFile",t,{headers:{"Content-Type":"multipart/form-data"}})},m=function(t){return i.a.get("/api/MaintainContract/QueryMaintain_Contract",{params:{contractNumber:t}})},v=function(t){return i.a.post("/api/MaintainContract/UpdateMaintain_Contract",t)},g=function(t,e){return i.a.get("/api/MaintainContract/DeleteMaintain_Contract",{params:{ContractID:t,pwd:e}})},_=function(t){return i.a.post("/api/MaintainContract/APMaintain_Contract",t)},b=function(t){return i.a.post("/api/MaintainContract/Maintain_OrderList",t)},y=function(t){return i.a.get("/api/MaintainContract/QueryMaintain_Order",{params:{orderNumber:t}})},w=function(t){return i.a.post("/api/MaintainContract/UpdateMaintain_Order",t)},x=function(t){return i.a.post("/api/MaintainContract/UploadMaintain_OrderRecord",t)},I=function(t){return i.a.get("/api/MaintainContract/MaintainPlanList",{params:{contractNumber:t}})},D=function(t){return i.a.get("/api/MaintainContract/Maintain_ContractScreen",{params:{role:t}})},k=function(t,e){return i.a.get("/api/MaintainContract/Project_Company",{params:{projectID:t,companyName:e}})},C=function(){return i.a.get("/api/MaintainContract/Maintain_OrderScreen")},S=function(t){return i.a.post("/api/MaintainContract/UpdateMaintain_OrderRecord",t)},N=function(t){return i.a.get("/api/MaintainContract/Maintain_OrderPerson",{params:{text:t}})}},902:function(t,e,a){"use strict";a.d(e,"a",function(){return _host});var i,n=a(725),o=a.n(n);_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,i={ShowAll:_host+"/api/DeviceInfo/ShowAll",addDevices:_host+"/api/DeviceInfo/addDevices",updateDevices:_host+"/api/DeviceInfo/updateDevices",queryDevicesInfo:_host+"/api/DeviceInfo/queryDevicesInfo",queryDevicesIndex:_host+"/api/DeviceInfo/queryDevicesIndex",querySensorDataById_bak:_host+"/api/DeviceInfo/querySensorDataById_bak",querySensorDataInfo:_host+"/api/DeviceInfo/querySensorDataInfo",delDevices:_host+"/api/DeviceInfo/delDevices",delSensor:_host+"/api/DeviceInfo/delSensor",delMapping:_host+"/api/DeviceInfo/delMapping",sendSwitchValue:_host+"/api/DeviceInfo/sendSwitchValue",selectNo:_host+"/api/DeviceInfo/selectNo",queryDevice:_host+"/api/DeviceInfo/queryDevice",saveModbus:_host+"/api/DeviceInfo/saveModbus",QueryModbus:_host+"/api/DeviceInfo/QueryModbus",getInfoById:_host+"/api/DeviceInfo/getInfoById",addModel:_host+"/api/DeviceInfo/addModel",deleteModel:_host+"/api/DeviceInfo/deleteModel",updateModel:_host+"/api/DeviceInfo/updateModel",getBigInfo:_host+"/api/DeviceInfo/getBigInfo",getSmallInfo:_host+"/api/DeviceInfo/getSmallInfo",addDeviceInfo:_host+"/api/DeviceInfo/addDeviceInfo",addContact:_host+"/api/DeviceInfo/addContact",updateDevice:_host+"/api/DeviceInfo/updateDevice",queryCompany:_host+"/api/DeviceInfo/queryCompany",deleteDevice:_host+"/api/DeviceInfo/deleteDevice",imgSmallUrl:_host+"/api/DeviceInfo/imgSmallUrl",imgUrl:_host+"/api/deviceInfo/imgUrl",FileUrl:_host+"/api/DeviceInfo/FileUrl",GetRespose:_host+"/api/DeviceInfo/GetRespose",DownLoad:_host+"/api/DeviceInfo/DownLoad",addTemplate:_host+"/api/DeviceInfo/addTemplate",getTempByUid:_host+"/api/DeviceInfo/getTempByUid",getTempById:_host+"/api/DeviceInfo/getTempById",updateTemplate:_host+"/api/DeviceInfo/updateTemplate",getTempByType:_host+"/api/DeviceInfo/getTempByType",deleteTemplate:_host+"/api/DeviceInfo/deleteTemplate",getUserbyPro:_host+"/api/DeviceInfo/getUserbyPro",regionUser:_host+"/api/DeviceInfo/regionUser",deleteUser:_host+"/api/DeviceInfo/deleteUser",deviceContact:_host+"/api/DeviceInfo/Get_Device_contactsList"},o()(i,"addContact",_host+"/api/DeviceInfo/Add_Device_contacts"),o()(i,"delContact",_host+"/api/DeviceInfo/Delete_Device_contacts"),o()(i,"queryContact",_host+"/api/Maintenance_team/QueryUser"),_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host,_host}});
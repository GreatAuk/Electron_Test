webpackJsonp([18,32],{1075:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(722),r=i(807),n=i(222),o=i(541),s=i.n(o),l=i(1179);t.default={components:{exportToExcel:function(e){return i.e(146).then(function(){var t=[i(546)];e.apply(null,t)}.bind(this)).catch(i.oe)},HistoryDialog:s.a},data:function(){return{projectList:JSON.parse(sessionStorage.getItem("proList")),childSysOptions:[],typeTreeProps:{label:"name",children:"Child"},alarmData:[],alarmTableLoading:!1,total:1,currentPage:1,pageSize:10,exportTableData:[],exportLoading:!1,searchForm:{uid:JSON.parse(sessionStorage.getItem("userInfo")).uid,page:1,num:10,pid:[],cstime_cetime:[],bstime_betime:[],cstime:"",cetime:"",bstime:"",betime:"",area:this.$store.state.app.pid,child:"",acontent:"",level:"",type:"",typeLabel:""},disposeReport:{id:"",name:"",confirmName:"",commtime:"",acttime:"",acktime:"",cletime:"",uname:"",COMMENT:"",reason:"",editable:!0},noteClose:!0,remark:"",disposeDialog:!1,searchPoint:null,searchHisForm:{interval:"10",starttime:new Date((new Date).getTime()-144e5),endtime:new Date},searchHisFormRules:{starttime:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],endtime:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"}],interval:[{required:!0,message:"请输入时间间隔",trigger:"blur"}]},currentVideoUrl:"",videoDialog:!1,formVisible:!1,isShow:!0,reasonOptions:[],pointTypeList:[]}},computed:{industry:function(){return this.$store.state.app.company.industry}},mounted:function(){this.fetchAlarmData(),this.fetchChildSysOptions(),630!==this.searchForm.uid&&631!==this.searchForm.uid&&632!==this.searchForm.uid||(this.isShow=!1),this.fetchPointTypeList(this.$store.state.app.project.id)},methods:{handleFormVisible:function(){this.formVisible=!this.formVisible},searchAlarm:function(){this.searchForm.cstime_cetime.length&&(this.searchForm.cstime=this.searchForm.cstime_cetime[0]&&this.searchForm.cstime_cetime[0].format("yyyy/MM/dd hh:mm"),this.searchForm.cetime=this.searchForm.cstime_cetime[1]&&this.searchForm.cstime_cetime[1].format("yyyy/MM/dd hh:mm")),this.searchForm.bstime_betime.length&&(this.searchForm.bstime=this.searchForm.bstime_betime[0]&&this.searchForm.bstime_betime[0].format("yyyy/MM/dd hh:mm"),this.searchForm.betime=this.searchForm.bstime_betime[1]&&this.searchForm.bstime_betime[1].format("yyyy/MM/dd hh:mm")),this.searchForm.num=this.pageSize,this.searchForm.page=1,1===this.currentPage?this.fetchAlarmData():this.currentPage=1},tableRowClassName:function(e){var t=e.row;e.rowIndex;return"记录"===t.levelname?"":"一般"===t.levelname?"primary-row":"重要"===t.levelname?"warning-row":"danger-row"},resetForm:function(){this.searchForm.cstime_cetime=[],this.searchForm.bstime_betime=[],this.searchForm.cstime="",this.searchForm.cetime="",this.searchForm.bstime="",this.searchForm.cetime="",this.searchForm.child="",this.searchForm.acontent="",this.searchForm.level="",this.searchForm.type="",this.searchForm.typeLabel="",this.fetchAlarmData()},clickExport:function(){var e=this;this.exportLoading=!0,this.searchForm.num=this.total,this.searchForm.page=1,this.searchForm.cstime="",this.searchForm.cetime="",this.searchForm.cstime_cetime.length&&(this.searchForm.cstime=this.searchForm.cstime_cetime[0]&&this.searchForm.cstime_cetime[0].format("yyyy/MM/dd hh:mm"),this.searchForm.cetime=this.searchForm.cstime_cetime[1]&&this.searchForm.cstime_cetime[1].format("yyyy/MM/dd hh:mm")),this.searchForm.bstime_betime.length&&(this.searchForm.cstime=this.searchForm.bstime_betime[0]&&this.searchForm.bstime_betime[0].format("yyyy/MM/dd hh:mm"),this.searchForm.cetime=this.searchForm.bstime_betime[1]&&this.searchForm.bstime_betime[1].format("yyyy/MM/dd hh:mm")),i.i(r.d)(this.searchForm).then(function(t){var i=JSON.parse(t.data);if(i.success){if(i.list.length>1e3)return e.$message({type:"info",message:"当前系统只支持导出1000条以内的报警数据"}),!1;e.exportTableData=i.list,e.$nextTick(function(){e.$refs.exportToExcel.createExcel(document.querySelector("#export-table"))})}else e.$message({type:"info",message:"该时间段内暂无数据可供导出！"})}).catch(function(t){e.$message.error("服务器错误")}).then(function(){e.exportLoading=!1})},handleSizeChange:function(e){this.searchForm.num=e,this.fetchAlarmData(this.searchForm)},handleCurrentChange:function(e){this.searchForm.page=e,this.fetchAlarmData(this.searchForm)},openDisposeDialog:function(e,t,a){var r=this;this.disposeDialog=!0,this.disposeReport.id=e,this.fetchDisposeReport(e,a),i.i(l.a)({PointTypeID:t,Industry:this.industry}).then(function(e){200===e.data.Code?r.reasonOptions=e.data.Data:r.reasonOptions=[]}).catch(function(e){r.reasonOptions=[]})},dispose:function(){var e=this,t={};t.id=this.disposeReport.id;var a=this.disposeReport.COMMENT;1===this.industry&&"其它"!==this.disposeReport.reason&&(a=this.disposeReport.reason),t.COMMENT=a,t.FLAG_COMMENT=JSON.parse(sessionStorage.getItem("userInfo")).uid,i.i(r.e)(t).then(function(t){"00"===JSON.parse(t.data).flag?(e.disposeDialog=!1,e.fetchAlarmData(e.searchForm)):e.$message.error("服务器错误，提交失败")}).catch(function(t){e.$message.error("服务器错误，提交失败")})},openHistoryDialog:function(e){this.searchPoint=[parseInt(e)],this.$refs.historyDialog.toggleDialog()},videoDialogClose:function(){this.currentVideoUrl=""},openVideoDialog:function(e){var t=this;this.currentVideoUrl=e,this.videoDialog=!0,this.$nextTick(function(){var e={container:"#video",variable:"player",flashplayer:!1,autoplay:!0,video:t.currentVideoUrl};new ckplayer(e)})},fetchAlarmData:function(){var e=this;this.alarmTableLoading=!0,i.i(r.d)(this.searchForm).then(function(t){var i=JSON.parse(t.data);i.success?(e.alarmData=i.list,e.total=i.totalcount):(e.alarmData=[],e.total=0)}).catch(function(t){e.$message.error("服务器错误")}).then(function(){e.alarmTableLoading=!1})},fetchDisposeReport:function(e,t){var a=this;i.i(r.f)(e).then(function(e){var i=JSON.parse(e.data);i.success?(i.COMMENT=i.COMMENT.replace(/aabbc/g,"\n"),i.reason=i.COMMENT,i.editable=t,a.disposeReport=i):a.$message.error("服务器错误")}).catch(function(e){a.$message.error("服务器错误")})},fetchChildSysOptions:function(){var e=this;i.i(n.c)().then(function(t){for(var i=JSON.parse(t.data),a=[],r=0;r<i.length;r++)a.push({id:i[r].ID,name:i[r].TypeName});e.childSysOptions=a}).catch(function(e){})},fetchPointTypeList:function(e){var t=this;i.i(a.e)(e).then(function(e){var i=JSON.parse(e.data);t.pointTypeList=[{label:"状态量",options:i.State},{label:"模拟量",options:i.Analog}]})}}}},1179:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i(32),r=function(e){var t=e.PointTypeID,i=e.Industry;return a.a.get(BASE_URI+"/api/Alarm_Reason_Describe/GetAlarmByAlarmID",{params:{PointTypeID:t,Industry:i}})}},1249:function(e,t,i){t=e.exports=i(539)(),t.push([e.i,".clearAlarm{border-radius:4px;overflow:hidden}.clearAlarm-content{padding:24px 32px}.alarmtable-icon{font-size:18px;margin-right:10px;vertical-align:middle}.alarmtable-icon:hover{color:#20a0ff;cursor:pointer}.clearAlarm-note{margin-bottom:20px;background-color:#d9edf7;border-color:#bce8f1;color:#3a87ad;padding:5px 15px;border-radius:4px;position:relative}.clearAlarm-note .note-close{position:absolute;top:11px;right:10px;color:#fff;font-size:15px;cursor:pointer}.clearAlarm-note .note-close:hover{color:#3a87ad}.clearAlarm-note .note-wrap{padding-top:4px}.clearAlarm-note .note-item{display:inline-block;margin-right:20px}.clearAlarm-note svg{margin-right:10px;color:#3a87ad;width:18px;height:18px}.clearAlarm .el-pagination{text-align:center;padding:20px 0 30px}.dispose-content>div{padding:8px}.dispose-content>div:last-child{border-top:1px solid #ccc;margin-top:15px;padding-top:15px}.dispose-content .dispose-label{font-size:16px;font-weight:700;width:100px;display:inline-block}.dispose-content .dispose-value{font-size:16px}.dispose-content .el-textarea{width:calc(100% - 120px)}.clearAlarm .history-wrap{display:-ms-flexbox;display:flex}.clearAlarm .history-chart{-ms-flex:1;flex:1}.clearAlarm .history-form{-ms-flex:0 0 300px;flex:0 0 300px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.badge-green{background:#a8bc7b}.badge-orange{background:#f0ad4e}.badge-blue{background:#70afc4}.badge-red{background:#d9534f}.clearAlarm-badge{display:inline-block;min-width:10px;padding:3px 7px;font-size:14px;font-weight:700;color:#fff;line-height:1;vertical-align:baseline;white-space:nowrap;text-align:center;border-radius:10px}.alarmpage-type-select{display:none}.alarmpage-type-popover .typeTree{height:300px;overflow:auto;border:none}.video-dialog{width:900px;border-radius:4px;overflow:hidden}.video-dialog .el-dialog__body,.video-dialog .el-dialog__header{padding:0}.circlepoint{display:inline-block;width:.6em;height:.6em;margin-right:5px;border-radius:50%}.el-table .info-row{background:#f4f4f5}.el-table .primary-row{background:#ecf6ff}.el-table .warning-row{background:#fdf6ec}.el-table .danger-row{background:#fef0f0}",""])},1379:function(e,t,i){var a=i(1249);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(540)("2b065c62",a,!0)},1533:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clearAlarm bg-fff"},[i("div",{staticClass:"clearAlarm-content"},[e.noteClose?i("div",{staticClass:"clearAlarm-note"},[i("div",{staticClass:"note-wrap"},[i("c-svg",{attrs:{name:"security_alarm"}}),e._v(" "),i("span",{staticStyle:{"font-size":"15px","margin-right":"50px"}},[e._v('消除时长：从"触发时间"到 "消除时间 "')]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3)],1),e._v(" "),i("i",{staticClass:"el-icon-close note-close",on:{click:function(t){e.noteClose=!1}}})]):e._e(),e._v(" "),i("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"70px"}},[i("el-row",{attrs:{gutter:48}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"报警等级"}},[i("el-select",{staticStyle:{display:"block"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.searchForm.level,callback:function(t){e.$set(e.searchForm,"level",t)},expression:"searchForm.level"}},[i("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),i("el-option",{attrs:{label:"紧急",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"重要",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"一般",value:"3"}}),e._v(" "),i("el-option",{attrs:{label:"记录",value:"4"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"子系统"}},[i("el-select",{staticStyle:{display:"block"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.searchForm.child,callback:function(t){e.$set(e.searchForm,"child",t)},expression:"searchForm.child"}},e._l(e.childSysOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.formVisible,expression:"formVisible"}],attrs:{span:8}},[i("el-form-item",{attrs:{label:"触发时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,size:"small",type:"datetimerange",placeholder:"选择起始时间"},model:{value:e.searchForm.cstime_cetime,callback:function(t){e.$set(e.searchForm,"cstime_cetime",t)},expression:"searchForm.cstime_cetime"}})],1)],1),e._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.formVisible,expression:"formVisible"}],attrs:{span:8}},[i("el-form-item",{attrs:{label:"响应时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,size:"small",type:"datetimerange",placeholder:"选择起始时间"},model:{value:e.searchForm.bstime_betime,callback:function(t){e.$set(e.searchForm,"bstime_betime",t)},expression:"searchForm.bstime_betime"}})],1)],1),e._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.formVisible,expression:"formVisible"}],attrs:{span:8}},[i("el-form-item",{attrs:{label:"报警类型"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择点位类型",size:"small"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.pointTypeList,function(t){return i("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(a){return i("el-option",{key:a.ID,attrs:{label:a.TypeName,value:a.ID}},[i("span",{staticStyle:{float:"left","margin-right":"25px"}},[e._v(e._s(a.TypeName))]),e._v(" "),"状态量"===t.label?i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(a.Value))]):e._e()])}),1)}),1)],1)],1),e._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.formVisible,expression:"formVisible"}],attrs:{span:8}},[i("el-form-item",{attrs:{label:"报警内容"}},[i("el-input",{attrs:{size:"small"},model:{value:e.searchForm.acontent,callback:function(t){e.$set(e.searchForm,"acontent","string"==typeof t?t.trim():t)},expression:"searchForm.acontent"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{staticClass:"alarm-handleBox"},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},nativeOn:{click:function(t){return e.searchAlarm(t)}}},[e._v("\n              搜索\n            ")]),e._v(" "),i("el-button",{attrs:{size:"small",icon:"el-icon-refresh",type:"danger"},nativeOn:{click:function(t){return e.resetForm(t)}}},[e._v("\n              重置\n            ")]),e._v(" "),i("el-button",{attrs:{loading:e.exportLoading,icon:"el-icon-document",size:"small"},nativeOn:{click:function(t){return e.clickExport(t)}}},[e._v("\n              导出\n            ")]),e._v(" "),i("el-button",{attrs:{icon:e.formVisible?"el-icon-arrow-up":"el-icon-arrow-down",size:"small",type:"text"},on:{click:e.handleFormVisible}},[e._v("\n              "+e._s(e.formVisible?"收起":"展开")+"\n            ")])],1)],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.alarmTableLoading,expression:"alarmTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.alarmData,"element-loading-text":"加载中..."}},[i("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"acttime",label:"触发时间","min-width":"120px"}}),e._v(" "),i("el-table-column",{attrs:{sortable:"",prop:"cletime",label:"清除时间","min-width":"120px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"area",label:"项目","min-width":"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"child",label:"子系统"}}),e._v(" "),i("el-table-column",{attrs:{prop:"acontent",label:"报警内容","min-width":"300px"}}),e._v(" "),i("el-table-column",{attrs:{prop:"tname",label:"报警类型","min-width":"90"}}),e._v(" "),i("el-table-column",{attrs:{prop:"levelname",label:"报警级别","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{size:"small",type:"一般"===t.row.levelname?"primary":"记录"===t.row.levelname?"info":"重要"===t.row.levelname?"wraning":"danger"}},[e._v("\n            "+e._s(t.row.levelname)+"\n          ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"time",label:"消除时长",width:"190px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.timeOld<=1.5?i("span",{staticClass:"clearAlarm-badge badge-green"},[e._v("A")]):e._e(),e._v(" "),t.row.timeOld>1.5&&t.row.timeOld<=3?i("span",{staticClass:"clearAlarm-badge badge-blue"},[e._v("B")]):e._e(),e._v(" "),t.row.timeOld>3&&t.row.timeOld<=12?i("span",{staticClass:"clearAlarm-badge badge-orange"},[e._v("C")]):e._e(),e._v(" "),t.row.timeOld>12?i("span",{staticClass:"clearAlarm-badge badge-red"},[e._v("D")]):e._e(),e._v(" "),i("span",[e._v(e._s(t.row.time))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"uname",label:"处理人","min-width":"80"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.camera?i("c-svg",{attrs:{name:"monitor","class-name":"alarmtable-icon"},nativeOn:{click:function(i){return e.openVideoDialog(t.row.camera)}}}):e._e(),e._v(" "),i("c-svg",{attrs:{name:"chart","class-name":"alarmtable-icon"},nativeOn:{click:function(i){return e.openHistoryDialog(t.row.point)}}}),e._v(" "),i("el-button",{attrs:{type:"text"},nativeOn:{click:function(i){e.openDisposeDialog(t.row.id,t.row.type,!(t.row.flagc>0))}}},[e._v("\n            "+e._s(t.row.flagc>0?"查看":"处理")+"\n          ")])]}}])})],1),e._v(" "),i("table",{staticStyle:{display:"none"},attrs:{id:"export-table"}},[e._m(4),e._v(" "),e._l(e.exportTableData,function(t,a){return i("tr",{key:a},[i("td",[e._v(e._s(a+1))]),e._v(" "),i("td",[e._v(e._s(t.acttime+"."))]),e._v(" "),i("td",[e._v(e._s(t.cletime+"."))]),e._v(" "),i("td",[e._v(e._s(t.area))]),e._v(" "),i("td",[e._v(e._s(t.child))]),e._v(" "),i("td",[e._v(e._s(t.acontent))]),e._v(" "),i("td",[e._v(e._s(t.tname))]),e._v(" "),i("td",[e._v(e._s(t.levelname))]),e._v(" "),i("td",[e._v(e._s(t.time))]),e._v(" "),i("td",[e._v(e._s(t.uname))])])})],2),e._v(" "),i("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{attrs:{title:"报警处理报告",visible:e.disposeDialog,width:"40%"},on:{"update:visible":function(t){e.disposeDialog=t},close:function(){return e.reasonOptions=[]}}},[i("div",{staticClass:"dispose-content"},[i("div",[i("span",{staticClass:"dispose-label"},[e._v("报警点：")]),e._v(" "),i("span",{staticClass:"dispose-value"},[e._v(e._s(e.disposeReport.name))])]),e._v(" "),i("div",[i("span",{staticClass:"dispose-label"},[e._v("触发时间：")]),e._v(" "),i("span",{staticClass:"dispose-value"},[e._v(e._s(e.disposeReport.acttime))])]),e._v(" "),i("div",[i("span",{staticClass:"dispose-label"},[e._v("确认人：")]),e._v(" "),i("span",{staticClass:"dispose-value"},[e._v(e._s(e.disposeReport.confirmName))])]),e._v(" "),i("div",[i("span",{staticClass:"dispose-label"},[e._v("确认时间：")]),e._v(" "),i("span",{staticClass:"dispose-value"},[e._v(e._s(e.disposeReport.acktime))])]),e._v(" "),i("div",[i("span",{staticClass:"dispose-label"},[e._v("清除时间：")]),e._v(" "),i("span",{staticClass:"dispose-value"},[e._v(e._s(e.disposeReport.cletime))])]),e._v(" "),i("div",[i("span",{staticClass:"dispose-label"},[e._v("处理时间：")]),e._v(" "),i("span",{staticClass:"dispose-value"},[e._v(e._s(e.disposeReport.commtime))])]),e._v(" "),i("div",[i("span",{staticClass:"dispose-label"},[e._v("处理人：")]),e._v(" "),i("span",{staticClass:"dispose-value"},[e._v(e._s(e.disposeReport.uname))])]),e._v(" "),1===e.industry?i("div",[i("span",{staticClass:"dispose-label"},[e._v("报警原因：")]),e._v(" "),i("el-select",{staticStyle:{width:"300px"},attrs:{size:"medium",placeholder:"请选择",clearable:""},model:{value:e.disposeReport.reason,callback:function(t){e.$set(e.disposeReport,"reason",t)},expression:"disposeReport.reason"}},e._l(e.reasonOptions,function(e){return i("el-option",{key:e.Alarm_ReasonID,attrs:{label:e.Reason,value:e.Reason}})}),1)],1):e._e(),e._v(" "),i("div",[i("span",{staticClass:"dispose-label",staticStyle:{"vertical-align":"top"}},[e._v("处理备注：")]),e._v(" "),i("span",{staticClass:"dispose-value"},[i("el-input",{attrs:{disabled:1===e.industry&&"其他"!==e.disposeReport.reason&&!!e.reasonOptions.length,type:"textarea",rows:4},model:{value:e.disposeReport.COMMENT,callback:function(t){e.$set(e.disposeReport,"COMMENT","string"==typeof t?t.trim():t)},expression:"disposeReport.COMMENT"}})],1)])]),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.disposeDialog=!1}}},[e._v("取 消")]),e._v(" "),e.isShow?i("el-button",{attrs:{disabled:!e.disposeReport.editable,type:"primary"},on:{click:e.dispose}},[e._v("确 定")]):e._e()],1)])],1),e._v(" "),i("HistoryDialog",{ref:"historyDialog",attrs:{"point-ids":e.searchPoint}}),e._v(" "),i("el-dialog",{attrs:{visible:e.videoDialog,"show-close":!1,"custom-class":"video-dialog"},on:{"update:visible":function(t){e.videoDialog=t},close:e.videoDialogClose}},[i("div",{staticStyle:{width:"900px",height:"600px"},attrs:{id:"video"}})]),e._v(" "),i("export-to-excel",{ref:"exportToExcel"})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"note-item"},[i("span",{staticClass:"clearAlarm-badge badge-green"},[e._v("A")]),e._v(" < 1.5小时\n        ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"note-item"},[i("span",{staticClass:"clearAlarm-badge badge-blue"},[e._v("B")]),e._v(" < 3.0小时\n        ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"note-item"},[i("span",{staticClass:"clearAlarm-badge badge-orange"},[e._v("C")]),e._v(" < 12.0小时\n        ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"note-item"},[i("span",{staticClass:"clearAlarm-badge badge-red"},[e._v("D")]),e._v(" > 12.0小时\n        ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",[i("th",[e._v("#")]),e._v(" "),i("th",[e._v("触发时间")]),e._v(" "),i("th",[e._v("清除时间")]),e._v(" "),i("th",[e._v("项目")]),e._v(" "),i("th",[e._v("子系统")]),e._v(" "),i("th",[e._v("报警内容")]),e._v(" "),i("th",[e._v("报警类型")]),e._v(" "),i("th",[e._v("报警级别")]),e._v(" "),i("th",[e._v("消除时长")]),e._v(" "),i("td",[e._v("处理人")])])}]}},541:function(e,t,i){i(708);var a=i(38)(i(706),i(709),null,null);e.exports=a.exports},574:function(e,t,i){i(1379);var a=i(38)(i(1075),i(1533),null,null);e.exports=a.exports},684:function(e,t,i){var a=i(133)("meta"),r=i(58),n=i(69),o=i(59).f,s=0,l=Object.isExtensible||function(){return!0},c=!i(68)(function(){return l(Object.preventExtensions({}))}),p=function(e){o(e,a,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,a)){if(!l(e))return"F";if(!t)return"E";p(e)}return e[a].i},m=function(e,t){if(!n(e,a)){if(!l(e))return!0;if(!t)return!1;p(e)}return e[a].w},u=function(e){return c&&h.NEED&&l(e)&&!n(e,a)&&p(e),e},h=e.exports={KEY:a,NEED:!1,fastKey:d,getWeak:m,onFreeze:u}},685:function(e,t,i){var a=i(58);e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},686:function(e,t,i){var a=i(70);e.exports=Array.isArray||function(e){return"Array"==a(e)}},687:function(e,t,i){e.exports={default:i(688),__esModule:!0}},688:function(e,t,i){i(215),i(134),i(213),i(698),i(701),i(700),i(699),e.exports=i(14).Set},689:function(e,t,i){var a=i(210);e.exports=function(e,t){var i=[];return a(e,!1,i.push,i,t),i}},690:function(e,t,i){var a=i(60),r=i(136),n=i(72),o=i(90),s=i(692);e.exports=function(e,t){var i=1==e,l=2==e,c=3==e,p=4==e,d=6==e,m=5==e||d,u=t||s;return function(t,s,h){for(var f,v,g=n(t),y=r(g),_=a(s,h,3),b=o(y.length),w=0,x=i?u(t,b):l?u(t,0):void 0;b>w;w++)if((m||w in y)&&(f=y[w],v=_(f,w,g),e))if(i)x[w]=v;else if(v)switch(e){case 3:return!0;case 5:return f;case 6:return w;case 2:x.push(f)}else if(p)return!1;return d?-1:c||p?p:x}}},691:function(e,t,i){var a=i(58),r=i(686),n=i(21)("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),a(t)&&null===(t=t[n])&&(t=void 0)),void 0===t?Array:t}},692:function(e,t,i){var a=i(691);e.exports=function(e,t){return new(a(e))(t)}},693:function(e,t,i){"use strict";var a=i(59).f,r=i(214),n=i(212),o=i(60),s=i(211),l=i(210),c=i(137),p=i(216),d=i(217),m=i(61),u=i(684).fastKey,h=i(685),f=m?"_s":"size",v=function(e,t){var i,a=u(t);if("F"!==a)return e._i[a];for(i=e._f;i;i=i.n)if(i.k==t)return i};e.exports={getConstructor:function(e,t,i,c){var p=e(function(e,a){s(e,p,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[f]=0,void 0!=a&&l(a,i,e[c],e)});return n(p.prototype,{clear:function(){for(var e=h(this,t),i=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete i[a.i];e._f=e._l=void 0,e[f]=0},delete:function(e){var i=h(this,t),a=v(i,e);if(a){var r=a.n,n=a.p;delete i._i[a.i],a.r=!0,n&&(n.n=r),r&&(r.p=n),i._f==a&&(i._f=r),i._l==a&&(i._l=n),i[f]--}return!!a},forEach:function(e){h(this,t);for(var i,a=o(e,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(a(i.v,i.k,this);i&&i.r;)i=i.p},has:function(e){return!!v(h(this,t),e)}}),m&&a(p.prototype,"size",{get:function(){return h(this,t)[f]}}),p},def:function(e,t,i){var a,r,n=v(e,t);return n?n.v=i:(e._l=n={i:r=u(t,!0),k:t,v:i,p:a=e._l,n:void 0,r:!1},e._f||(e._f=n),a&&(a.n=n),e[f]++,"F"!==r&&(e._i[r]=n)),e},getEntry:v,setStrong:function(e,t,i){c(e,t,function(e,i){this._t=h(e,t),this._k=i,this._l=void 0},function(){for(var e=this,t=e._k,i=e._l;i&&i.r;)i=i.p;return e._t&&(e._l=i=i?i.n:e._t._f)?"keys"==t?p(0,i.k):"values"==t?p(0,i.v):p(0,[i.k,i.v]):(e._t=void 0,p(1))},i?"entries":"values",!i,!0),d(t)}}},694:function(e,t,i){var a=i(135),r=i(689);e.exports=function(e){return function(){if(a(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},695:function(e,t,i){"use strict";var a=i(15),r=i(39),n=i(684),o=i(68),s=i(52),l=i(212),c=i(210),p=i(211),d=i(58),m=i(89),u=i(59).f,h=i(690)(0),f=i(61);e.exports=function(e,t,i,v,g,y){var _=a[e],b=_,w=g?"set":"add",x=b&&b.prototype,S={};return f&&"function"==typeof b&&(y||x.forEach&&!o(function(){(new b).entries().next()}))?(b=t(function(t,i){p(t,b,e,"_c"),t._c=new _,void 0!=i&&c(i,g,t[w],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!y||"clear"!=e)&&s(b.prototype,e,function(i,a){if(p(this,b,e),!t&&y&&!d(i))return"get"==e&&void 0;var r=this._c[e](0===i?0:i,a);return t?this:r})}),y||u(b.prototype,"size",{get:function(){return this._c.size}})):(b=v.getConstructor(t,e,g,w),l(b.prototype,i),n.NEED=!0),m(b,e),S[e]=b,r(r.G+r.W+r.F,S),y||v.setStrong(b,e,g),b}},696:function(e,t,i){"use strict";var a=i(39),r=i(71),n=i(60),o=i(210);e.exports=function(e){a(a.S,e,{from:function(e){var t,i,a,s,l=arguments[1];return r(this),t=void 0!==l,t&&r(l),void 0==e?new this:(i=[],t?(a=0,s=n(l,arguments[2],2),o(e,!1,function(e){i.push(s(e,a++))})):o(e,!1,i.push,i),new this(i))}})}},697:function(e,t,i){"use strict";var a=i(39);e.exports=function(e){a(a.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},698:function(e,t,i){"use strict";var a=i(693),r=i(685);e.exports=i(695)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return a.def(r(this,"Set"),e=0===e?0:e,e)}},a)},699:function(e,t,i){i(696)("Set")},700:function(e,t,i){i(697)("Set")},701:function(e,t,i){var a=i(39);a(a.P+a.R,"Set",{toJSON:i(694)("Set")})},702:function(e,t,i){var a,r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,i=function(){return e.URL||e.webkitURL||e},a=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in a,n=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c=function(e){var t=function(){"string"==typeof e?i().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},p=function(e,t,i){t=[].concat(t);for(var a=t.length;a--;){var r=e["on"+t[a]];if("function"==typeof r)try{r.call(e,i||e)}catch(e){l(e)}}},d=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},m=function(t,l,m){m||(t=d(t));var u,h=this,f=t.type,v="application/octet-stream"===f,g=function(){p(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,r)return u=i().createObjectURL(t),void setTimeout(function(){a.href=u,a.download=l,n(a),g(),c(u),h.readyState=h.DONE});!function(){if((s||v&&o)&&e.FileReader){var a=new FileReader;return a.onloadend=function(){var t=s?a.result:a.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,h.readyState=h.DONE,g()},a.readAsDataURL(t),void(h.readyState=h.INIT)}if(u||(u=i().createObjectURL(t)),v)e.location.href=u;else{e.open(u,"_blank")||(e.location.href=u)}h.readyState=h.DONE,g(),c(u)}()},u=m.prototype,h=function(e,t,i){return new m(e,t||e.name||"download",i)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,i){return t=t||e.name||"download",i||(e=d(e)),navigator.msSaveOrOpenBlob(e,t)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,h)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=r:null!==i(703)&&null!==i(704)&&void 0!==(a=function(){return r}.call(t,i,t,e))&&(e.exports=a)},703:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},704:function(e,t){(function(t){e.exports=t}).call(t,{})},705:function(e,t,i){"use strict";i.d(t,"b",function(){return o}),i.d(t,"a",function(){return s});var a=i(32),r=i(219),n=i.n(r),o=function(e){var t=e.companyId,i=e.waybillNumOrTagId,r=e.pageIndex,n=e.pageSize;return a.a.get(BASE_URI+"/api/Device/GetWaybillPage",{params:{companyId:t,waybillNumOrTagId:i,pageIndex:r,pageSize:n}})},s=function(e){var t=e.start,i=e.end,r=e.pointIdList,o=e.tmes;return a.a.get(BASE_URI+"/api/Device/GetPointData",{params:{start:t,end:i,pointIdList:r,tmes:o},paramsSerializer:function(e){return n.a.stringify(e,{indices:!1})}})}},706:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(218),r=i.n(a),n=i(220),o=i.n(n),s=i(687),l=i.n(s),c=i(132),p=i.n(c),d=i(705),m=i(702),u=(i.n(m),i(138));t.default={props:{type:{type:String,default:function(){""}},pointIds:{type:Array,default:function(){return[]}},interval:{type:Number,default:function(){return 5}},startTime:{type:Date,default:function(){return new Date((new Date).getTime()-864e5)}},endTime:{type:Date,default:function(){return new Date}}},data:function(){return{dialogVisible:!1,form:{interval:this.interval,startTime:this.startTime,endTime:this.endTime},formRules:{startTime:[{type:"date",required:!0,message:"选择开始时间",trigger:"change"}],endTime:[{type:"date",required:!0,message:"选择结束时间",trigger:"change"}],interval:[{required:!0,message:"输入时间间隔(整数)",type:"number",trigger:"blur"}]},pointType:0,showStatistical:!1,showThreshold:!1,pdfLoading:!1,chartLoading:!1}},computed:{industry:function(){return this.$store.state.app.company.industry}},watch:{pointIds:function(e){e&&e.length&&this.fetchChartSeries()},startTime:function(e){this.form.startTime=e},endTime:function(e){this.form.endTime=e},interval:function(e){this.form.interval=e},dialogVisible:function(e){var t=this;e&&this.$nextTick(function(){t.myChart=echarts.init(document.getElementById("echart-wrap"))})}},mounted:function(){this.chartSeries=null},beforeDestroy:function(){},methods:{toggleDialog:function(){this.dialogVisible=!this.dialogVisible},thresholdChang:function(e){this.drawChart()},statisticalChange:function(e){this.drawChart()},search:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.fetchChartSeries()})},downPDF:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.pdfLoading=!0,t.fetchChartSeries())})},downImg:function(){i.i(m.saveAs)(i.i(u.b)(this.myChart.getDataURL()),"chart.jpg")},downloadExcel:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var i=t._dateFormat(t.form.startTime,"YYYY-MM-DD HH:mm"),a=t._dateFormat(t.form.endTime,"YYYY-MM-DD HH:mm");window.location.href=_host+"/api/Report/downHistoryData?id="+t.pointIds.join(",")+"&start="+i+"&end="+a+"&tmes="+t.form.interval}})},fetchChartSeries:function(){var e=this;this.chartLoading=!0,i.i(d.a)({start:this._dateFormat(this.form.startTime,"YYYY-MM-DD HH:mm"),end:this._dateFormat(this.form.endTime,"YYYY-MM-DD HH:mm"),pointIdList:this.pointIds,tmes:this.form.interval}).then(function(t){if(200===t.data.Code){e.dataSource=t.data.Data;var i=t.data.Data.PointList;if(!i)return e.$message("无点位数据"),!1;var a=i.map(function(e){return e.PointType});if(e.legends=i.map(function(e){return e.PointName}),1!==[].concat(p()(new l.a(a))).length)return e.$message({message:"选中的多个点位不是同一类型，无法合理显示",type:"info",duration:5e3}),!1;e.pointType=a[0],0===e.pointType&&(e.showStatistical=!0);var r=[];i.forEach(function(e){for(var t=0,i=e.DataList.length;t<i;t++)e.DataList[t]=[e.DataList[t].Time,e.DataList[t].Value];e.unitMap={},e.UnitMap&&e.UnitMap.forEach(function(t){e.unitMap[t.key]=t.value}),r.push({animation:!1,name:e.PointName,type:"line",unit:e.Unit,step:1===e.PointType?"start":"",smooth:!1,yAxisData:1===e.PointType?o()(e.unitMap).map(function(e){return parseInt(e)}):"",pointType:e.PointType,unitMap:e.unitMap,data:e.DataList,markLine:{data:[]},statisticalmarkLineData:[{type:"average",name:"",lineStyle:{type:"dashed"},label:{normal:{formatter:function(e){return e.value.toFixed(1)}}}}],ThresholdmarkLineData:function(){var t=[];return e.SuperLowerLimit&&t.push({yAxis:e.SuperLowerLimit,lineStyle:{color:"#B03A5B",type:"dotted"},label:{show:!0,position:"middle",formatter:function(t){return"下下限("+e.PointName+"): "+e.SuperLowerLimit}}}),e.SuperUpperLimit&&t.push({yAxis:e.SuperUpperLimit,lineStyle:{color:"#B03A5B",type:"dotted"},label:{show:!0,position:"middle",formatter:function(t){return"上上限("+e.PointName+"): "+e.SuperUpperLimit}}}),e.UpperLimit&&t.push({yAxis:e.UpperLimit,lineStyle:{color:"#B03A5B",type:"dotted"},label:{show:!0,position:"middle",formatter:function(t){return"上限("+e.PointName+"): "+e.UpperLimit}}}),e.LowerLimit&&t.push({yAxis:e.LowerLimit,lineStyle:{color:"#B03A5B",type:"dotted"},label:{show:!0,position:"middle",formatter:function(t){return"下限("+e.PointName+"): "+e.LowerLimit}}}),t}(),markPointCopy:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},superLowerLimit:e.SuperLowerLimit,superUpperLimit:e.SuperUpperLimit,upperLimit:e.UpperLimit,lowerLimit:e.LowerLimit})}),e.chartSeries=r,e.drawChart()}else e.$message.error("历史数据查询失败")}).catch(function(t){e.$message.error("历史数据查询失败")}).finally(function(){e.chartLoading=!1})},drawChart:function(){var e=this;this.myChart&&this.myChart.clear(),this.chartSeries.forEach(function(t){if(t.markLine.data=[],e.showStatistical){var i;t.markPoint=t.markPointCopy,(i=t.markLine.data).push.apply(i,p()(t.statisticalmarkLineData))}else delete t.markPoint;if(e.showThreshold){var a;t.ThresholdmarkLineData.length||(1===e.chartSeries.length?e.$message("选中点位没有设置阈值"):e.$message("存在点位没有设置阈值")),(a=t.markLine.data).push.apply(a,p()(t.ThresholdmarkLineData))}});var t={color:["#2297E8","#48CE38","#F8D156","#FD9827","#9764DC","#1FCA6A"],grid:{left:60,right:100,bottom:80,top:40},dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"empty",handleIcon:"M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"90%"},{type:"inside",xAxisIndex:0,filterMode:"empty"}],legend:{show:!0},tooltip:{trigger:"axis",formatter:function(t){for(var i=e._dateFormat(t[0].axisValue,"YYYY-MM-DD HH:mm")+"<br/>",a=0;a<t.length;a++)i+=function(e){return'<i class="circlepoint" style="background: '+e+'"></i>'}(t[a].color)+" "+t[a].seriesName+"："+(null===t[a].value[1]?"无数据":t[a].value[1])+" <br/>";return i}},xAxis:{type:"time",axisLabel:{formatter:function(t,i){return e._dateFormat(t,"YYYY-MM-DD HH:mm")}},splitLine:{show:!1}},series:this.chartSeries},a={};if(a=this.chartSeries.length&&this.chartSeries[0].step?{yAxis:{type:"value",name:this.chartSeries[0].data.length?"单位:"+this.chartSeries[0].unit:"",boundaryGap:["20%","20%"],minInterval:1,axisLabel:{show:!0,formatter:function(t){if(e.chartSeries[0].unitMap[t])return e.chartSeries[0].unitMap[t]}}}}:{yAxis:{type:"value",name:this.chartSeries[0].data.length?"单位:"+this.chartSeries[0].unit:"",scale:!1,boundaryGap:["20%","20%"]}},1!==this.chartSeries[0].pointType&&t.dataZoom.push({type:"slider",yAxisIndex:0,filterMode:"empty",handleIcon:"M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"90%"}),this.myChart.setOption(r()(t,a)),!0===this.pdfLoading){this.dataSource.startTime=this._dateFormat(this.form.startTime,"YYYY-MM-DD HH:mm"),this.dataSource.endTime=this._dateFormat(this.form.endTime,"YYYY-MM-DD HH:mm");try{var n=i.i(u.c)(this.myChart.getDataURL(),this.dataSource),o=new URLSearchParams;o.append("html",n),fetch("https://sinocold.net:8443/api/Report/DownloadDataPDF",{method:"POST",body:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()}).then(function(e){window.open("https://sinocold.net:8443"+e)}).catch(function(t){e.$message.error("导出失败")}).finally(function(){e.pdfLoading=!1})}catch(e){this.pdfLoading=!1,this.$message.error("导出失败")}}},historyDialogClose:function(){this.myChart&&this.myChart.clear(),this.chartSeries=[],this.showStatistical=!1,this.showThreshold=!1,this.form.interval=this.interval,this.form.startTime=new Date((new Date).getTime()-864e5),this.form.endTime=new Date}}}},707:function(e,t,i){t=e.exports=i(539)(),t.push([e.i,".history-dialog-wrap .circlepoint{display:inline-block;width:.6em;height:.6em;margin-right:5px;border-radius:50%}",""])},708:function(e,t,i){var a=i(707);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(540)("060cc275",a,!0)},709:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"历史数据",visible:e.dialogVisible,width:"1300px",top:"10vh"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.historyDialogClose}},[i("div",{staticClass:"history-dialog-wrap"},[i("div",[i("el-form",{ref:"form",staticStyle:{"margin-left":"45px"},attrs:{model:e.form,rules:e.formRules,inline:"",size:"medium","hide-required-asterisk":!0}},[i("el-form-item",{attrs:{label:"时间范围：",prop:"startTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm",editable:!1,type:"datetime",placeholder:"选择日期"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),e._v(" "),i("span",{staticStyle:{"margin-right":"10px",position:"relative",top:"9px"}},[e._v("-")]),e._v(" "),i("el-form-item",{attrs:{prop:"endTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm",editable:!1,type:"datetime",placeholder:"选择日期"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"间隔：",prop:"interval"}},[i("el-input",{attrs:{placeholder:"分钟"},model:{value:e.form.interval,callback:function(t){e.$set(e.form,"interval",e._n("string"==typeof t?t.trim():t))},expression:"form.interval"}})],1),e._v(" "),i("span",{staticStyle:{position:"relative",top:"9px"}},[e._v("分钟")]),e._v(" "),i("el-form-item",{staticStyle:{"margin-left":"20px"}},[i("el-button",{attrs:{loading:e.chartLoading,size:"medium",type:"primary"},nativeOn:{click:function(t){return e.search("form")}}},[e._v("\n            查看数据\n          ")])],1),e._v(" "),i("div",[i("el-form-item",{attrs:{label:"数据操作："}},[1!==e.industry?i("el-button",{attrs:{size:"medium"},nativeOn:{click:function(t){return e.downloadExcel("form")}}},[e._v("\n              下载excel\n            ")]):e._e(),e._v(" "),i("el-button",{attrs:{loading:e.pdfLoading,size:"medium"},nativeOn:{click:function(t){return e.downPDF("form")}}},[e._v("\n              下载pdf\n            ")]),e._v(" "),i("el-button",{attrs:{size:"medium"},nativeOn:{click:function(t){return e.downImg(t)}}},[e._v("\n              下载图表\n            ")])],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-left":"15px"},attrs:{label:"显示统计"}},[i("el-switch",{staticStyle:{"margin-left":"10px",position:"relative",top:"-3px"},attrs:{disabled:1===e.pointType},on:{change:e.statisticalChange},model:{value:e.showStatistical,callback:function(t){e.showStatistical=t},expression:"showStatistical"}})],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-left":"15px"},attrs:{label:"显示阈值"}},[i("el-switch",{staticStyle:{"margin-left":"10px",position:"relative",top:"-3px"},attrs:{disabled:1===e.pointType},on:{change:e.thresholdChang},model:{value:e.showThreshold,callback:function(t){e.showThreshold=t},expression:"showThreshold"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"history-chart"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.chartLoading,expression:"chartLoading"}],staticStyle:{"min-width":"400px",height:"450px"},attrs:{id:"echart-wrap","element-loading-text":"加载中..."}})])])])},staticRenderFns:[]}},722:function(e,t,i){"use strict";i.d(t,"c",function(){return r}),i.d(t,"e",function(){return n}),i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s}),i.d(t,"d",function(){return l}),i.d(t,"g",function(){return c}),i.d(t,"h",function(){return p}),i.d(t,"i",function(){return d}),i.d(t,"j",function(){return m}),i.d(t,"f",function(){return u});var a=i(32),r=function(e){return a.a.post("/api/PointType/PointTypeInsert",e)},n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a.a.get("/api/PointType/PointTypeList",{params:{projectId:e,TypeName:t}})},o=function(e){return a.a.post("/api/PointType/PointTypeDelete",e)},s=function(e,t){return a.a.get("/api/PointType/PointTypeQuery",{params:{ID:e,projectId:t}})},l=function(e){return a.a.post("/api/PointType/PointTypeUpdate",e)},c=function(e){return a.a.post("/api/EditPoint/GetModePointType",e)},p=function(e){return a.a.post("/api/EditPoint/GetModePointUnit",e)},d=function(e){return a.a.post("/api/EditPoint/updateDmpSetS",e)},m=function(e){return a.a.post("/api/EditPoint/QueryModelSWList",e)},u=function(e){return a.a.post("/api/EditPoint/GetProjectdmpTable",e)}},807:function(e,t,i){"use strict";i.d(t,"d",function(){return r}),i.d(t,"b",function(){return n}),i.d(t,"g",function(){return o}),i.d(t,"f",function(){return s}),i.d(t,"e",function(){return l}),i.d(t,"c",function(){return c}),i.d(t,"a",function(){return p});var a=i(32),r=function(e){return a.a.post("/api/Alarm/getClearTable",e)},n=function(e){return a.a.post("/api/Alarm/getAckedTable",e)},o=function(e){return a.a.post("/api/Alarm/getActivTable",e)},s=function(e){return a.a.get("/api/Alarm/queryDetail",{params:{id:e}})},l=function(e){return a.a.post("/api/Alarm/upDetail",e)},c=function(e){return a.a.get("/api/Alarm/updateStatus",{params:{id:e}})},p=function(e,t,i,r){return a.a.get("/api/Report/dataInfo",{params:{id:e,start:t,end:i,tmes:r}})}}});
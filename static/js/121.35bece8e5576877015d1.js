webpackJsonp([121],{1094:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(711);e.default={data:function(){return{projectId:JSON.parse(sessionStorage.getItem("currentEditProject")).id,userList:[],transferProjectDialog:!1,delProjectDialog:!1,transferProjectForm:{password:"",userId:""},transferProjectFormRule:{password:[{required:!0,message:"请输入登录密码",trigger:"blur"}],userId:[{required:!0,message:"请选择要转让的成员",trigger:"change"}]},delProjectForm:{password:""},delProjectFormRule:{password:[{required:!0,message:"请输入登录密码",trigger:"blur"}]},userId:JSON.parse(sessionStorage.getItem("userInfo")).uid}},mounted:function(){this.fetchUserList()},methods:{delProject:function(t){var e=this;this.$refs[t].validate(function(s){if(!s)return!1;r.i(n.i)(e.projectId,e[t].password).then(function(t){var r=JSON.parse(t.data);"00"===r.flag?(e.$message({type:"success",message:r.msg}),e.$store.dispatch("fetchproject",""),setTimeout(function(){e.$router.push("/backgroundConfig/projectManage")},500)):e.$message({type:"error",message:r.msg})}).catch(function(t){})})},transferProject:function(t){var e=this;this.$refs[t].validate(function(s){if(!s)return!1;r.i(n.j)(e.projectId,e[t].userId,e[t].password).then(function(t){var r=JSON.parse(t.data);"00"===r.flag?(e.$message({type:"success",message:"项目转让成功"}),setTimeout(function(){e.$router.go(-1)},1e3)):e.$message.error(r.msg)}).catch(function(t){})})},fetchUserList:function(){var t=this;r.i(n.k)(this.projectId,"").then(function(e){var r=JSON.parse(e.data);r.success?t.userList=r.list:t.userList=[]}).catch(function(t){})}}}},1513:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"set-wrap bg-fff"},[r("div",{staticClass:"title-wrap"},[r("h3",[r("c-svg",{attrs:{name:"peizhi","class-name":"title-icon"}}),t._v(" "),r("span",{staticClass:"text"},[t._v("高级设置")])],1)]),t._v(" "),r("div",{staticClass:"set-content"},[r("div",{staticClass:"transfer-wrap"},[t._m(0),t._v(" "),r("div",{staticClass:"btn-wrap"},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.transferProjectDialog=!0}}},[t._v("\n          转 让 项 目\n        ")])],1)]),t._v(" "),r("div",{staticClass:"delete-wrap"},[t._m(1),t._v(" "),r("div",{staticClass:"btn-wrap"},[r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.delProjectDialog=!0}}},[t._v("\n          删 除 项 目\n        ")])],1)])]),t._v(" "),r("el-dialog",{attrs:{title:"转让项目",visible:t.transferProjectDialog,"custom-class":"transferProjectDialog"},on:{"update:visible":function(e){t.transferProjectDialog=e}}},[r("div",{staticClass:"attention-info"},[t._v("\n      这是一个危险操作，需要进行身份验证\n    ")]),t._v(" "),r("el-form",{ref:"transferProjectForm",attrs:{model:t.transferProjectForm,rules:t.transferProjectFormRule}},[r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入登录密码",type:"password"},model:{value:t.transferProjectForm.password,callback:function(e){t.$set(t.transferProjectForm,"password","string"==typeof e?e.trim():e)},expression:"transferProjectForm.password"}})],1),t._v(" "),r("el-form-item",{attrs:{prop:"userId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择要转让的成员"},model:{value:t.transferProjectForm.userId,callback:function(e){t.$set(t.transferProjectForm,"userId",e)},expression:"transferProjectForm.userId"}},t._l(t.userList,function(t,e){return r("el-option",{key:e,attrs:{label:t.nickname,value:t.user}})}),1)],1)],1),t._v(" "),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},nativeOn:{click:function(e){t.transferProjectDialog=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{size:"small",type:"danger"},nativeOn:{click:function(e){return t.transferProject("transferProjectForm")}}},[t._v("确 定")])],1)],1),t._v(" "),r("el-dialog",{attrs:{title:"删除项目",visible:t.delProjectDialog,"custom-class":"delProjectDialog"},on:{"update:visible":function(e){t.delProjectDialog=e}}},[r("div",{staticClass:"attention-info"},[t._v("\n      这是一个危险操作，需要进行身份验证\n    ")]),t._v(" "),r("el-form",{ref:"delProjectForm",attrs:{model:t.delProjectForm,rules:t.delProjectFormRule}},[r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入登录密码",type:"password"},model:{value:t.delProjectForm.password,callback:function(e){t.$set(t.delProjectForm,"password","string"==typeof e?e.trim():e)},expression:"delProjectForm.password"}})],1)],1),t._v(" "),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(e){t.delProjectDialog=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{size:"small",type:"danger"},nativeOn:{click:function(e){return t.delProject("delProjectForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"info-wrap"},[r("div",{staticClass:"title"},[t._v("\n          转让项目\n        ")]),t._v(" "),r("div",{staticClass:"info"},[t._v("\n          注意： 项目转让后，您将不再是项目“项目拥有者”，您将失去某些管理权限（如添加成员，删除项目）。该操作无法撤销，请谨慎！\n        ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"info-wrap"},[r("div",{staticClass:"title"},[t._v("\n          删除项目\n        ")]),t._v(" "),r("div",{staticClass:"info"},[t._v("\n          注意： 删除项目将会连同其关联的所有内容（包括监测、报警、维修等数据在内）一起删除，该操作无法恢复，请谨慎！\n        ")])])}]}},593:function(t,e,r){var n=r(38)(r(1094),r(1513),null,null);t.exports=n.exports},711:function(t,e,r){"use strict";r.d(e,"p",function(){return s}),r.d(e,"c",function(){return a}),r.d(e,"o",function(){return o}),r.d(e,"i",function(){return i}),r.d(e,"a",function(){return c}),r.d(e,"n",function(){return u}),r.d(e,"h",function(){return l}),r.d(e,"g",function(){return p}),r.d(e,"f",function(){return d}),r.d(e,"e",function(){return f}),r.d(e,"b",function(){return m}),r.d(e,"l",function(){return g}),r.d(e,"m",function(){return v}),r.d(e,"k",function(){return j}),r.d(e,"d",function(){return P}),r.d(e,"j",function(){return _});var n=r(32),s=function(t){return n.a.get("/api/project/loadSite",{params:{uid:t}})},a=function(t){return n.a.post("/api/project/addProject",t)},o=function(t){return n.a.post("/api/project/upProject",t)},i=function(t,e){return n.a.get("/api/project/delProject",{params:{pid:t,pwd:e}})},c=function(t,e){return n.a.get("/api/project/projectShow",{params:{page:t,num:e}})},u=function(t,e){return n.a.get("/api/project/queryProject",{params:{pid:t,uid:e}})},l=function(){return n.a.get("/api/project/getTagByUid")},p=function(t){return n.a.get("/api/project/getTag",{params:{pid:t}})},d=function(t,e){return n.a.get("/api/project/delete",{params:{pid:t,id:e}})},f=function(t,e){return n.a.get("/api/project/addTag",{params:{pid:t,tag:e}})},m=function(t){return n.a.get("/api/project/getDeviceTree",{params:{project:t}})},g=function(t,e){return n.a.get("/api/project/getDevice",{params:{project:t,user:e}})},v=function(t){return n.a.post("/api/project/updateDevOrPoint",t)},j=function(t,e){return n.a.get("/api/project/getUserbyPro",{params:{project:t,inp:e}})},P=function(t){return n.a.get("/api/project/Signout",{params:{project:t}})},_=function(t,e,r){return n.a.get("/api/project/assignMent",{params:{project:t,user:e,pwd:r}})}}});
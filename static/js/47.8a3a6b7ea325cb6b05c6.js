webpackJsonp([47,112],{542:function(t,e,a){a(756);var i=a(38)(a(741),a(759),"data-v-644a5a6f",null);t.exports=i.exports},544:function(t,e,a){a(824);var i=a(38)(a(805),a(830),"data-v-496c7af5",null);t.exports=i.exports},717:function(t,e,a){"use strict";a.d(e,"d",function(){return n}),a.d(e,"c",function(){return r}),a.d(e,"e",function(){return s}),a.d(e,"f",function(){return d}),a.d(e,"a",function(){return o}),a.d(e,"b",function(){return c});var i=a(32),n=function(t){return i.a.get("/api/StatisticalAnalysis/GetProjectAlarm",{params:{user:t}})},r=function(t,e,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectAlarmStatistics",{params:{type:t,user:e,startTime:a,endTime:n}})},s=function(t,e,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectSysAlarmNum",{params:{type:t,user:e,startTime:a,endTime:n}})},d=function(t,e,a){return i.a.get("/api/StatisticalAnalysis/GetProjectAlarmTime",{params:{user:t,startTime:e,endTime:a}})},o=function(t,e,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectAlarmRanking",{params:{type:t,user:e,startTime:a,endTime:n}})},c=function(t,e,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectAlarmSumRanking",{params:{type:t,user:e,startTime:a,endTime:n}})}},718:function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"d",function(){return r}),a.d(e,"e",function(){return s}),a.d(e,"f",function(){return d}),a.d(e,"g",function(){return o}),a.d(e,"a",function(){return c}),a.d(e,"b",function(){return u});var i=a(32),n=function(t,e,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectTimeRepair",{params:{type:t,user:e,startTime:a,endTime:n}})},r=function(){return i.a.get("/api/StatisticalAnalysis/GetProjectRepair")},s=function(t,e,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectSysRepair",{params:{type:t,user:e,startTime:a,endTime:n}})},d=function(t,e,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectSysFaultReason",{params:{user:t,startTime:e,endTime:a,SysID:n}})},o=function(t,e,a,n,r){return i.a.get("/api/StatisticalAnalysis/GetProjectSysTable",{params:{type:t,user:e,startTime:a,endTime:n,SysID:r}})},c=function(t,e,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectRepairRanking",{params:{type:t,user:e,startTime:a,endTime:n}})},u=function(t,e,a,n){return i.a.get("/api/StatisticalAnalysis/GetProjectRepairSumRanking",{params:{type:t,user:e,startTime:a,endTime:n}})}},719:function(t,e,a){"use strict";a.d(e,"e",function(){return n}),a.d(e,"d",function(){return r}),a.d(e,"a",function(){return s}),a.d(e,"b",function(){return d}),a.d(e,"c",function(){return o});var i=a(32),n=function(){return i.a.get("api//StatisticalAnalysis/GetProjectPassenger")},r=function(t,e,a,n){return i.a.get("api//StatisticalAnalysis/GetProjectTimePassenger",{params:{type:t,user:e,startTime:a,endTime:n}})},s=function(t,e,a,n){return i.a.get("api//StatisticalAnalysis/GetProjectWeekPassenger",{params:{type:t,user:e,startTime:a,endTime:n}})},d=function(t,e,a,n){return i.a.get("api//StatisticalAnalysis/GetProjectPassengerRanking",{params:{type:t,user:e,startTime:a,endTime:n}})},o=function(t,e,a,n){return i.a.get("api//StatisticalAnalysis/GetProjectPassengerSumRanking",{params:{type:t,user:e,startTime:a,endTime:n}})}},741:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{isShow:{type:Boolean,default:!0},fixedDate:{type:String,default:"日"},isRanking:{type:Boolean,default:!1}},data:function(){return{startTime:null,endTime:null,date:"日",day:"",month:"",week:new Date,year:"",currentTime:"",currentYear:"",currentmonthDays:null,pickerOptions:{firstDayOfWeek:1,disabledDate:function(t){return t.getTime()>Date.now()-864e4}},pickerOptionsWeek:{firstDayOfWeek:1,disabledDate:function(t){return t.getTime()>Date.now()-6048e5}},pickerOptionsCommon:{disabledDate:function(t){return t.getTime()>Date.now()}},pickerOptionsDay:{disabledDate:function(t){return t.getTime()>Date.now()-864e5}},pickerOptionsMonth:{disabledDate:function(t){return t.getTime()>Date.now()-2592e6}},pickerOptionsYear:{disabledDate:function(t){return t.getTime()>Date.now()-31536e6}},dateType:1}},mounted:function(){this.startTime=(new Date).format("yyyy-MM-dd"),this.endTime=(new Date).format("yyyy-MM-dd"),this.day=new Date,this.date=this.fixedDate,this.handleTrendRange()},methods:{handleTrendRange:function(){if("日"===this.date){var t=(new Date).format("yyyy-MM-dd");this.isRanking?(this.startTime=new Date((new Date).getTime()-864e5).format("yyyy-MM-dd"),this.endTime=new Date((new Date).getTime()-864e5).format("yyyy-MM-dd"),this.day=new Date((new Date).getTime()-864e5)):(this.startTime=t,this.endTime=t,this.day=new Date),this.dateType=1}else if("周"===this.date){var e=0===(new Date).getDay()?7:(new Date).getDay(),a=(new Date).getTime();if(this.isRanking){var i=new Date(a-24*(e-1+7)*60*60*1e3).format("yyyy-MM-dd");this.startTime=i,this.endTime=new Date(new Date(i).getTime()+5184e5).format("yyyy-MM-dd"),this.week=new Date((new Date).getTime()-6048e5)}else{var n=new Date(a-24*(e-1)*60*60*1e3).format("yyyy-MM-dd");this.startTime=n,this.endTime=new Date(new Date(n).getTime()+5184e5).format("yyyy-MM-dd"),this.week=new Date}this.dateType=2}else if("月"===this.date){if(this.currentTime=(new Date).format("yyyy-M"),this.isRanking){var r=new Date(this.currentTime.split("-")[0],Number(this.currentTime.split("-")[1])-1,0).getDate(),s=new Date((new Date).getTime()-24*r*3600*1e3).format("yyyy-MM");this.startTime=s+"-01",this.endTime=s+"-"+r,this.month=new Date((new Date).getTime()-24*r*3600*1e3)}else{this.currentmonthDays=new Date(this.currentTime.split("-")[0],this.currentTime.split("-")[1],0).getDate();var d=(new Date).format("yyyy-MM");this.startTime=d+"-01",this.endTime=(new Date).format("yyyy-MM-dd"),this.month=new Date}this.dateType=3}else{if(this.isRanking){var o=(new Date).format("yyyy");this.currentYear=o,this.startTime=Number(o)-1+"-01-01",this.endTime=Number(o)-1+"-12-31",this.year=new Date((new Date).getTime()-31536e6)}else{var c=(new Date).format("yyyy");this.currentYear=c,this.startTime=c+"-01-01",this.endTime=(new Date).format("yyyy-MM-dd"),this.year=new Date}this.dateType=4}this.$emit("handleChartData",this.startTime,this.endTime,this.dateType)},handleformatTime:function(t){if("日"===this.date)this.startTime=new Date(t).format("yyyy-MM-dd"),this.endTime=new Date(t).format("yyyy-MM-dd");else if("周"===this.date)this.startTime=new Date(new Date(t).getTime()-864e5).format("yyyy-MM-dd"),this.endTime=new Date(new Date(t).getTime()+432e6).format("yyyy-MM-dd");else if("月"===this.date){this.currentTime=t;var e=t.split("-")[0],a=t.split("-")[1],i=new Date(e,a,0);this.currentmonthDays=i.getDate(),this.startTime=t+"-01",this.endTime=new Date(new Date(this.startTime).getTime()+86400*this.currentmonthDays*1e3).format("yyyy-MM-dd")}else{var n=(new Date).format("yyyy");n===t?(this.currentYear=t,this.startTime=t+"-01-01",this.endTime=(new Date).format("yyyy-MM-dd")):(this.currentYear=t,this.startTime=t+"-01-01",this.endTime=+t+"-12-31")}this.$emit("handleChartData",this.startTime,this.endTime,this.dateType)}}}},754:function(t,e,a){e=t.exports=a(539)(),e.push([t.i,".dateSwitch-wrap[data-v-644a5a6f]{float:right}",""])},756:function(t,e,a){var i=a(754);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(540)("239baac4",i,!0)},759:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dateSwitch-wrap"},[a("div",{staticStyle:{float:"right"}},["日"===t.date?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd","picker-options":t.isRanking?t.pickerOptionsDay:t.pickerOptionsCommon,size:"small"},on:{change:t.handleformatTime},model:{value:t.day,callback:function(e){t.day=e},expression:"day"}}):"周"===t.date?a("el-date-picker",{attrs:{"picker-options":t.isRanking?t.pickerOptionsWeek:t.pickerOptions,type:"week",size:"small",format:"yyyy 第 WW 周",placeholder:"选择周"},on:{change:t.handleformatTime},model:{value:t.week,callback:function(e){t.week=e},expression:"week"}}):"月"===t.date?a("el-date-picker",{attrs:{type:"month",size:"small","value-format":"yyyy-M","picker-options":t.isRanking?t.pickerOptionsMonth:t.pickerOptionsCommon,placeholder:"选择月"},on:{change:t.handleformatTime},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}}):a("el-date-picker",{attrs:{type:"year",size:"small",placeholder:"选择年","picker-options":t.isRanking?t.pickerOptionsYear:t.pickerOptionsCommon,"value-format":"yyyy"},on:{change:t.handleformatTime},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1),t._v(" "),a("el-radio-group",{staticStyle:{float:"right",margin:"1px 20px 0 0"},attrs:{size:"small"},on:{change:t.handleTrendRange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[t.isShow?a("el-radio-button",{attrs:{label:"日"}}):t._e(),t._v(" "),a("el-radio-button",{attrs:{label:"周"}}),t._v(" "),a("el-radio-button",{attrs:{label:"月"}}),t._v(" "),a("el-radio-button",{attrs:{label:"年"}})],1)],1)},staticRenderFns:[]}},805:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(542),n=a.n(i),r=a(717),s=a(719),d=a(718);e.default={components:{DateSwitch:n.a},data:function(){return{chartName:"",rankingAddChart:null,rankingSumChart:null,isRanking:!0,trendDate:"周",addData:[],sumData:[],uid:JSON.parse(sessionStorage.getItem("userInfo")).uid-0}},methods:{fetchAlarmAddRanking:function(t,e,i){var n=this;this.addData=[],a.i(r.a)(i,this.uid,t,e).then(function(t){n.addData=t.data,n.handleChangeData(n.rankingAddChart,"报警增幅排名前五与后五",n.addData)}).catch(function(t){})},fetchAlarmSumRanking:function(t,e,i){var n=this;this.sumData=[],a.i(r.b)(i,this.uid,t,e).then(function(t){n.sumData=t.data,n.handleChangeData(n.rankingSumChart,"报警总数排名前五与后五",n.sumData)}).catch(function(t){})},fetchPassengerAddRanking:function(t,e,i){var n=this;this.addData=[],a.i(s.b)(i,this.uid,t,e).then(function(t){n.addData=t.data,n.handleChangeData(n.rankingAddChart,"客流增幅排名前五与后五",n.addData)}).catch(function(t){})},fetchPassengerSumRanking:function(t,e,i){var n=this;this.sumData=[],a.i(s.c)(i,this.uid,t,e).then(function(t){n.sumData=t.data,n.handleChangeData(n.rankingSumChart,"客流总数排名前五与后五",n.sumData)}).catch(function(t){})},fetchRepairAddRanking:function(t,e,i){var n=this;this.addData=[],a.i(d.a)(i,this.uid,t,e).then(function(t){n.addData=t.data,n.handleChangeData(n.rankingAddChart,"报修增幅排名前五与后五",n.addData)}).catch(function(t){})},fetchRepairSumRanking:function(t,e,i){var n=this;this.sumData=[],a.i(d.b)(i,this.uid,t,e).then(function(t){n.sumData=t.data,n.handleChangeData(n.rankingSumChart,"报修总数排名前五与后五",n.sumData)}).catch(function(t){})},handleSumAddDate:function(t,e,a){this.rankingAddChart=echarts.init(document.getElementById("rankingAddChart")),this.rankingSumChart=echarts.init(document.getElementById("rankingSumChart")),"operationAnalysis"===this.$route.name?(this.chartName="门店报修增幅与总数排名",this.fetchRepairAddRanking(t,e,a),this.fetchRepairSumRanking(t,e,a)):"alarmAnalysis"===this.$route.name?(this.chartName="报警增幅与总数排名",this.fetchAlarmAddRanking(t,e,a),this.fetchAlarmSumRanking(t,e,a)):(this.chartName="客流增幅与总数排名",this.fetchPassengerAddRanking(t,e,a),this.fetchPassengerSumRanking(t,e,a))},handleChangeData:function(t,e,a){var i={color:["#2297E8","#48CE38","#F8D156","#FD9827","#9764DC","#339999","#50c2c2","#abd4dd","#7b98c1","#84b5ef","#ffc281","#ff8080"],grid:{left:160,right:70,bottom:70},title:{text:e,top:10,left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow",crossStyle:{color:"#999"}}},legend:{show:!0,bottom:10},xAxis:[{type:"value",axisTick:{show:!1}}],yAxis:[{type:"category",data:a.Name,axisPointer:{type:"shadow"},splitLine:{show:!1},axisTick:{show:!1}}],series:a.Data};t.setOption(i),window.addEventListener("resize",t.resize)}}}},819:function(t,e,a){e=t.exports=a(539)(),e.push([t.i,".rankingChart .title-wrap[data-v-496c7af5]{line-height:32px}",""])},824:function(t,e,a){var i=a(819);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(540)("00b839e2",i,!0)},830:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"rankingChart bg-fff"},[a("div",{staticClass:"title-wrap"},[a("h3",[a("c-svg",{staticClass:"title-icon",attrs:{name:"bar_chart"}}),t._v(" "),a("span",{staticClass:"text"},[t._v(t._s(t.chartName))])],1),t._v(" "),a("date-switch",{attrs:{"fixed-date":t.trendDate,"is-ranking":t.isRanking},on:{handleChartData:t.handleSumAddDate}})],1),t._v(" "),a("div",[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticStyle:{height:"500px"},attrs:{id:"rankingAddChart"}})]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[a("div",{staticStyle:{height:"500px"},attrs:{id:"rankingSumChart"}})])],1)])},staticRenderFns:[]}}});
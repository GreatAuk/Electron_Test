webpackJsonp([71],{1125:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(146),n=e.n(i),r=e(237);a.default={components:{Header:n.a},data:function(){return{mapWidth:null,showBigscreen:!0,videoDialog:!1,alarmDatas:{ids:[],list:[]},currentAlarm:{},instance:null}},computed:{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date},sidebar:function(){return this.$store.state.app.sidebar},header:function(){return"列表展示"===this.$route.meta.title?this.$store.state.app.header:this.$route.meta.title}},mounted:function(){var t=this,a=window.matchMedia("(max-width: 1367px)");a.matches&&this.$store.dispatch("CloseSideBar"),window.onresize=function(){a.matches&&t.$store.dispatch("CloseSideBar"),t.sidebar?t.mapWidth=window.innerWidth-160:t.mapWidth=window.innerWidth-60}},beforeDestroy:function(){clearInterval(this.notifyTimer)},methods:{hasOneShowingChildren:function(t){return 1===t.filter(function(t){return!t.hidden}).length},watchAlarm:function(){var t=this;e.i(r.a)().then(function(a){var e=JSON.parse(a.data);e.forEach(function(a,i){-1===t.alarmDatas.ids.indexOf(a.ID)&&(i===e.length-1&&!a.instance&&a.camera&&(t.videoDialog=!1,t.videoDialog=!0,t.currentAlarm=a,t.$nextTick(function(){var t={container:"#video",variable:"player",flashplayer:!1,autoplay:!0,video:a.camera};new ckplayer(t)})),t.alarmDatas.ids.push(a.ID),setTimeout(function(){var e=t.$notify({message:a.ALARM_DESCRIBE,duration:0,offset:40,position:"bottom-right",customClass:"alarm-notify",type:"warning",onClick:function(){t.currentAlarm=a,a.camera?(t.videoDialog=!0,t.$nextTick(function(){var t={container:"#video",variable:"player",flashplayer:!1,autoplay:!0,video:a.camera};new ckplayer(t)})):t.$confirm("确认该报警 ？（确认后请及时处理）","提示",{type:"warning"}).then(function(){t.confimAlarm()}).catch(function(){})}});a.instance=e,t.alarmDatas.list.push(a)},0))})})},playAudio:function(){var t=this;this.instance=this.$notify({title:"提示",type:"warning",dangerouslyUseHTMLString:!0,message:"\n              <div>\n                  <div>以下点位产生报警</div>\n                  <div style='padding: 20px;'>\n                    <div>###</div>\n                  </div>\n                  <el-button style='flaot:right' type='primary' class='el-button el-button--primary el-button--small'>确认报警</el-button>\n              </div>\n            ",duration:0,showClose:!1,onClick:function(){t.$confirm("确认该报警 ？（确认后请及时处理）","提示",{type:"warning"}).then(function(){t.instance.close(),t.$refs.audio.pause()}).catch(function(){})}})},confimAlarm:function(){var t=this;e.i(r.b)(this.currentAlarm.ID).then(function(a){"00"==JSON.parse(a.data).flag?(t.$message({type:"success",message:"成功确认报警"}),t.videoDialog=!1,t.currentAlarm.instance.close(),t.alarmDatas.list=t.alarmDatas.list.filter(function(a){return a.ID!==t.currentAlarm.ID})):t.$message("报警确认失败")})}}}},1216:function(t,a,e){a=t.exports=e(539)(),a.push([t.i,".alarm-video-dialog{width:900px}.alarm-video-dialog .el-dialog__header{padding:0}.alarm-video-dialog .el-dialog__body{padding:0;height:500px}",""])},1217:function(t,a,e){a=t.exports=e(539)(),a.push([t.i,".app-wrapper[data-v-2481d156]{position:relative;width:100%;font-size:13px;height:100%;background:#f5f5f5}.app-wrapper .main[data-v-2481d156]{position:absolute;top:50px;bottom:0;min-width:600px;transition:top .6s;overflow-y:auto;width:100%}.app-wrapper .main .content-container[data-v-2481d156]{transition:margin-left .28s ease-out;margin-left:160px;height:100%;box-sizing:border-box;min-width:1000px}.app-wrapper .main .el-breadcrumb[data-v-2481d156]{margin-bottom:15px}.app-wrapper .main .content-header[data-v-2481d156]{box-sizing:border-box;background:#fff;padding:16px 32px 0}.app-wrapper .main .content-header .content-header-title[data-v-2481d156]{font-size:20px;font-weight:500;padding:0 0 20px 10px;color:#3c3c3c}.app-wrapper .main .content-container .content-wrapper[data-v-2481d156]{box-sizing:border-box;height:100%}.app-wrapper .main .sidebar-container[data-v-2481d156]{overflow:auto;transition:width .28s ease-out;width:160px;height:100%;position:fixed;top:50px;bottom:0;left:0;z-index:1001}.app-wrapper .hideSidebar .sidebar-container[data-v-2481d156]{width:56px}.app-wrapper .hideSidebar .content-container[data-v-2481d156]{margin-left:56px}.video-wrapper_footer[data-v-2481d156]{text-align:right;border-top:1px solid #dedfe0}",""])},1346:function(t,a,e){var i=e(1216);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(540)("46d2395c",i,!0)},1347:function(t,a,e){var i=e(1217);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(540)("5a7eac50",i,!0)},1507:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-wrapper"},[e("Header"),t._v(" "),e("div",{staticClass:"main thin-scroll",class:{hideSidebar:!t.sidebar}},[e("transition",{attrs:{name:"el-fade-in",mode:"out-in"}},[e("router-view",{key:t.key})],1)],1)],1)},staticRenderFns:[]}},625:function(t,a,e){e(1347),e(1346);var i=e(38)(e(1125),e(1507),"data-v-2481d156",null);t.exports=i.exports}});
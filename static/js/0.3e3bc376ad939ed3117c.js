webpackJsonp([0,32],{1e3:function(e,t,n){"use strict";t.parser=n(1003),t.generate=n(999),t.writeToStream=n(854)},1001:function(e,t,n){"use strict";function r(e){var t=o.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}function i(){for(var e=0;e<a;e++)s[e]=r(e)}var o=n(716).Buffer,a=65536,s={};e.exports={cache:s,generateCache:i,generateNumber:r}},1002:function(e,t){function n(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}e.exports=n},1003:function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}var i=n(909),o=n(715),a=n(755).EventEmitter,s=n(1002),l=n(853);o(r,a),r.prototype._resetState=function(){this.packet=new s,this.error=null,this._list=i(),this._stateCounter=0},r.prototype.parse=function(e){for(this.error&&this._resetState(),this._list.append(e);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)++this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},r.prototype._parseHeader=function(){var e=this._list.readUInt8(0);return this.packet.cmd=l.types[e>>l.CMD_SHIFT],this.packet.retain=0!=(e&l.RETAIN_MASK),this.packet.qos=e>>l.QOS_SHIFT&l.QOS_MASK,this.packet.dup=0!=(e&l.DUP_MASK),this._list.consume(1),!0},r.prototype._parseLength=function(){for(var e,t=0,n=1,r=0,i=!0;t<5&&(e=this._list.readUInt8(t++),r+=n*(e&l.LENGTH_MASK),n*=128,0!=(e&l.LENGTH_FIN_MASK));)if(this._list.length<=t){i=!1;break}return i&&(this.packet.length=r,this._list.consume(t)),i},r.prototype._parsePayload=function(){var e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseMessageId();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":case"disconnect":break;default:this._emitError(new Error("Not supported"))}e=!0}return e},r.prototype._parseConnect=function(){var e,t,n,r,i,o,a={},s=this.packet;if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==e&&"MQIsdp"!==e)return this._emitError(new Error("Invalid protocolId"));if(s.protocolId=e,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.protocolVersion=this._list.readUInt8(this._pos),3!==s.protocolVersion&&4!==s.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(++this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(a.username=this._list.readUInt8(this._pos)&l.USERNAME_MASK,a.password=this._list.readUInt8(this._pos)&l.PASSWORD_MASK,a.will=this._list.readUInt8(this._pos)&l.WILL_FLAG_MASK,a.will&&(s.will={},s.will.retain=0!=(this._list.readUInt8(this._pos)&l.WILL_RETAIN_MASK),s.will.qos=(this._list.readUInt8(this._pos)&l.WILL_QOS_MASK)>>l.WILL_QOS_SHIFT),s.clean=0!=(this._list.readUInt8(this._pos)&l.CLEAN_SESSION_MASK),this._pos++,s.keepalive=this._parseNum(),-1===s.keepalive)return this._emitError(new Error("Packet too short"));if(null===(t=this._parseString()))return this._emitError(new Error("Packet too short"));if(s.clientId=t,a.will){if(null===(n=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(s.will.topic=n,null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));s.will.payload=r}if(a.username){if(null===(o=this._parseString()))return this._emitError(new Error("Cannot parse username"));s.username=o}if(a.password){if(null===(i=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));s.password=i}return s},r.prototype._parseConnack=function(){var e=this.packet;return this._list.length<2?null:(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&l.SESSIONPRESENT_MASK),e.returnCode=this._list.readUInt8(this._pos),-1===e.returnCode?this._emitError(new Error("Cannot parse return code")):void 0)},r.prototype._parsePublish=function(){var e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));e.qos>0&&!this._parseMessageId()||(e.payload=this._list.slice(this._pos,e.length))},r.prototype._parseSubscribe=function(){var e,t,n=this.packet;if(1!==n.qos)return this._emitError(new Error("Wrong subscribe header"));if(n.subscriptions=[],this._parseMessageId())for(;this._pos<n.length;){if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse topic"));t=this._list.readUInt8(this._pos++),n.subscriptions.push({topic:e,qos:t})}},r.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},r.prototype._parseUnsubscribe=function(){var e=this.packet;if(e.unsubscriptions=[],this._parseMessageId())for(;this._pos<e.length;){var t;if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse topic"));e.unsubscriptions.push(t)}},r.prototype._parseUnsuback=function(){if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"))},r.prototype._parseMessageId=function(){var e=this.packet;return e.messageId=this._parseNum(),null!==e.messageId||(this._emitError(new Error("Cannot parse messageId")),!1)},r.prototype._parseString=function(e){var t,n=this._parseNum(),r=n+this._pos;return-1===n||r>this._list.length||r>this.packet.length?null:(t=this._list.toString("utf8",this._pos,r),this._pos+=n,t)},r.prototype._parseBuffer=function(){var e,t=this._parseNum(),n=t+this._pos;return-1===t||n>this._list.length||n>this.packet.length?null:(e=this._list.slice(this._pos,n),this._pos+=t,e)},r.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var e=this._list.readUInt16BE(this._pos);return this._pos+=2,e},r.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new s,!0},r.prototype._emitError=function(e){this.error=e,this.emit("error",e)},e.exports=r},1004:function(e,t,n){"use strict";(function(t,r){function i(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function o(e,t,n){e.emit("packetsend",t),!h.writeToStream(t,e.stream)&&n?e.stream.once("drain",n):n&&n()}function a(e){e&&Object.keys(e).forEach(function(t){"function"==typeof e[t]&&(e[t](new Error("Connection closed")),delete e[t])})}function s(e,t,n){e.outgoingStore.put(t,function(r){if(r)return n&&n(r);o(e,t,n)})}function l(){}function u(e,t){var n,r=this;if(!(this instanceof u))return new u(e,t);this.options=t||{};for(n in _)void 0===this.options[n]?this.options[n]=_[n]:this.options[n]=t[n];this.options.clientId="string"==typeof this.options.clientId?this.options.clientId:i(),this.streamBuilder=e,this.outgoingStore=this.options.outgoingStore||new p,this.incomingStore=this.options.incomingStore||new p,this.queueQoSZero=void 0===this.options.queueQoSZero||this.options.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this.on("connect",function(){function e(){n.destroy(),n=null}function t(){if(n){var e,i=n.read(1);if(!i)return void n.once("readable",t);r.disconnecting||r.reconnectTimer?n.destroy&&n.destroy():(e=r.outgoing[i.messageId],r.outgoing[i.messageId]=function(n,r){e&&e(n,r),t()},r._sendPacket(i))}}if(!this.disconnected){this.connected=!0;var n=this.outgoingStore.createStream();this.once("close",e),n.on("end",function(){r.removeListener("close",e)}),n.on("error",function(t){r.removeListener("close",e),r.emit("error",t)}),t()}}),this.on("close",function(){this.connected=!1,clearTimeout(this.connackTimer)}),this.on("connect",this._setupPingTimer),this.on("connect",function(){function e(){var n=t.shift(),i=null;n&&(i=n.packet,r._sendPacket(i,function(t){n.cb&&n.cb(t),e()}))}var t=this.queue;e()});var o=!0;this.on("connect",function(){!o&&this.options.clean&&Object.keys(this._resubscribeTopics).length>0&&(this.options.resubscribe?(this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)):this._resubscribeTopics={}),o=!1}),this.on("close",function(){null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null)}),this.on("close",this._setupReconnect),c.EventEmitter.call(this),this._setupStream()}var c=n(755),p=n(858),f=n(842),h=n(1e3),d=n(799).Writable,g=n(715),v=n(1016),m=n(1006),y=n(831),b=t.setImmediate||function(e){r.nextTick(e)},_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0};g(u,c.EventEmitter),u.prototype._setupStream=function(){function e(){r.nextTick(t)}function t(){var t=c.shift(),n=u;t?i._handlePacket(t,e):(u=null,n())}var n,i=this,a=new d,s=h.parser(this.options),u=null,c=[];this._clearReconnect(),this.stream=this.streamBuilder(this),s.on("packet",function(e){c.push(e)}),a._write=function(e,n,r){u=r,s.parse(e),t()},this.stream.pipe(a),this.stream.on("error",l),f(this.stream,this.emit.bind(this,"close")),n=Object.create(this.options),n.cmd="connect",o(this,n),s.on("error",this.emit.bind(this,"error")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){i._cleanUp(!0)},this.options.connectTimeout)},u.prototype._handlePacket=function(e,t){switch(this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"pingresp":this._handlePingresp(e),t()}},u.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},u.prototype.publish=function(e,t,n,r){var i;if("function"==typeof n&&(r=n,n=null),n=y({qos:0,retain:!1,dup:!1},n),this._checkDisconnecting(r))return this;switch(i={cmd:"publish",topic:e,payload:t,qos:n.qos,retain:n.retain,messageId:this._nextId(),dup:n.dup},n.qos){case 1:case 2:this.outgoing[i.messageId]=r||l,this._sendPacket(i);break;default:this._sendPacket(i,r)}return this},u.prototype.subscribe=function(){var e,t,n=Array.prototype.slice.call(arguments),r=[],i=n.shift(),o=i.resubscribe,a=n.pop()||l,s=n.pop(),u=this;if(delete i.resubscribe,"string"==typeof i&&(i=[i]),"function"!=typeof a&&(s=a,a=l),null!==(t=m.validateTopics(i)))return b(a,new Error("Invalid topic "+t)),this;if(this._checkDisconnecting(a))return this;if(s=y({qos:0},s),Array.isArray(i)?i.forEach(function(e){(u._resubscribeTopics[e]<s.qos||!u._resubscribeTopics.hasOwnProperty(e)||o)&&r.push({topic:e,qos:s.qos})}):Object.keys(i).forEach(function(e){(u._resubscribeTopics[e]<i[e]||!u._resubscribeTopics.hasOwnProperty(e)||o)&&r.push({topic:e,qos:i[e]})}),e={cmd:"subscribe",subscriptions:r,qos:1,retain:!1,dup:!1,messageId:this._nextId()},!r.length)return void a(null,[]);if(this.options.resubscribe){var c=[];r.forEach(function(e){u.options.reconnectPeriod>0&&(u._resubscribeTopics[e.topic]=e.qos,c.push(e.topic))}),u.messageIdToTopic[e.messageId]=c}return this.outgoing[e.messageId]=function(e,t){if(!e)for(var n=t.granted,i=0;i<n.length;i+=1)r[i].qos=n[i];a(e,r)},this._sendPacket(e),this},u.prototype.unsubscribe=function(e,t){var n={cmd:"unsubscribe",qos:1,messageId:this._nextId()},r=this;return t=t||l,this._checkDisconnecting(t)?this:("string"==typeof e?n.unsubscriptions=[e]:"object"==typeof e&&e.length&&(n.unsubscriptions=e),this.options.resubscribe&&n.unsubscriptions.forEach(function(e){delete r._resubscribeTopics[e]}),this.outgoing[n.messageId]=t,this._sendPacket(n),this)},u.prototype.end=function(e,t){function n(){i.disconnected=!0,i.incomingStore.close(function(){i.outgoingStore.close(function(){t&&t.apply(null,arguments),i.emit("end")})}),i._deferredReconnect&&i._deferredReconnect()}function r(){i._cleanUp(e,b.bind(null,n))}var i=this;return"function"==typeof e&&(t=e,e=!1),this.disconnecting?this:(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?this.once("outgoingEmpty",setTimeout.bind(null,r,10)):r(),this)},u.prototype.removeOutgoingMessage=function(e){var t=this.outgoing[e];return delete this.outgoing[e],this.outgoingStore.del({messageId:e},function(){t(new Error("Message removed"))}),this},u.prototype.reconnect=function(e){var t=this,n=function(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new p,t.outgoingStore=t.options.outgoingStore||new p,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=n:n(),this},u.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},u.prototype._setupReconnect=function(){var e=this;!e.disconnecting&&!e.reconnectTimer&&e.options.reconnectPeriod>0&&(this.reconnecting||(this.emit("offline"),this.reconnecting=!0),e.reconnectTimer=setInterval(function(){e._reconnect()},e.options.reconnectPeriod))},u.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},u.prototype._cleanUp=function(e,t){t&&this.stream.on("close",t),e?(0===this.options.reconnectPeriod&&this.options.clean&&a(this.outgoing),this.stream.destroy()):this._sendPacket({cmd:"disconnect"},b.bind(null,this.stream.end.bind(this.stream))),this.disconnecting||(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(this.stream.removeListener("close",t),t())},u.prototype._sendPacket=function(e,t){if(!this.connected)return void(0===(e.qos||0)&&this.queueQoSZero||"publish"!==e.cmd?this.queue.push({packet:e,cb:t}):e.qos>0?(t=this.outgoing[e.messageId],this.outgoingStore.put(e,function(e){if(e)return t&&t(e)})):t&&t(new Error("No connection to broker")));switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void s(this,e,t);default:return void o(this,e,t)}switch(e.qos){case 2:case 1:s(this,e,t);break;case 0:default:o(this,e,t)}},u.prototype._setupPingTimer=function(){var e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=v(function(){e._checkPing()},1e3*this.options.keepalive))},u.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},u.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},u.prototype._handlePingresp=function(){this.pingResp=!0},u.prototype._handleConnack=function(e){var t=e.returnCode,n=["","Unacceptable protocol version","Identifier rejected","Server unavailable","Bad username or password","Not authorized"];if(clearTimeout(this.connackTimer),0===t)this.reconnecting=!1,this.emit("connect",e);else if(t>0){var r=new Error("Connection refused: "+n[t]);r.code=t,this.emit("error",r)}},u.prototype._handlePublish=function(e,t){t=void 0!==t?t:l;var n=e.topic.toString(),r=e.payload,i=e.qos,o=e.messageId,a=this;switch(i){case 2:this.incomingStore.put(e,function(e){if(e)return t(e);a._sendPacket({cmd:"pubrec",messageId:o},t)});break;case 1:this.emit("message",n,r,e),this.handleMessage(e,function(e){if(e)return t(e);a._sendPacket({cmd:"puback",messageId:o},t)});break;case 0:this.emit("message",n,r,e),this.handleMessage(e,t)}},u.prototype.handleMessage=function(e,t){t()},u.prototype._handleAck=function(e){var t=e.messageId,n=e.cmd,r=null,i=this.outgoing[t],o=this;if(i){switch(n){case"pubcomp":case"puback":delete this.outgoing[t],this.outgoingStore.del(e,i);break;case"pubrec":r={cmd:"pubrel",qos:2,messageId:t},this._sendPacket(r);break;case"suback":if(delete this.outgoing[t],1===e.granted.length&&0!=(128&e.granted[0])){var a=this.messageIdToTopic[t];a&&a.forEach(function(e){delete o._resubscribeTopics[e]})}i(null,e);break;case"unsuback":delete this.outgoing[t],i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}},u.prototype._handlePubrel=function(e,t){t=void 0!==t?t:l;var n=e.messageId,r=this,i={cmd:"pubcomp",messageId:n};r.incomingStore.get(e,function(n,o){n||"pubrel"===o.cmd?r._sendPacket(i,t):(r.emit("message",o.topic,o.payload,o),r.incomingStore.put(e,function(e){if(e)return t(e);r.handleMessage(o,function(e){if(e)return t(e);r._sendPacket(i,t)})}))})},u.prototype._nextId=function(){var e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},u.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},e.exports=u}).call(t,n(53),n(139))},1005:function(e,t,n){"use strict";(function(t){function r(e){var t;e.auth&&(t=e.auth.match(/^(.+):(.+)$/),t?(e.username=t[1],e.password=t[2]):e.username=e.auth)}function i(e,t){function n(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),u[t.protocol](e,t)}if("object"!=typeof e||t||(t=e,e=null),t=t||{},e){var i=s.parse(e,!0);if(null!=i.port&&(i.port=Number(i.port)),t=l(i,t),null===t.protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(r(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;default:throw new Error('Unknown protocol for secure connection: "'+t.protocol+'"!')}}if(!u[t.protocol]){var a=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs"].filter(function(e,t){return(!a||t%2!=0)&&"function"==typeof u[e]})[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");return t.protocol&&(t.defaultProtocol=t.protocol),new o(n,t)}var o=n(1004),a=n(858),s=n(867),l=n(831),u={};"browser"!==t.title?(u.mqtt=n(855),u.tcp=n(855),u.ssl=n(828),u.tls=n(828),u.mqtts=n(828)):(u.wx=n(857),u.wxs=n(857)),u.ws=n(856),u.wss=n(856),e.exports=i,e.exports.connect=i,e.exports.MqttClient=o,e.exports.Store=a}).call(t,n(139))},1006:function(e,t,n){"use strict";function r(e){for(var t=e.split("/"),n=0;n<t.length;n++)if("+"!==t[n]){if("#"===t[n])return n===t.length-1;if(-1!==t[n].indexOf("+")||-1!==t[n].indexOf("#"))return!1}return!0}function i(e){if(0===e.length)return"empty_topic_list";for(var t=0;t<e.length;t++)if(!r(e[t]))return e[t];return null}e.exports={validateTopics:i}},1007:function(e,t,n){function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}var o=n(1050);e.exports=o(r),e.exports.strict=o(i),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},1008:function(e,t,n){(function(e,r){var i;!function(o){function a(e){throw new RangeError(L[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function l(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(C,"."),r+s(e.split("."),t).join(".")}function u(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=N(e>>>10&1023|55296),e=56320|1023&e),t+=N(e)}).join("")}function p(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:w}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?M(e/k):e>>1,e+=M(e/t);e>A*T>>1;r+=w)e=M(e/A);return M(r+(A+1)*e/(e+x))}function d(e){var t,n,r,i,o,s,l,u,f,d,g=[],v=e.length,m=0,y=I,b=E;for(n=e.lastIndexOf(D),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&a("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=m,s=1,l=w;i>=v&&a("invalid-input"),u=p(e.charCodeAt(i++)),(u>=w||u>M((_-m)/s))&&a("overflow"),m+=u*s,f=l<=b?S:l>=b+T?T:l-b,!(u<f);l+=w)d=w-f,s>M(_/d)&&a("overflow"),s*=d;t=g.length+1,b=h(m-o,t,0==o),M(m/t)>_-y&&a("overflow"),y+=M(m/t),m%=t,g.splice(m++,0,y)}return c(g)}function g(e){var t,n,r,i,o,s,l,c,p,d,g,v,m,y,b,x=[];for(e=u(e),v=e.length,t=I,n=0,o=E,s=0;s<v;++s)(g=e[s])<128&&x.push(N(g));for(r=i=x.length,i&&x.push(D);r<v;){for(l=_,s=0;s<v;++s)(g=e[s])>=t&&g<l&&(l=g);for(m=r+1,l-t>M((_-n)/m)&&a("overflow"),n+=(l-t)*m,t=l,s=0;s<v;++s)if(g=e[s],g<t&&++n>_&&a("overflow"),g==t){for(c=n,p=w;d=p<=o?S:p>=o+T?T:p-o,!(c<d);p+=w)b=c-d,y=w-d,x.push(N(f(d+b%y,0))),c=M(b/y);x.push(N(f(c,0))),o=h(n,m,r==i),n=0,++r}++n,++t}return x.join("")}function v(e){return l(e,function(e){return O.test(e)?d(e.slice(4).toLowerCase()):e})}function m(e){return l(e,function(e){return P.test(e)?"xn--"+g(e):e})}var y=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);var b,_=2147483647,w=36,S=1,T=26,x=38,k=700,E=72,I=128,D="-",O=/^xn--/,P=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=w-S,M=Math.floor,N=String.fromCharCode;b={version:"1.4.1",ucs2:{decode:u,encode:c},decode:d,encode:g,toASCII:m,toUnicode:v},void 0!==(i=function(){return b}.call(t,n,t,e))&&(e.exports=i)}()}).call(t,n(1048)(e),n(53))},1009:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var p,f,h,d,g=e[c].replace(s,"%20"),v=g.indexOf(n);v>=0?(p=g.substr(0,v),f=g.substr(v+1)):(p=g,f=""),h=decodeURIComponent(p),d=decodeURIComponent(f),r(a,h)?i(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},1010:function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},1011:function(e,t,n){"use strict";t.decode=t.parse=n(1009),t.encode=t.stringify=n(1010)},1012:function(e,t,n){e.exports=n(734)},1013:function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}e.exports=r;var i=n(860),o=n(753);o.inherits=n(715),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},1014:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var o=n(716).Buffer,a=n(1057);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),a&&a.inspect&&a.inspect.custom&&(e.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},1015:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},1016:function(e,t,n){"use strict";function r(e,t,n){var r=this;this._callback=e,this._args=n,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e||(e=r._interval),r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,e,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}function i(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new r(arguments[0],arguments[1],e)}e.exports=i},1017:function(e,t){function n(e){var t=e._readableState;return t?t.objectMode?e.read():e.read(r(t)):null}function r(e){return e.buffer.length?e.buffer.head?e.buffer.head.data.length:e.buffer[0].length:e.length}e.exports=n},1019:function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},1020:function(e,t,n){(function(t){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation"),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,n(53))},1021:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},1022:function(e,t,n){(function(e){function r(e,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),s(r,e,r.depth)}function i(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function o(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function s(e,n,r){if(e.customInspect&&n&&k(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=s(e,i,r)),i}var o=l(e,n);if(o)return o;var d=Object.keys(n),g=a(d);if(e.showHidden&&(d=Object.getOwnPropertyNames(n)),x(n)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return u(n);if(0===d.length){if(k(n)){var v=n.name?": "+n.name:"";return e.stylize("[Function"+v+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(x(n))return u(n)}var m="",b=!1,_=["{","}"];if(h(n)&&(b=!0,_=["[","]"]),k(n)){m=" [Function"+(n.name?": "+n.name:"")+"]"}if(w(n)&&(m=" "+RegExp.prototype.toString.call(n)),T(n)&&(m=" "+Date.prototype.toUTCString.call(n)),x(n)&&(m=" "+u(n)),0===d.length&&(!b||0==n.length))return _[0]+m+_[1];if(r<0)return w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var S;return S=b?c(e,n,r,g,d):d.map(function(t){return p(e,n,r,g,t,b)}),e.seen.pop(),f(S,m,_)}function l(e,t){if(_(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)D(t,String(a))?o.push(p(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,n,r,i,!0))}),o}function p(e,t,n,r,i,o){var a,l,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?l=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(l=e.stylize("[Setter]","special")),D(r,i)||(a="["+i+"]"),l||(e.seen.indexOf(u.value)<0?(l=g(n)?s(e,u.value,null):s(e,u.value,n-1),l.indexOf("\n")>-1&&(l=o?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),_(a)){if(o&&i.match(/^\d+$/))return l;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+l}function f(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function _(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===I(e)}function S(e){return"object"==typeof e&&null!==e}function T(e){return S(e)&&"[object Date]"===I(e)}function x(e){return S(e)&&("[object Error]"===I(e)||e instanceof Error)}function k(e){return"function"==typeof e}function E(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function I(e){return Object.prototype.toString.call(e)}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function O(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function P(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,n).then(function(t){e.nextTick(a,null,t)},function(t){e.nextTick(O,t,a)})}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,C(t)),n}var C=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},L=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(e).replace(L,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),s=i[n];n<o;s=i[++n])g(s)||!S(s)?a+=" "+s:a+=" "+r(s);return a},t.deprecate=function(n,r){function i(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation,o=!0}return n.apply(this,arguments)}if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return i};var A,M={};t.debuglog=function(r){if(_(A)&&(A=n.i({NODE_ENV:"production"}).NODE_DEBUG||""),r=r.toUpperCase(),!M[r])if(new RegExp("\\b"+r+"\\b","i").test(A)){e.pid;M[r]=function(){t.format.apply(t,arguments)}}else M[r]=function(){};return M[r]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=d,t.isNull=g,t.isNullOrUndefined=v,t.isNumber=m,t.isString=y,t.isSymbol=b,t.isUndefined=_,t.isRegExp=w,t.isObject=S,t.isDate=T,t.isError=x,t.isFunction=k,t.isPrimitive=E,t.isBuffer=n(1021);t.log=function(){},t.inherits=n(715),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var N="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;t.promisify=function(e){function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(e){n(e)}return r}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(N&&e[N]){var t=e[N];if("function"!=typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),N&&Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,C(e))},t.promisify.custom=N,t.callbackify=P}).call(t,n(139))},1048:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},1049:function(e,t){var n=null;"undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof MozWebSocket?n=MozWebSocket:"undefined"!=typeof window&&(n=window.WebSocket||window.MozWebSocket),e.exports=n},1050:function(e,t){function n(e,t){function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),i=t[t.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}if(e&&t)return n(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}e.exports=n},1054:function(e,t){},1055:function(e,t){},1056:function(e,t){},1057:function(e,t){},1088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(132),i=n.n(r),o=n(93),a=n.n(o),s=n(218),l=n.n(s),u=n(226),c=n.n(u),p=n(225),f=n.n(p),h=n(1005),d=n.n(h),g=n(228),v=n.n(g),m=n(711),y=n(723),b=n(702),_=n.n(b),w=n(840),S=n(906),T=n(722),x=n(903),k=n(541),E=n.n(k);t.default={components:{HistoryDialog:E.a},data:function(){var e=this,t=function(t,r,i){if("MQTT"===e.gatewayForm.type)return void i();/^[a-zA-Z0-9_-]{16}$/.test(r)?r===e.primaryserialNumber?i():n.i(y.v)(r).then(function(e){e.data?i():i(new Error("该序列号已存在"))}):i(new Error("16位（字母，数字组合）"))};return{tcpSubmitLoading:!1,tcpSenserData:[],tcpSenserTable:[],configTcpDialogVisible:!1,tcpSenserLoading:!1,gatewayType:"Tcp",tabsActive:sessionStorage.getItem("tabs")?sessionStorage.getItem("tabs"):"third",gatewayData:[],pagination:{total:0,currentPage:1,pageSize:10},pointTypeOptions:[],gatewayForm:{name:"",project:"",serialNumber:"",configString:""},gatewayFormRules:{name:[{required:!0,message:"请输入网关名称",trigger:"blur"}],project:[{required:!0,message:"请选择所属项目",trigger:"change"}],serialNumber:[{required:!0,message:"请输入网关序列号",trigger:"blur"},{validator:t,trigger:"blur"}]},currentGateway:{editable:!0},multipleSelection:[],senserData:[],senserTable:[],senserPagination:{total:0,currentPage:1,pageSize:20},tcpSenserPagination:{total:0,currentPage:1,pageSize:20},configDialogVisible:!1,mqttDialogVisible:!1,MQTTPointLoading:!1,getMQTTPointList:!1,MQTTPointList:[],MQTTPointListPagination:{total:0,current:1,size:10},operationType:"configSenser",projectOptions:[],loading:!1,senserLoading:!1,submitLoading:!1,searchType:1,templateTable:[],currentTemplate:{type:0,name:"",id:""},templateDialog:!1,templateDialogLoading:!1,shareDialog:!1,userFilterText:"",userList:[],selectedUser:[],userId:JSON.parse(sessionStorage.getItem("userInfo")).uid,machineLoading:!1,terminalData:[],registerDialog:!1,registerForm:{project:"",numberList:[{value:""}]},terminalParams:{projectID:"",status:0,terminalNumber:"",pagesize:1,show_number:10},terminaltableTotal:0,registerterminalRules:{project:[{required:!0,message:"请选择项目",trigger:"change"}]},pointList:null,pointName:"",primaryserialNumber:"",port:_host,dayjs:v.a}},computed:{proList:function(){return this.$store.state.app.proList},filterList:function(){var e=[],t=[];return this.$store.state.app.proList.forEach(function(n){var r={};r.text=n.label,r.value=n.label,t.push(n.id),e.push(r)}),this.terminalParams.projectID=t.join(","),e}},mounted:function(){var e=this;this.fetchterminalList(),n.i(m.p)(this.userId).then(function(t){e.projectOptions=JSON.parse(t.data).list}).catch(function(e){}),this.fetchTemplateList();var t=JSON.parse(sessionStorage.getItem("gatewayManage_pagination"));t?(this.pagination.total=t.total,this.pagination.pageSize=t.pageSize,this.pagination.currentPage=t.currentPage,this.fetchDevice()):this.fetchDevice()},methods:{submitTcpGateway:function(){var e=this,t={},r=n.i(w.b)(this.tcpSenserData,this.gatewayType);if(r.errPages.length)return this.$notify({title:"警告",message:"请修复第 "+r.errPages.join(", ")+" 页的错误",type:"warning",duration:1e4}),!1;this.$nextTick(function(){if(0!==document.querySelectorAll(".error").length)return e.$message("请确保提交的数据不存在错误再提交"),!1;e.tcpSubmitLoading=!0,t.PointList=[];for(var r=0;r<e.tcpSenserData.length;r++){var i={};i.Decimal=e.tcpSenserData[r].decimal.value,i.PointName=e.tcpSenserData[r].sensorName.value,i.PointType=e.tcpSenserData[r].sensorTypeId.value,i.Unit=e.tcpSenserData[r].unit.value,i.Channel=r+1,""===e.tcpSenserData[r].field1.value?i.Map="":i.Map=e.tcpSenserData[r].field1.value+","+e.tcpSenserData[r].field2.value+","+e.tcpSenserData[r].field3.value+","+e.tcpSenserData[r].field4.value,t.PointList.push(i)}if(!t.PointList.length)return e.$message("请确保最少有一条传感器记录"),void(e.tcpSubmitLoading=!1);t.DvcName=e.gatewayForm.name,t.DvcNo=e.gatewayForm.serialNumber,t.ProjectID=e.gatewayForm.project,n.i(y.w)(t).then(function(t){t.data?(e.$message({message:"网关配置成功",type:"success"}),e.configTcpDialogVisible=!1):e.$message.error("网关配置失败")}).catch(function(t){e.$message.error("服务器错误")}).finally(function(){e.tcpSubmitLoading=!1})})},openTcpDialog:function(e,t,r,i){var o=this;return f()(c.a.mark(function i(){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o.gatewayType="Tcp",o.configTcpDialogVisible=!0,o.tcpSensorLoading=!0,o.currentGateway.id=e,o.currentGateway.sn=t,o.currentGateway.editable=!0,i.next=8,n.i(T.e)(r).then(function(e){var t=JSON.parse(e.data);o.pointTypeOptions=[{label:"状态量",options:t.State},{label:"模拟量",options:t.Analog}]}).catch(function(e){o.$message.error("服务器错误")});case 8:o.tcpSenserLoading=!0,n.i(y.x)(e).then(function(e){var t=JSON.parse(e.data);o.gatewayForm.name=t.NAME,o.gatewayForm.serialNumber=t.DESCRIBES,o.primaryserialNumber=t.DESCRIBES,o.gatewayForm.project=t.projectID,o.gatewayForm.projectName=t.pname,o.deviceId=t.ID,o.tcpSenserData=n.i(w.c)(t.point_list,"tcpGateway",o.pointTypeOptions),o.tcpSenserPagination.total=o.tcpSenserData.length,o.tcpSenserTable=o.tcpSenserData.slice(0,o.tcpSenserPagination.pageSize)}).catch(function(e){o.$message.error("服务器错误")}).then(function(){o.tcpSenserLoading=!1});case 10:case"end":return i.stop()}},i,o)}))()},openMqttDialog:function(e){var t=this;this.mqttDialogVisible=!0,this.gatewayForm.name=e.NAME,this.gatewayForm.serialNumber=e.DESCRIBES,this.gatewayForm.id=e.id,this.gatewayForm.type,e.PROTOCOL,this.gatewayForm.projectName=e.pname,this.fetchMQTTPointList(),n.i(x.a)(e.DESCRIBES).then(function(e){var n=e.data;200===n.Code&&(t.gatewayForm.username=n.Data.username,t.gatewayForm.password=n.Data.password)}).catch(function(e){})},updateMQTT:function(){var e=this;if(n.i(x.b)({deviceName:this.gatewayForm.name,deviceID:this.gatewayForm.id}).then(function(t){200!==t.data.Code&&e.$message.error("网关名修改失败")}).catch(function(t){e.$message.error("网关名修改失败")}).then(function(){e.gatewayForm.configString||(e.mqttDialogVisible=!1)}),this.gatewayForm.configString){var t=d.a.connect("wss:mqtt.coolcare.link:8084/mqtt",{connectTimeout:4e4,clientId:"mqttjs_"+Math.random().toString(16).substr(2,10)+"_"+this.userId,username:"webclient",password:"webclient.coolcare@Sinocold"});t.on("error",function(t){e.$message.error("与服务器连接失败")}),t.on("connect",function(){t.subscribe("gw/mq/"+e.gatewayForm.serialNumber+"/response",{qos:1},function(n){n?(e.$message.error("配置下发失败"),t.end()):t.publish("gw/mq/"+e.gatewayForm.serialNumber+"/config/push",e.gatewayForm.configString,function(e){e&&t.end()})}),t.on("message",function(n,r,i){var o=JSON.parse(r.toString());o.status?(e.$message.success(o.message),e.mqttDialogVisible=!1):e.$message.error("配置失败，请检查你提交的配置文件"),t.end()}),setTimeout(function(){t.end()},4e4)})}},resetMQTT:function(e){var t=this;this.$confirm("确认要重启这个MQTT网关?","提示",{type:"warning"}).then(function(){var n=d.a.connect("wss:mqtt.coolcare.link:8084/mqtt",{connectTimeout:4e4,clientId:"mqttjs_"+Math.random().toString(16).substr(2,10)+"_"+t.userId,username:"webclient",password:"webclient.coolcare@Sinocold"});n.on("error",function(e){t.$message.error("与服务器连接失败")}),n.on("connect",function(){n.subscribe("gw/mq/"+e.DESCRIBES+"/response",{qos:1},function(r){r?(t.$message.error("重启指令下发失败"),n.end()):n.publish("gw/mq/"+e.DESCRIBES+"/reboot",'{"operate": "reboot"}',function(e){})}),n.on("message",function(r,i,o){var a=JSON.parse(i.toString());a.status?t.$message.success("网关："+e.NAME+" "+a.message):t.$message.error("网关："+e.NAME+" "+a.message),n.end()}),setTimeout(function(){n.end()},4e4)})}).catch(function(){})},handleTabsSwitch:function(e){sessionStorage.setItem("tabs",e.name)},handletermSizeChange:function(e){this.terminalParams.show_number=e,this.fetchterminalList()},handletermCurrentChange:function(e){this.terminalParams.pagesize=e,this.fetchterminalList()},filterHandler:function(e,t,n){return t.status===Number(e)},filterTag:function(e,t,n){return t.projectName===e},resetTable:function(){this.terminalParams.status=0,this.terminalParams.terminalNumber="",this.terminalParams.pagesize=1,this.terminalParams.show_number=10,this.fetchterminalList()},closeregisterDialog:function(){this.$refs.registerForm.resetFields(),this.registerForm.numberList=[{value:""}]},registerTerminal:function(){var e=this;this.$refs.registerForm.validate(function(t){if(!t)return!1;var r={};r.projectId=e.registerForm.project;var i=[];e.registerForm.numberList.forEach(function(e){i.push(e.value)}),r.terminalNumber=i.join(","),n.i(S.h)(r).then(function(t){var n=JSON.parse(t.data);n.success?(n.msg?e.$message.success(n.msg):e.$message.success("注册终端成功"),e.fetchterminalList(),setTimeout(function(){e.registerDialog=!1},500)):e.$message.error(n.msg)})})},checkterminalNum:function(e,t,r){var i=/^[a-zA-Z0-9]+$/;return t?i.test(t)?void n.i(S.i)(t).then(function(e){JSON.parse(e.data)?r():r(new Error("该终端编号已存在"))}):r(new Error("请输入正确的终端编号")):r(new Error("请输入终端编号"))},fetchterminalList:function(){var e=this,t=l()({},this.terminalParams);n.i(S.j)(t).then(function(t){var n=JSON.parse(t.data);e.terminalData=n.list,e.terminaltableTotal=n.sumCount})},checkhistoryLine:function(e,t){var n=[e.row.tpointID,e.row.hpointID];this.pointList=n,this.pointName=t,this.$refs.historyDialog.toggleDialog()},openDialog:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=this,a=arguments[4],s=arguments[5];return f()(c.a.mark(function l(){return c.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o.configDialogVisible=!0,o.operationType=e,o.currentGateway.id=t,o.currentGateway.sn=r,l.next=6,n.i(T.e)(i).then(function(e){var t=JSON.parse(e.data);o.pointTypeOptions=[{label:"状态量",options:t.State},{label:"模拟量",options:t.Analog}]}).catch(function(e){o.$message.error("服务器错误")});case 6:o.currentGateway.editable=!s,o.currentGateway.dType=a,"configSenser"===e?(o.senserLoading=!0,o.gatewayType="Modbus",n.i(y.y)(t).then(function(e){var t=JSON.parse(e.data);o.gatewayForm.name=t.NAME,o.gatewayForm.serialNumber=t.DESCRIBES,o.primaryserialNumber=t.DESCRIBES,o.gatewayForm.project=t.projectID,o.gatewayForm.projectName=t.pname,o.deviceId=t.ID,o.senserData=n.i(w.c)(t.point_list,"fromServer",o.pointTypeOptions),o.senserPagination.total=o.senserData.length,o.senserTable=o.senserData.slice(0,o.senserPagination.pageSize)}).catch(function(e){o.$message.error("服务器错误")}).then(function(){o.senserLoading=!1})):"configTemplate"===e&&(o.senserLoading=!0,n.i(y.z)(t).then(function(e){var t=JSON.parse(e.data);o.currentTemplate.name=t.list[0].name,o.senserData=n.i(w.c)(t.list[0].value.sensorItem,"templateFromServer",o.pointTypeOptions),o.senserTable=o.senserData.slice(0,o.senserPagination.pageSize),o.senserPagination.total=o.senserData.length}).catch(function(e){}).then(function(){o.senserLoading=!1}));case 9:case"end":return l.stop()}},l,o)}))()},handleSenserCurrentChange:function(e){"Tcp"===this.gatewayType?(this.tcpSenserPagination.total=this.tcpSenserData.length,this.tcpSenserTable=this.tcpSenserData.slice((e-1)*this.tcpSenserPagination.pageSize,(e-1)*this.tcpSenserPagination.pageSize+this.tcpSenserPagination.pageSize)):(this.senserPagination.total=this.senserData.length,this.senserTable=this.senserData.slice((e-1)*this.senserPagination.pageSize,(e-1)*this.senserPagination.pageSize+this.senserPagination.pageSize))},handleSenserSizeChange:function(e){"Tcp"===this.gatewayType?(this.tcpSenserPagination.pageSize=e,this.tcpSenserPagination.currentPage=1):(this.senserPagination.pageSize=e,this.senserPagination.currentPage=1),this.handleSenserCurrentChange(1)},dialogClose:function(){this.senserData=[],this.senserTable=[],"configSenser"===this.operationType?(this.$refs.gatewayForm.resetFields(),this.fetchDevice(),this.currentGateway={}):(this.currentTemplate.id="",this.currentTemplate.name="",this.currentTemplate.type=0)},clickDel:function(e,t,r){var i=this;this.currentGateway.id=e,this.currentGateway.index=t,this.$confirm("确认要删除该网关？","提示",{type:"warning"}).then(function(){"Modbus RTU"===r?n.i(y.A)(i.currentGateway.id).then(function(e){"00"===JSON.parse(e.data).flag?(i.handleCurrentChange(i.pagination.currentPage),i.$message({message:"成功删除",type:"success"})):i.$message.error("删除失败")}).catch(function(e){i.$message.error("服务器错误")}):n.i(y.B)(e).then(function(e){e.data?(i.handleCurrentChange(i.pagination.currentPage),i.$message({message:"成功删除",type:"success"})):i.$message.error("删除失败")}).catch(function(e){i.$message.error("服务器错误")})})},watchTemplate:function(e,t){var r=this;return f()(c.a.mark(function i(){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r.currentTemplate.type=t,r.templateDialog=!0,r.templateDialogLoading=!0,i.next=5,n.i(T.e)(0).then(function(e){var t=JSON.parse(e.data);r.pointTypeOptions=[{label:"状态量",options:t.State},{label:"模拟量",options:t.Analog}]}).catch(function(e){r.$message.error("服务器错误")});case 5:n.i(y.z)(e).then(function(e){var t=JSON.parse(e.data);r.currentTemplate.name=t.list[0].name,r.senserData=n.i(w.c)(t.list[0].value.sensorItem,"templateFromServer",r.pointTypeOptions)}).catch(function(e){}).finally(function(){r.templateDialogLoading=!1});case 6:case"end":return i.stop()}},i,r)}))()},templateDialogClose:function(){this.senserData=[],this.currentTemplate.name=""},clickShareBtn:function(e){this.currentTemplate.id=e,this.shareDialog=!0,this.userFilterText="",this.fetchUserList()},searchUsers:function(){this.userList=[],this.fetchUserList()},selectUser:function(e){var t=this;0===e.check?n.i(y.C)(this.currentTemplate.id,e.user).then(function(e){"00"===JSON.parse(e.data).flag?t.$message({type:"success",message:"分享成功 "}):t.$message.error("分享失败")}).catch(function(e){}):n.i(y.D)(this.currentTemplate.id,e.user).then(function(e){"00"===JSON.parse(e.data).flag?t.$message({type:"success",message:"成功取消分享 "}):t.$message.error("取消分享失败")}).catch(function(e){}),e.check=1===e.check?0:1},delTemplate:function(e){var t=this;this.$confirm("确认要删除该网关模板？","提示",{type:"warning"}).then(function(){n.i(y.E)(e).then(function(e){"00"===JSON.parse(e.data).flag?(t.$message({message:"删除成功",type:"success"}),t.fetchTemplateList()):t.$message.error("删除失败")}).catch(function(e){t.$message.error("删除失败")})}).catch(function(e){})},submitSenserData:function(e){var t=this;if("configSenser"!==this.operationType&&!this.currentTemplate.name)return this.$message("请输入模板名称"),!1;var r=n.i(w.b)(this.senserData);if(r.errPages.length)return this.$notify({title:"警告",message:"请修复第 "+r.errPages.join(", ")+" 页的错误",type:"warning",duration:1e4}),!1;this.$nextTick(function(){try{if(0===document.querySelectorAll(".error").length){var r={};r.sensorItem=[];for(var i=0;i<t.senserData.length;i++){var o={};""===t.senserData[i].field1.value?(o.field1="",o.field2="",o.field3="",o.field4=""):(o.field1=t.senserData[i].field1.value,o.field2=t.senserData[i].field2.value,o.field3=t.senserData[i].field3.value,o.field4=t.senserData[i].field4.value),o.decimal=t.senserData[i].decimal.value,o.sensorName=t.senserData[i].sensorName.value,o.sensorTypeId=t.senserData[i].sensorTypeId.value,o.unit=t.senserData[i].unit.value,o.address=t.senserData[i].address.value,o.bias=t.senserData[i].bias.value,o.funcode=t.senserData[i].funcode.value,o.datatype=t.senserData[i].datatype.value,o.datas=t.senserData[i].datas.value.toString(),o.orderStr=t.senserData[i].orderStr.value,o.cycle=t.senserData[i].cycle.value,o.lastUpdateDate="",o.sensorId=t.senserData[i].pointID?t.senserData[i].pointID:0,o.modbusId=t.senserData[i].modbusId?t.senserData[i].modbusId:"","1"!==t.senserData[i].pointType&&"2"!==t.senserData[i].pointType&&(t.senserData[i].pointType="1"),o.pointType=t.senserData[i].pointType,"configSenser"===t.operationType&&(o.iswrite="0",o.iocUrl="",o.isLine="0",o.isOpen="0",o.tag="",o.lastUpdateDate="",o.switcher="",o.symbol="",o.createDate=(new Date).format("yyyy-MM-dd hh:mm:ss")),r.sensorItem.push(o)}if(!r.sensorItem.length)return void t.$message("请确保最少有一条传感器记录");if("configSenser"===t.operationType&&(r.deviceNoOld=t.currentGateway.sn,r.userId="40",r.defaultTime="120",r.agreement="modbus",r.faultDelay="",r.isShare="0",r.userKey="7a29438732d24d259712c231eb4d63a0",r.uid=JSON.parse(sessionStorage.getItem("userInfo")).uid,r.linktype="modbus",r.deviceName=t.gatewayForm.name,r.remark=t.gatewayForm.serialNumber,r.pid=t.gatewayForm.project,r.deviceId=t.deviceId),"configSenser"!==t.operationType){var s={};s.name=t.currentTemplate.name,s.value=a()(r),s.num=r.sensorItem.length,"addTemplate"===t.operationType?(t.submitLoading=!0,n.i(y.F)({data:a()(s)}).then(function(e){"00"===JSON.parse(e.data).flag?(t.$message({message:"添加成功",type:"success"}),t.fetchTemplateList(),t.configDialogVisible=!1):t.$message.error("服务器错误，模板添加失败")}).catch(function(e){t.$message.error("服务器错误，模板添加失败")}).then(function(){t.submitLoading=!1})):"configTemplate"===t.operationType&&(t.submitLoading=!0,s.id=t.currentGateway.id,n.i(y.G)({data:a()(s)}).then(function(e){"00"===JSON.parse(e.data).flag?(t.$message({message:"模板更新成功",type:"success"}),t.fetchTemplateList(),t.configDialogVisible=!1):t.$message.error("模板更新失败")}).catch(function(e){t.$message.error("服务器错误，模板更新失败")}).then(function(){t.submitLoading=!1}))}else"configSenser"===t.operationType&&t.$refs[e].validate(function(e){e&&(t.submitLoading=!0,n.i(y.H)({data:a()(r)}).then(function(e){"00"===JSON.parse(e.data).flag?t.configDialogVisible=!1:t.$message.error("网关配置失败")}).catch(function(e){t.$message.error("服务器错误")}).then(function(){t.submitLoading=!1}))})}else t.$message("请确保提交的数据不存在错误再提交!")}catch(e){}})},goSenserList:function(e,t,n){sessionStorage.setItem("gatewayManage_pagination",a()(this.pagination)),this.$router.push({name:"senserList",query:{id:e,type:t,no:n}})},handleCurrentChange:function(e){this.fetchDevice(e)},handleSizeChange:function(e){this.pagination.pageSize=e,this.pagination.currentPage=1,this.fetchDevice(0)},clickAddRow:function(){"Tcp"===this.gatewayType?(n.i(w.d)(this.tcpSenserData,this.gatewayType),this.tcpSenserPagination.currentPage=1):(n.i(w.d)(this.senserData),this.senserPagination.currentPage=1),this.handleSenserCurrentChange(1)},downloadTemplate:function(){window.location.href=_host+"/file/New_Template.xlsx"},uploadMQTTConfig:function(e){var t=new FileReader;t.readAsText(e,"UTF-8");var n=this;return t.onload=function(){try{var e=JSON.parse(this.result),t=n.gatewayForm,r=t.serialNumber,i=t.username,o=t.password;e.server&&e.server.mqtt&&e.server.mqtt.config&&r===e.server.mqtt.config.clientid&&i===e.server.mqtt.config.username&&o===e.server.mqtt.config.password?n.gatewayForm.configString=this.result:(n.$message.error("设备信息不匹配，请重新上传"),n.gatewayForm.configString="")}catch(e){n.gatewayForm.configString="",n.$message.error("配置文件格式错误")}},!1},uploadExcel:function(e){var t=this,r=new FileReader;r.onload=function(r){var o,a=r.target.result,s=XLSX.read(a,{type:"binary"});(o=t.senserData).unshift.apply(o,i()(n.i(w.c)(t.toJson(s).Sheet1,"fromExcel",t.pointTypeOptions)));var l=n.i(w.b)(t.senserData);t.senserPagination.currentPage=1,t.handleSenserCurrentChange(1),l.errPages.length&&t.$notify({title:"警告",message:"请修复第 "+l.errPages.join(", ")+" 页的错误",type:"warning",duration:1e4}),e.target.value=""},r.readAsBinaryString(e.target.files[0])},deleteSenser:function(e,t){var r=this;if(t){var i=0;if("Tcp"===this.gatewayType?this.tcpSenserData.forEach(function(e){e.pointID&&(i+=1)}):this.senserData.forEach(function(e){e.pointID&&(i+=1)}),1===i)return void this.$message("请确保最少有一条已经上线的点位")}this.$confirm("确认要删除该点位？","提示",{type:"warning"}).then(function(i){"Tcp"===r.gatewayType?(r.tcpSenserData.splice(20*(r.tcpSenserPagination.currentPage-1)+e,1),r.handleSenserCurrentChange(r.tcpSenserPagination.currentPage),r.$message.success("删除成功")):(r.senserData.splice(20*(r.senserPagination.currentPage-1)+e,1),r.handleSenserCurrentChange(r.senserPagination.currentPage),t&&n.i(y.l)(t).then(function(e){"00"!==JSON.parse(e.data).flag&&r.$message({message:"后台删除失败",type:"success"})}).catch(function(e){r.$message.error("服务器错误,删除失败")}))})},handleSelectionChange:function(e){this.multipleSelection=e},batchDel:function(){var e=this;if(!this.multipleSelection.length)return this.$message("请至少选中一行"),!1;var t=0,r=0;if(this.senserData.forEach(function(e){e.pointID&&(t+=1)}),this.multipleSelection.forEach(function(e){e.pointID&&(r+=1)}),t===r)return this.$message("请确保最少有一条已经上线的点位"),!1;this.$confirm("确认要删除这些监测点位？","提示",{type:"warning"}).then(function(){var t=e.multipleSelection.map(function(e){return e.flag}),r=e.multipleSelection.map(function(e){return e.pointID});e.senserData=e.senserData.filter(function(e){return!(t.indexOf(e.flag)>-1)}),e.handleSenserCurrentChange(e.senserPagination.currentPage),r.forEach(function(t){t&&n.i(y.l)(t).then(function(t){"00"!==JSON.parse(t.data).flag&&e.$message({message:"服务器错误，可能有部分传感器未能删除成功",type:"error"})}).catch(function(t){e.$message.error("服务器错误，可能有部分传感器未能删除成功")})})})},batchPaste:function(){if(!this.multipleSelection.length)return this.$message("请至少选中一行"),!1;n.i(w.e)(this.senserData,JSON.parse(a()(this.multipleSelection))),this.senserPagination.currentPage=1,this.handleSenserCurrentChange(1),this.$refs["custom-table"].clearSelection(),this.$message.success("已成功复制指定行至列表头部")},handleCheckData:function(){var e=this,t=void 0;if(t="Tcp"===this.gatewayType?n.i(w.b)(this.tcpSenserData,this.gatewayType):n.i(w.b)(this.senserData),t.errPages.length)return this.$notify({title:"警告",message:"请修复第 "+t.errPages.join(", ")+" 页的错误",type:"warning",duration:1e4}),!1;this.$nextTick(function(){0===document.querySelectorAll(".error").length&&e.$message.success("点位数据无冲突")})},clickEdit:function(e){e.editable=!e.editable,e.editable||("Tcp"===this.gatewayType?n.i(w.b)([e],this.gatewayType):n.i(w.b)([e]))},copyRow:function(e){"Tcp"===this.gatewayType?(n.i(w.f)(this.tcpSenserData,JSON.parse(a()(e)),this.gatewayType),this.tcpSenserPagination.currentPage=1):(n.i(w.f)(this.senserData,JSON.parse(a()(e))),this.senserPagination.currentPage=1),this.handleSenserCurrentChange(1),this.$message.success("已成功复制指定行至列表头部")},handleCellClick:function(e,t,n,r){if(n.querySelector(".cell-value")){n.querySelector(".cell-value").style.display="none";n.querySelector(".cell-input").style.display="inline-block",n.querySelector(".not-el-input")&&n.querySelector(".not-el-input").select()}return!1},shortcutField:function(e,t,n,r,i){e.field1={value:t,msg:""},e.field2={value:n,msg:""},e.field3={value:r,msg:""},e.field4={value:i,msg:""}},handleBlur:function(e,t){t.msg=""},unitQuerySearch:function(e,t){var n=[{value:"℃",label:"℃"},{value:"%",label:"%"},{value:"m",label:"m"},{value:"bar",label:"bar"},{value:"Pa",label:"Pa"},{value:"A",label:"A"},{value:"V",label:"V"},{value:"kW",label:"kW"},{value:"KWh",label:"KWh"}];t(e?n.filter(function(t){return t.value.toLowerCase().indexOf(0===e.toLowerCase())}):n)},handleChange:function(e,t){return e[t].msg="","sensorTypeId"===t?(e.decimal.msg="",e.unit.msg="",e.unit.value="",this.pointTypeOptions[0].options.forEach(function(t){t.ID===e.sensorTypeId.value&&(e.typeSection="state",e.decimal.value="")}),this.pointTypeOptions[1].options.forEach(function(t){if(t.ID===e.sensorTypeId.value){e.typeSection="simulate",e.decimal.value=0;var n=[];t.Value&&(n=t.Value.split("|")),e.unitOptions=n}}),!1):("funcode"===t&&(1!==e.funcode.value&&2!==e.funcode.value||(e.datatype.value=7,e.datatype.msg="",e.orderStr.value="",e.orderStr.msg="",e.datas.value="",e.datas.msg="")),"datatype"===t&&""!==e.datas.msg?(6===e.datatype.value&&e.datas.value&&(e.datas.msg=""),6===e.datatype.value||e.datas.value||(e.datas.msg=""),!1):void("datatype"===t&&(1===e.datatype.value||2===e.datatype.value||6===e.datatype.value?e.orderStr={value:"AB",msg:""}:7===e.datatype.value?e.orderStr={value:"",msg:""}:e.orderStr={value:"ABCD",msg:""})))},exportExcel:function(){var e=this,t=n.i(w.b)(this.senserData);if(t.errPages.length)return this.$notify({title:"警告",message:"请修复第 "+t.errPages.join(", ")+" 页的错误",type:"warning",duration:1e4}),!1;setTimeout(function(){var t=XLSX.utils.table_to_book(document.querySelector("#excel-table")),n=XLSX.write(t,{bookType:"xlsx",type:"binary"});_.a.saveAs(new Blob([e.s2ab(n)],{type:"application/octet-stream"}),"File.xlsx")},0)},toJson:function(e){var t=[];return e.SheetNames.forEach(function(n){var r=XLSX.utils.sheet_to_row_object_array(e.Sheets[n]);r.length>0&&(t[n]=r)}),t},s2ab:function(e){var t=void 0;if("undefined"!=typeof ArrayBuffer){t=new ArrayBuffer(e.length);for(var n=new Uint8Array(t),r=0;r!==e.length;++r)n[r]=255&e.charCodeAt(r);return t}t=new Array(e.length);for(var i=0;i!==e.length;++i)t[i]=255&e.charCodeAt(i);return t},fetchDevice:function(){var e=this;this.loading=!0,n.i(y.I)(this.userId,this.searchType,this.pagination.currentPage,this.pagination.pageSize).then(function(t){var n=JSON.parse(t.data);n.success?(e.gatewayData=n.list,e.pagination.total=n.total):(e.gatewayData=[],e.pagination.total=0),e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error("服务器错误")})},fetchTemplateList:function(){var e=this;n.i(y.J)().then(function(t){var n=JSON.parse(t.data);n.success?e.templateTable=n.list:e.templateTable=[]}).catch(function(e){})},isEmptyObject:function(e){for(var t in e)return!1;return!0},fetchMQTTPointList:function(){var e=this;this.MQTTPointLoading=!0,n.i(x.c)({deviceId:this.gatewayForm.id,pageIndex:this.MQTTPointListPagination.current,pageSize:this.MQTTPointListPagination.size}).then(function(t){var n=t.data;200===n.Code?(e.MQTTPointList=n.Data.Data,e.MQTTPointListPagination.total=n.Data.TotalCount):e.MQTTPointList=[]}).catch(function(e){}).then(function(){e.MQTTPointLoading=!1})},fetchUserList:function(){var e=this;this.userFilterText===JSON.parse(sessionStorage.getItem("userInfo")).nickname&&(this.$message.info("不能分享给自己"),this.userFilterText=""),n.i(y.K)(this.currentTemplate.id,this.userFilterText).then(function(t){var n=JSON.parse(t.data);n.success?e.userList=n.list:e.userList=[]}).catch(function(e){})},getPointTypeLabel:function(e){var t="";return this.pointTypeOptions[0].options.forEach(function(n){n.ID===e&&(t=n.TypeName)}),this.pointTypeOptions[1].options.forEach(function(n){n.ID===e&&(t=n.TypeName)}),t},addformItem:function(){this.registerForm.numberList.push({value:""})}},beforeRouteLeave:function(e,t,n){"/backgroundConfig/senserList"!==e.path&&sessionStorage.removeItem("gatewayManage_pagination"),n()}}},1232:function(e,t,n){t=e.exports=n(539)(),t.push([e.i,'.machineList{padding:24px 32px;box-sizing:border-box;position:relative;overflow:hidden;border-radius:4px}.machineList .machineWrapper{color:#909399;margin-bottom:22px}.gatewayManager .file-btn{position:relative;overflow:hidden}.gatewayManager .file-btn input{position:absolute;top:0;right:0;left:0;bottom:0;opacity:0}.gatewayManager .el-tabs__nav-scroll{padding-left:40px;background:#fff}.gatewayManager .el-tabs__content{padding:10px 30px 20px}.gatewayManager .error{width:100%;height:25px}.gatewayManager .error:after{content:"";display:inline-block;width:6px;height:6px;background:red;border-radius:50%;position:absolute;right:17px;top:50%;transform:translateY(-50%);animation:shine 2s linear infinite}.gatewayManager .field-wrap{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.gatewayManager .field-wrap .el-dropdown{font-size:10px}.gatewayManager .shortcut-field{padding:5px;color:#399;cursor:pointer}.gatewayManager .el-table .cell{height:36px;line-height:36px}.gatewayManager .gmdialogtable input{padding:5px}.gatewayManager .gmdialogtable div.cell{padding-left:6px;padding-right:6px}.gatewayManager .cell-input{display:none}.gatewayManager .cell-input input{padding-left:7px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;background-image:none;border-radius:4px;border:1px solid #bfcbd9;box-sizing:border-box;color:#1f2d3d;font-size:inherit;line-height:1;outline:none;transition:border-color .2s cubic-bezier(.645,.045,.355,1);width:100%;height:22px}.gatewayManager .cell-input input:focus{outline:none;border-color:#20a0ff}.gatewayManager .table-head{text-align:right;margin:15px 5px}.gatewayManager .table-head .title{font-size:18px;float:left}.gatewayManager #senserTable .el-select input{height:25px}.gatewayManager #senserTable .cell *{outline:none}.gatewayManager .el-dialog__footer{text-align:center}.gatewayManager .online:before{background:green}.gatewayManager .offline:before,.gatewayManager .online:before{content:"";display:inline-block;width:.6em;height:.6em;margin-right:6px;border-radius:50%}.gatewayManager .offline:before{background:#dbdbdb}.gatewayManager .senser-template{width:900px}.share-dialog{width:393px}.share-dialog .el-dialog__header{padding:0}.share-dialog .search-result{margin-top:5px;padding:10px;border:1px solid #ccc;height:200px;border-radius:4px;overflow-y:auto}.share-dialog .result-item{display:inline-block;width:140px;height:50px;border:1px dashed #ccc;padding:5px;position:relative;line-height:40px;font-size:14px;background:#fff;margin:0 5px 10px;cursor:pointer}.share-dialog .is-member{cursor:not-allowed}.share-dialog .avatar{width:32px;height:32px;border-radius:50%;vertical-align:middle}.gatewayList,.templateList{border-radius:4px;overflow:hidden;padding:15px;margin:1px}.el-tabs--card>.el-tabs__header .el-tabs__item.is-active{border-top-width:2px;border-top-color:#399998;border-bottom-color:transparent}@keyframes shine{0%{box-shadow:0 0 0 0 rgba(235,10,10,.4)}to{box-shadow:0 0 0 10px hsla(0,7%,53%,0)}}.error-type{font-weight:600}.popover-visibility{visibility:hidden}.el-input-padding-0 input{padding:0 2px}.icon-what{transform:translateY(0);margin-left:10px;width:18px;height:18px;cursor:pointer}.icon-what:hover{color:#399}.tooltip-info-wrap{line-height:1.9}.tooltip-info-wrap .tooltip-title{border-bottom:1px dotted #c4c5c5;margin:10px 0}.tooltip-info-wrap p{padding-left:10px}',""])},1362:function(e,t,n){var r=n(1232);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(540)("74471aee",r,!0)},1520:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gatewayManager page-backgroundConfig"},[n("el-tabs",{on:{"tab-click":e.handleTabsSwitch},model:{value:e.tabsActive,callback:function(t){e.tabsActive=t},expression:"tabsActive"}},[n("el-tab-pane",{staticClass:"machineList bg-fff ",attrs:{label:"一体机",name:"third"}},[n("el-form",{attrs:{inline:"",size:"small"}},[n("el-form-item",{attrs:{label:"设备编号"}},[n("el-input",{attrs:{placeholder:"请输入"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchterminalList(t)}},model:{value:e.terminalParams.terminalNumber,callback:function(t){e.$set(e.terminalParams,"terminalNumber",t)},expression:"terminalParams.terminalNumber"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.registerDialog=!0}}},[e._v("\n            注册终端\n          ")]),e._v(" "),n("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.resetTable(t)}}},[e._v("\n            重置\n          ")])],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.machineLoading,expression:"machineLoading"}],staticStyle:{width:"100%"},attrs:{data:e.terminalData,"highlight-current-row":"","element-loading-text":"加载中..."}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"80px"}}),e._v(" "),n("el-table-column",{attrs:{prop:"terminalNumber",label:"设备编号",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"projectName",label:"注册项目",filters:e.filterList,"filter-method":e.filterTag}}),e._v(" "),n("el-table-column",{attrs:{prop:"status",label:"在线状态",filters:[{text:"在线",value:"2"},{text:"离线",value:"1"}],"filter-method":e.filterHandler},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:2===t.row.status?"":"danger",size:"small"}},[e._v("\n              "+e._s(2===t.row.status?"在线":"离线")+"\n            ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"amount",label:"电量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.amount+"%"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"temperature",label:"温度",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return e.checkhistoryLine(t,"温度")}}},[e._v("\n              "+e._s(t.row.temperature+"℃")+"\n            ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"humidity",label:"湿度",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return e.checkhistoryLine(t,"湿度")}}},[e._v("\n              "+e._s(t.row.humidity+"%")+"\n            ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:""}})],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"","current-page":e.terminalParams.pagesize,"page-sizes":[10,20,50,100],"page-size":e.terminalParams.show_number,layout:"total, sizes, prev, pager, next, jumper",total:e.terminaltableTotal},on:{"update:currentPage":function(t){return e.$set(e.terminalParams,"pagesize",t)},"update:current-page":function(t){return e.$set(e.terminalParams,"pagesize",t)},"size-change":e.handletermSizeChange,"current-change":e.handletermCurrentChange}})],1)],1),e._v(" "),n("el-tab-pane",{staticClass:"gatewayList bg-fff",attrs:{label:"网关列表",name:"first"}},[n("div",{staticStyle:{"margin-bottom":"18px"}},[n("el-radio-group",{attrs:{size:"small"},on:{change:e.fetchDevice},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},[n("el-radio-button",{attrs:{label:1}},[e._v("\n            查看全部\n          ")]),e._v(" "),n("el-radio-button",{attrs:{label:0}},[e._v("\n            在线\n          ")]),e._v(" "),n("el-radio-button",{attrs:{label:-1}},[e._v("\n            离线\n          ")])],1),e._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.$router.push("/terminalManage/addGateWay")}}},[n("c-svg",{attrs:{name:"plus"}}),e._v("\n          添加网关\n        ")],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.gatewayData,"element-loading-text":"加载中..."}},[n("el-table-column",{attrs:{sortable:"",label:"网关名称",prop:"NAME"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return e.goSenserList(r.id,r.PROTOCOL,r.DESCRIBES)}}},[e._v("\n              "+e._s(r.NAME)+"\n            ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{sortable:"",label:"网关类型",prop:"PROTOCOL"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",label:"序列号",prop:"DESCRIBES"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:{online:0===t.row.ConnectStatus,offline:0!==t.row.ConnectStatus}},[e._v(e._s(0===t.row.ConnectStatus?"在线":-1===t.row.ConnectStatus?"离线":(t.row.ConnectStatus,"异常")))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建时间",sortable:"",prop:"CREATE_TIME"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n            "+e._s("2000/01/01 00:00:00"===n.CREATE_TIME?"-":n.CREATE_TIME)+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"数据更新时间",sortable:"",prop:"DataUpdateDateTime"}}),e._v(" "),n("el-table-column",{attrs:{label:"所属项目",sortable:"",prop:"pname"}}),e._v(" "),n("el-table-column",{attrs:{label:"点位数量",sortable:"",prop:"pointCount"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["Modbus RTU"===t.row.PROTOCOL?n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return e.openDialog("configSenser",t.row.id,t.row.DESCRIBES,t.row.PID,t.row.dtype)}}},[e._v("\n              配置\n            ")]):e._e(),e._v(" "),"TCP RTU"===t.row.PROTOCOL?n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return e.openTcpDialog(t.row.id,t.row.DESCRIBES,t.row.PID,t.row.NAME)}}},[e._v("\n              配置\n            ")]):e._e(),e._v(" "),"MQTT"===t.row.PROTOCOL?n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return e.openMqttDialog(t.row)}}},[e._v("\n              配置\n            ")]):e._e(),e._v(" "),"MQTT"===t.row.PROTOCOL&&0===t.row.ConnectStatus?n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return e.resetMQTT(t.row)}}},[e._v("\n              重启\n            ")]):e._e(),e._v(" "),"MQTT"!==t.row.PROTOCOL?n("el-button",{staticClass:"btn-danger",attrs:{type:"text"},nativeOn:{click:function(n){return e.clickDel(t.row.id,t.$index,t.row.PROTOCOL)}}},[e._v("\n              删除\n            ")]):e._e()]}}])})],1),e._v(" "),n("el-pagination",{attrs:{background:"","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),e._v(" "),n("el-tab-pane",{staticClass:"templateList bg-fff",attrs:{label:"模板列表",name:"second"}},[n("div",{staticStyle:{"margin-bottom":"18px","text-align":"right"}},[n("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.openDialog("addTemplate")}}},[n("c-svg",{attrs:{name:"plus"}}),e._v("\n          添加模板\n        ")],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.templateTable}},[n("el-table-column",{attrs:{sortable:"",prop:"name",label:"模板名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"desc",label:"来源"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"ctime",label:"创建日期"}}),e._v(" "),n("el-table-column",{attrs:{sortable:"",prop:"num",label:"点位数量"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(n){return e.watchTemplate(t.row.id,t.row.type)}}},[e._v("\n              查看\n            ")]),e._v(" "),1===t.row.type?n("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(n){return e.openDialog("configTemplate",t.row.id)}}},[e._v("\n              编辑\n            ")]):e._e(),e._v(" "),1===t.row.type?n("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(n){return e.clickShareBtn(t.row.id)}}},[e._v("\n              分享\n            ")]):e._e(),e._v(" "),1===t.row.type?n("el-button",{staticClass:"btn-danger",attrs:{size:"mini",type:"text"},nativeOn:{click:function(n){return e.delTemplate(t.row.id)}}},[e._v("\n              删除\n            ")]):e._e()]}}])})],1)],1)],1),e._v(" "),n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.senserLoading,expression:"senserLoading"}],attrs:{"element-loading-text":"加载中...",title:"configSenser"===e.operationType?"编辑网关":"点位模板",visible:e.configDialogVisible,width:"99%",top:"1vh","custom-class":1===e.currentGateway.dType?"senser-template":""},on:{"update:visible":function(t){e.configDialogVisible=t},close:e.dialogClose}},[n("el-row",{attrs:{gutter:30}},["configSenser"===e.operationType?n("el-form",{ref:"gatewayForm",attrs:{model:e.gatewayForm,rules:e.gatewayFormRules,"label-width":"120px",inline:""}},[n("el-col",{attrs:{md:24}},[n("el-form-item",{attrs:{label:"网关名称",prop:"name"}},[n("el-input",{model:{value:e.gatewayForm.name,callback:function(t){e.$set(e.gatewayForm,"name","string"==typeof t?t.trim():t)},expression:"gatewayForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"网关序列号",prop:"serialNumber"}},[n("el-input",{model:{value:e.gatewayForm.serialNumber,callback:function(t){e.$set(e.gatewayForm,"serialNumber","string"==typeof t?t.trim():t)},expression:"gatewayForm.serialNumber"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"所属项目",prop:"project"}},[n("el-input",{attrs:{disabled:""},model:{value:e.gatewayForm.projectName,callback:function(t){e.$set(e.gatewayForm,"projectName","string"==typeof t?t.trim():t)},expression:"gatewayForm.projectName"}})],1)],1)],1):e._e(),e._v(" "),"configSenser"!==e.operationType?n("div",{staticStyle:{"text-align":"center"}},[n("span",[e._v("模板名称：  ")]),e._v(" "),n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入模板名称"},model:{value:e.currentTemplate.name,callback:function(t){e.$set(e.currentTemplate,"name","string"==typeof t?t.trim():t)},expression:"currentTemplate.name"}})],1):e._e(),e._v(" "),n("el-col",[n("div",{staticClass:"table-head"},[n("span",{staticClass:"title",style:{paddingBottom:e.currentGateway.editable?"":"20px"}},[e._v("\n            点位列表\n            "),n("el-tooltip",{attrs:{placement:"right"}},[n("div",{staticClass:"tooltip-info-wrap",attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"tooltip-title"},[e._v("\n                  唯一性：\n                ")]),e._v(" "),n("p",[e._v("\n                  不可同时存在两个以上具有相同从站地址、功能码、寄存器地址、地址位的传感器\n                ")]),e._v(" "),n("div",{staticClass:"tooltip-title"},[e._v("\n                  映射：\n                ")]),e._v(" "),n("p",[e._v("\n                  映射参数由4个数{x1,x2,x3,x4}组成,如: -1000~1000 -> -100 ~ 100 表示将原始值缩小10倍\n                  "),n("br"),e._v("\n                  计算公式为 [输出值] = (x4-x3)/(x2-x1)*([原始值]-x1)+x3\n                ")]),e._v(" "),n("div",{staticClass:"tooltip-title"},[e._v("\n                  从站地址：\n                ")]),e._v(" "),n("p",[e._v("一个 1-255 之间的整数。")]),e._v(" "),n("div",{staticClass:"tooltip-title"},[e._v("\n                  寄存器地址：\n                ")]),e._v(" "),n("p",[e._v("一个 0-65535 之间的整数。")]),e._v(" "),n("div",{staticClass:"tooltip-title"},[e._v("\n                  采样周期：\n                ")]),e._v(" "),n("p",[e._v("可选择 10s/30s/60s/120s 或自定义(手动输入60的倍数)。")]),e._v(" "),n("div",{staticClass:"tooltip-title"},[e._v("\n                  功能码 / 数据格式 / 字节顺序 / 地址位：\n                ")]),e._v(" "),n("p",[n("ul",[n("li",[e._v("\n                      当功能码为 01读写/02只读时，数据格式只能为 bit，字节顺序和地址位只能为 空。\n                    ")]),e._v(" "),n("li",[e._v("\n                      当功能码为 03读写/04只读，数据格式为 16位有符号数(默认)/16位无符号数时，\n                      "),n("br"),e._v("\n                      字节顺序可选 AB(默认)/BA，地址位只能为空。\n                    ")]),e._v(" "),n("li",[e._v("\n                      当功能码为 03读写/04只读，数据格式为 16位按位读取时，字节顺序可选 AB(默认)/BA，\n                      "),n("br"),e._v("\n                      地址位非空，默认 1。\n                    ")]),e._v(" "),n("li",[e._v("\n                      当功能码为 03读写/04只读，数据格式为 32位有符号数/32位无符号数/32位浮点型数时，\n                      "),n("br"),e._v("\n                      字节顺序可选 ABCD(默认)/CDAB/BADC/DCBA，地址位只能为 空。\n                    ")])])])]),e._v(" "),n("c-svg",{attrs:{name:"what","class-name":"icon-what"}})],1)],1),e._v(" "),e.currentGateway.editable?n("div",[n("el-tooltip",{attrs:{placement:"top",effect:"light",content:"在点位列表中添加一行"}},[n("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){return e.clickAddRow(t)}}},[e._v("\n                添加点位\n              ")])],1),e._v(" "),n("el-tooltip",{attrs:{placement:"top",effect:"light"}},[n("div",{staticStyle:{"text-align":"center","font-size":"12px"},attrs:{slot:"content"},slot:"content"},[e._v("\n                通过Excel样表"),n("br"),e._v("编辑点位并上传"),n("br"),n("a",{staticStyle:{color:"#399998"},attrs:{href:"javascript:;"},on:{click:e.downloadTemplate}},[e._v("样式表下载"),n("c-svg",{attrs:{name:"download"}})],1)]),e._v(" "),1!==e.currentGateway.dType?n("el-button",{staticClass:"file-btn",attrs:{size:"small"}},[e._v("\n                上传Excel\n                "),e.configDialogVisible?n("input",{attrs:{id:"fileInput",type:"file",multiple:"false",accept:".xlsx"},on:{change:function(t){return e.uploadExcel(t)}}}):e._e()]):e._e()],1),e._v(" "),1!==e.currentGateway.dType?n("el-tooltip",{attrs:{placement:"top",effect:"light",content:"将点位列表导出成 Excel"}},[n("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){return e.exportExcel(t)}}},[e._v("\n                导出Excel\n              ")])],1):e._e(),e._v(" "),n("el-tooltip",{attrs:{placement:"top",effect:"light",content:"验证点位列表数据的正确性"}},[n("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){return e.handleCheckData(t)}}},[e._v("\n                数据校验\n              ")])],1),e._v(" "),n("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"click"}},[n("el-button",{attrs:{size:"small"}},[e._v("\n                批量操作"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.batchPaste(t)}}},[e._v("\n                  批量复制\n                ")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){return e.batchDel(t)}}},[e._v("\n                  批量删除\n                ")])],1)],1)],1):e._e()]),e._v(" "),n("el-table",{key:"byTemplate",ref:"custom-table",staticClass:"gmdialogtable",staticStyle:{width:"100%"},attrs:{id:"senserTable","highlight-current-row":"",data:e.senserTable,"empty-text":"暂无配置信息"},on:{"selection-change":e.handleSelectionChange,"cell-click":e.handleCellClick}},[n("el-table-column",{attrs:{type:"selection",align:"center",width:"35"}}),e._v(" "),e.currentGateway.editable?n("el-table-column",{attrs:{type:"index",width:"50"}}):e._e(),e._v(" "),e.currentGateway.editable?n("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"5px"},attrs:{type:"danger",round:"",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(n){return e.deleteSenser(t.$index,t.row.pointID)}}}),e._v(" "),"2"!==t.row.pointType?n("el-button",{staticStyle:{padding:"5px"},attrs:{size:"mini",round:""},nativeOn:{click:function(n){return e.copyRow(t.row)}}},[n("c-svg",{attrs:{name:"paste"}})],1):e._e(),e._v(" "),n("el-button",{staticStyle:{padding:"5px"},attrs:{type:"success",round:"",size:"mini",icon:t.row.editable?"el-icon-check":"el-icon-edit"},nativeOn:{click:function(n){return e.clickEdit(t.row)}}})]}}],null,!1,1448805253)}):e._e(),e._v(" "),n("el-table-column",{attrs:{label:"传感器名称","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{"popper-class":t.row.sensorName.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.sensorName.msg))]),e._v(" "),n("div",{class:{error:t.row.sensorName.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-input",{attrs:{size:"mini"},on:{blur:function(n){return e.handleBlur(n,t.row.sensorName)}},model:{value:t.row.sensorName.value,callback:function(n){e.$set(t.row.sensorName,"value","string"==typeof n?n.trim():n)},expression:"scope.row['sensorName'].value"}}):n("span",[e._v(e._s(t.row.sensorName.value))])],1)])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"点位类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{"popper-class":t.row.sensorTypeId.msg+"popover-visibility",placement:"top",trigger:"hover"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.sensorTypeId.msg))]),e._v(" "),n("div",{class:{error:t.row.sensorTypeId.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-select",{attrs:{filterable:"",placeholder:"请选择点位类型",size:"small"},on:{change:function(n){return e.handleChange(t.row,"sensorTypeId")}},model:{value:t.row.sensorTypeId.value,callback:function(n){e.$set(t.row.sensorTypeId,"value",n)},expression:"scope.row['sensorTypeId'].value"}},e._l(e.pointTypeOptions,function(t){return n("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(r){return n("el-option",{key:r.ID,attrs:{label:r.TypeName,value:r.ID}},[n("span",{staticStyle:{float:"left","margin-right":"25px"}},[e._v(e._s(r.TypeName))]),e._v(" "),"状态量"===t.label?n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(r.Value))]):e._e()])}),1)}),1):n("div",[e._v("\n                    "+e._s(e.getPointTypeLabel(t.row.sensorTypeId.value))+"\n                  ")])],1)])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"小数位",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{"popper-class":t.row.decimal.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.decimal.msg))]),e._v(" "),n("div",{class:{error:t.row.decimal.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-select",{attrs:{disabled:"state"===t.row.typeSection,size:"mini"},on:{change:function(n){return e.handleChange(t.row,"decimal")}},model:{value:t.row.decimal.value,callback:function(n){e.$set(t.row.decimal,"value",n)},expression:"scope.row['decimal'].value"}},[n("el-option",{attrs:{label:"0",value:0}}),e._v(" "),n("el-option",{attrs:{label:"1",value:1}}),e._v(" "),n("el-option",{attrs:{label:"2",value:2}}),e._v(" "),n("el-option",{attrs:{label:"3",value:3}}),e._v(" "),n("el-option",{attrs:{label:"4",value:4}})],1):n("span",[e._v(e._s(t.row.decimal.value))])],1)])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"单位",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{"popper-class":t.row.unit.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.unit.msg))]),e._v(" "),n("div",{class:{error:t.row.unit.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-select",{staticClass:"inline-input",attrs:{disabled:"state"===t.row.typeSection,size:"mini",placeholder:"请选择"},on:{blur:function(n){return e.handleBlur(n,t.row.unit)}},model:{value:t.row.unit.value,callback:function(n){e.$set(t.row.unit,"value","string"==typeof n?n.trim():n)},expression:"scope.row['unit'].value"}},e._l(t.row.unitOptions,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1):n("span",[e._v(e._s(t.row.unit.value))])],1)])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"映射","min-width":"240"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"!==t.row.pointType?n("el-popover",{attrs:{"popper-class":t.row.field1.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.field1.msg))]),e._v(" "),n("div",{class:{error:t.row.field1.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("div",{staticClass:"field-wrap"},[n("el-input",{staticClass:"el-input-padding-0",attrs:{size:"mini",placeholder:"x1"},on:{blur:function(n){return e.handleBlur(n,t.row.field1)}},model:{value:t.row.field1.value,callback:function(n){e.$set(t.row.field1,"value","string"==typeof n?n.trim():n)},expression:"scope.row['field1'].value"}}),e._v("~\n                    "),n("el-input",{staticClass:"el-input-padding-0",attrs:{size:"mini",placeholder:"x2"},on:{blur:function(n){return e.handleBlur(n,t.row.field1)}},model:{value:t.row.field2.value,callback:function(n){e.$set(t.row.field2,"value","string"==typeof n?n.trim():n)},expression:"scope.row['field2'].value"}}),e._v("→\n                    "),n("el-input",{staticClass:"el-input-padding-0",attrs:{size:"mini",placeholder:"x3"},on:{blur:function(n){return e.handleBlur(n,t.row.field1)}},model:{value:t.row.field3.value,callback:function(n){e.$set(t.row.field3,"value","string"==typeof n?n.trim():n)},expression:"scope.row['field3'].value"}}),e._v("~\n                    "),n("el-input",{staticClass:"el-input-padding-0",attrs:{size:"mini",placeholder:"x4"},on:{blur:function(n){return e.handleBlur(n,t.row.field1)}},model:{value:t.row.field4.value,callback:function(n){e.$set(t.row.field4,"value","string"==typeof n?n.trim():n)},expression:"scope.row['field4'].value"}}),e._v(" "),n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-caret-bottom shortcut-field"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){return e.shortcutField(t.row,"","","","")}}},[e._v("\n                          无\n                        ")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){return e.shortcutField(t.row,-1e3,1e3,-100,100)}}},[e._v("\n                          -1000 ~ 1000 → -100 ~ 100\n                        ")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){return e.shortcutField(t.row,-1e4,1e4,-1e3,1e3)}}},[e._v("\n                          -10000 ~ 10000 → -1000 ~ 1000\n                        ")])],1)],1)],1):n("span",[e._v(e._s(""!==t.row.field1.value&&null!==t.row.field1.value?t.row.field1.value+" ~ "+t.row.field2.value+" → "+t.row.field3.value+" ~ "+t.row.field4.value:""))])])]):n("span",[e._v("****")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"从站地址",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"!==t.row.pointType?n("el-popover",{attrs:{"popper-class":t.row.address.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.address.msg))]),e._v(" "),n("div",{class:{error:t.row.address.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-input",{attrs:{size:"mini",placeholder:"1-255"},on:{blur:function(n){return e.handleBlur(n,t.row.address)}},model:{value:t.row.address.value,callback:function(n){e.$set(t.row.address,"value","string"==typeof n?n.trim():n)},expression:"scope.row['address'].value"}}):n("span",[e._v(e._s(t.row.address.value))])],1)]):n("span",[e._v("****")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"功能码",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"!==t.row.pointType?n("el-popover",{attrs:{"popper-class":t.row.funcode.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.funcode.msg))]),e._v(" "),n("div",{class:{error:t.row.funcode.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(n){return e.handleChange(t.row,"funcode")}},model:{value:t.row.funcode.value,callback:function(n){e.$set(t.row.funcode,"value",n)},expression:"scope.row['funcode'].value"}},[n("el-option",{attrs:{label:"01读写",value:1}}),e._v(" "),n("el-option",{attrs:{label:"02只读",value:2}}),e._v(" "),n("el-option",{attrs:{label:"03读写",value:3}}),e._v(" "),n("el-option",{attrs:{label:"04只读",value:4}})],1):n("span",[e._v(e._s(1===t.row.funcode.value?"01读写":2===t.row.funcode.value?"02只读":3===t.row.funcode.value?"03读写":4===t.row.funcode.value?"04只读":""))])],1)]):n("span",[e._v("****")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"寄存器地址",width:"85"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"!==t.row.pointType?n("el-popover",{attrs:{"popper-class":t.row.bias.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.bias.msg))]),e._v(" "),n("div",{class:{error:t.row.bias.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-input",{attrs:{size:"mini",placeholder:"0-65535"},on:{blur:function(n){return e.handleBlur(n,t.row.bias)}},model:{value:t.row.bias.value,callback:function(n){e.$set(t.row.bias,"value","string"==typeof n?n.trim():n)},expression:"scope.row['bias'].value"}}):n("span",[e._v(e._s(t.row.bias.value))])],1)]):n("span",[e._v("****")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"数据格式",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"!==t.row.pointType?n("el-popover",{attrs:{"popper-class":t.row.datatype.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.datatype.msg))]),e._v(" "),n("div",{class:{error:t.row.datatype.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(n){return e.handleChange(t.row,"datatype")}},model:{value:t.row.datatype.value,callback:function(n){e.$set(t.row.datatype,"value",n)},expression:"scope.row['datatype'].value"}},[n("el-option",{attrs:{label:"16位有符号数",value:1}}),e._v(" "),n("el-option",{attrs:{label:"16位无符号数",value:2}}),e._v(" "),n("el-option",{attrs:{label:"32位有符号数",value:3}}),e._v(" "),n("el-option",{attrs:{label:"32位无符号数",value:4}}),e._v(" "),n("el-option",{attrs:{label:"32位浮点型数",value:5}}),e._v(" "),n("el-option",{attrs:{label:"16位按位读取",value:6}}),e._v(" "),n("el-option",{attrs:{label:"bit",value:7}})],1):n("span",[e._v(e._s(1===t.row.datatype.value?"16位有符号数":2===t.row.datatype.value?"16位无符号数":3===t.row.datatype.value?"32位有符号数":4===t.row.datatype.value?"32位无符号数":5===t.row.datatype.value?"32位浮点型数":6===t.row.datatype.value?"16位按位读取":7===t.row.datatype.value?"bit":""))])],1)]):n("span",[e._v("****")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"字节顺序",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"!==t.row.pointType?n("el-popover",{attrs:{"popper-class":t.row.orderStr.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.orderStr.msg))]),e._v(" "),n("div",{class:{error:t.row.orderStr.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(n){return e.handleChange(t.row,"orderStr")}},model:{value:t.row.orderStr.value,callback:function(n){e.$set(t.row.orderStr,"value",n)},expression:"scope.row['orderStr'].value"}},[n("el-option",{attrs:{label:"空",value:""}}),e._v(" "),n("el-option",{attrs:{label:"ABCD",value:"ABCD"}}),e._v(" "),n("el-option",{attrs:{label:"CDAB",value:"CDAB"}}),e._v(" "),n("el-option",{attrs:{label:"BADC",value:"BADC"}}),e._v(" "),n("el-option",{attrs:{label:"DCBA",value:"DCBA"}}),e._v(" "),n("el-option",{attrs:{label:"AB",value:"AB"}}),e._v(" "),n("el-option",{attrs:{label:"BA",value:"BA"}})],1):n("span",[e._v(e._s(t.row.orderStr.value))])],1)]):n("span",[e._v("****")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"地址位",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"!==t.row.pointType?n("el-popover",{attrs:{"popper-class":t.row.datas.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.datas.msg))]),e._v(" "),n("div",{class:{error:t.row.datas.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(n){return e.handleChange(t.row,"datas")}},model:{value:t.row.datas.value,callback:function(n){e.$set(t.row.datas,"value",n)},expression:"scope.row['datas'].value"}},[n("el-option",{attrs:{label:"空",value:""}}),e._v(" "),e._l(16,function(e){return n("el-option",{key:e,attrs:{label:e,value:e.toString()}})})],2):n("span",[e._v(e._s(t.row.datas.value))])],1)]):n("span",[e._v("****")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"采集周期/s",width:"85"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{"popper-class":t.row.cycle.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.cycle.msg))]),e._v(" "),n("div",{class:{error:t.row.cycle.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-autocomplete",{attrs:{size:"mini","fetch-suggestions":function(e,t){t([{value:"10"},{value:"30"},{value:"60"},{value:"120"}])},placeholder:"可输入"},on:{blur:function(n){return e.handleBlur(n,t.row.cycle)}},model:{value:t.row.cycle.value,callback:function(n){e.$set(t.row.cycle,"value","string"==typeof n?n.trim():n)},expression:"scope.row['cycle'].value"}}):n("span",[e._v(e._s(t.row.cycle.value))])],1)])]}}])})],1),e._v(" "),n("table",{staticStyle:{display:"none"},attrs:{id:"excel-table"}},[n("tr",[n("th",[e._v("传感器名称")]),e._v(" "),n("th",[e._v("点位类型")]),e._v(" "),n("th",[e._v("小数位")]),e._v(" "),n("th",[e._v("单位")]),e._v(" "),n("th",[e._v("映射")]),e._v(" "),n("th",[e._v("从站地址")]),e._v(" "),n("th",[e._v("功能码")]),e._v(" "),n("th",[e._v("寄存器地址")]),e._v(" "),n("th",[e._v("数据格式")]),e._v(" "),n("th",[e._v("字节顺序")]),e._v(" "),n("th",[e._v("地址位")]),e._v(" "),n("th",[e._v("采集周期/s")])]),e._v(" "),e._l(e.senserData,function(t,r){return n("tr",{key:r},[n("td",[e._v(e._s(t.sensorName.value))]),e._v(" "),n("td",[e._v(e._s(e.getPointTypeLabel(t.sensorTypeId.value)))]),e._v(" "),n("td",[e._v(e._s(t.decimal.value))]),e._v(" "),n("td",[e._v(e._s(t.unit.value))]),e._v(" "),n("td",[e._v(e._s(""!==t.field1.value?t.field1.value+"/"+t.field2.value+"/"+t.field3.value+"/"+t.field4.value:""))]),e._v(" "),n("td",[e._v(e._s(t.address.value))]),e._v(" "),n("td",[e._v(e._s(1===t.funcode.value?"01读写":2===t.funcode.value?"02只读":3===t.funcode.value?"03读写":4===t.funcode.value?"04只读":""))]),e._v(" "),n("td",[e._v(e._s(t.bias.value))]),e._v(" "),n("td",[e._v("\n              "+e._s(1===t.datatype.value?"16位有符号数":2===t.datatype.value?"16位无符号数":3===t.datatype.value?"32位有符号数":4===t.datatype.value?"32位无符号数":5===t.datatype.value?"32位浮点型数":6===t.datatype.value?"16位按位读取":7===t.datatype.value?"bit":"")+"\n            ")]),e._v(" "),n("td",[e._v(e._s(t.orderStr.value))]),e._v(" "),n("td",[e._v(e._s(t.datas.value))]),e._v(" "),n("td",[e._v(e._s(t.cycle.value))])])})],2)],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.senserPagination.total,"page-sizes":[10,20,50,100],"page-size":e.senserPagination.pageSize,"current-page":e.senserPagination.currentPage},on:{"update:currentPage":function(t){return e.$set(e.senserPagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.senserPagination,"currentPage",t)},"size-change":e.handleSenserSizeChange,"current-change":e.handleSenserCurrentChange}})],1),e._v(" "),e.currentGateway.editable?n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{loading:e.submitLoading,type:"primary"},nativeOn:{click:function(t){return e.submitSenserData("gatewayForm")}}},[e._v("保存配置")])],1):e._e()],1),e._v(" "),n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.tcpSenserLoading,expression:"tcpSenserLoading"}],attrs:{"element-loading-text":"加载中...",title:"编辑网关",visible:e.configTcpDialogVisible,width:"99%",top:"1vh","custom-class":"senser-template"},on:{"update:visible":function(t){e.configTcpDialogVisible=t},close:e.dialogClose}},[n("el-row",{attrs:{gutter:30}},["configSenser"===e.operationType?n("el-form",{ref:"gatewayForm",attrs:{model:e.gatewayForm,rules:e.gatewayFormRules,"label-width":"120px",inline:""}},[n("el-col",{attrs:{md:24}},[n("el-form-item",{attrs:{label:"网关名称",prop:"name"}},[n("el-input",{model:{value:e.gatewayForm.name,callback:function(t){e.$set(e.gatewayForm,"name","string"==typeof t?t.trim():t)},expression:"gatewayForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"网关序列号",prop:"serialNumber"}},[n("el-input",{model:{value:e.gatewayForm.serialNumber,callback:function(t){e.$set(e.gatewayForm,"serialNumber","string"==typeof t?t.trim():t)},expression:"gatewayForm.serialNumber"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"所属项目",prop:"project"}},[n("el-input",{attrs:{disabled:""},model:{value:e.gatewayForm.projectName,callback:function(t){e.$set(e.gatewayForm,"projectName","string"==typeof t?t.trim():t)},expression:"gatewayForm.projectName"}})],1)],1)],1):e._e(),e._v(" "),n("el-col",[n("div",{staticClass:"table-head"},[n("div",[n("el-tooltip",{attrs:{placement:"top",effect:"light",content:"在点位列表中添加一行"}},[n("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){return e.clickAddRow(t)}}},[e._v("\n                添加点位\n              ")])],1),e._v(" "),n("el-tooltip",{attrs:{placement:"top",effect:"light",content:"验证点位列表数据的正确性"}},[n("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){return e.handleCheckData(t)}}},[e._v("\n                数据校验\n              ")])],1)],1)]),e._v(" "),n("el-table",{key:"byTemplate",ref:"custom-table",staticClass:"gmdialogtable",staticStyle:{width:"100%"},attrs:{id:"senserTable","highlight-current-row":"",data:e.tcpSenserTable,"empty-text":"暂无配置信息"},on:{"selection-change":e.handleSelectionChange,"cell-click":e.handleCellClick}},[n("el-table-column",{attrs:{prop:"channel",label:"通道号",width:"100",type:"index"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.tcpSenserPagination.pageSize*(e.tcpSenserPagination.currentPage-1)+1+t.$index))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"145"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"5px"},attrs:{type:"danger",round:"",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(n){return e.deleteSenser(t.$index,t.row.pointID)}}}),e._v(" "),"2"!==t.row.pointType?n("el-button",{staticStyle:{padding:"5px"},attrs:{size:"mini",round:""},nativeOn:{click:function(n){return e.copyRow(t.row)}}},[n("c-svg",{attrs:{name:"paste"}})],1):e._e(),e._v(" "),n("el-button",{staticStyle:{padding:"5px"},attrs:{type:"success",round:"",size:"mini",icon:t.row.editable?"el-icon-check":"el-icon-edit"},nativeOn:{click:function(n){return e.clickEdit(t.row)}}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"点位类型",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{"popper-class":t.row.sensorTypeId.msg+"popover-visibility",placement:"top",trigger:"hover"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.sensorTypeId.msg))]),e._v(" "),n("div",{class:{error:t.row.sensorTypeId.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-select",{attrs:{filterable:"",placeholder:"请选择点位类型",size:"small"},on:{change:function(n){return e.handleChange(t.row,"sensorTypeId")}},model:{value:t.row.sensorTypeId.value,callback:function(n){e.$set(t.row.sensorTypeId,"value",n)},expression:"scope.row['sensorTypeId'].value"}},e._l(e.pointTypeOptions,function(t){return n("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(r){return n("el-option",{key:r.ID,attrs:{label:r.TypeName,value:r.ID}},[n("span",{staticStyle:{float:"left","margin-right":"25px"}},[e._v(e._s(r.TypeName))]),e._v(" "),"状态量"===t.label?n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(r.Value))]):e._e()])}),1)}),1):n("div",[e._v("\n                    "+e._s(e.getPointTypeLabel(t.row.sensorTypeId.value))+"\n                  ")])],1)])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"传感器名称","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{"popper-class":t.row.sensorName.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.sensorName.msg))]),e._v(" "),n("div",{class:{error:t.row.sensorName.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-input",{attrs:{size:"mini"},on:{blur:function(n){return e.handleBlur(n,t.row.sensorName)}},model:{value:t.row.sensorName.value,callback:function(n){e.$set(t.row.sensorName,"value","string"==typeof n?n.trim():n)},expression:"scope.row['sensorName'].value"}}):n("span",[e._v(e._s(t.row.sensorName.value))])],1)])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"小数位"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{"popper-class":t.row.decimal.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.decimal.msg))]),e._v(" "),n("div",{class:{error:t.row.decimal.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-select",{attrs:{disabled:"state"===t.row.typeSection,size:"mini"},on:{change:function(n){return e.handleChange(t.row,"decimal")}},model:{value:t.row.decimal.value,callback:function(n){e.$set(t.row.decimal,"value",n)},expression:"scope.row['decimal'].value"}},[n("el-option",{attrs:{label:"0",value:0}}),e._v(" "),n("el-option",{attrs:{label:"1",value:1}}),e._v(" "),n("el-option",{attrs:{label:"2",value:2}}),e._v(" "),n("el-option",{attrs:{label:"3",value:3}}),e._v(" "),n("el-option",{attrs:{label:"4",value:4}})],1):n("span",[e._v(e._s(t.row.decimal.value))])],1)])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{"popper-class":t.row.unit.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.unit.msg))]),e._v(" "),n("div",{class:{error:t.row.unit.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("el-select",{staticClass:"inline-input",attrs:{disabled:"state"===t.row.typeSection,size:"mini",placeholder:"请选择"},on:{blur:function(n){return e.handleBlur(n,t.row.unit)}},model:{value:t.row.unit.value,callback:function(n){e.$set(t.row.unit,"value","string"==typeof n?n.trim():n)},expression:"scope.row['unit'].value"}},e._l(t.row.unitOptions,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1):n("span",[e._v(e._s(t.row.unit.value))])],1)])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"映射","min-width":"240"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"!==t.row.pointType?n("el-popover",{attrs:{"popper-class":t.row.field1.msg+"popover-visibility",trigger:"hover",placement:"top"}},[n("p",[n("span",{staticClass:"error-type"},[e._v("错误原因： ")]),e._v(" "+e._s(t.row.field1.msg))]),e._v(" "),n("div",{class:{error:t.row.field1.msg},attrs:{slot:"reference"},slot:"reference"},[t.row.editable?n("div",{staticClass:"field-wrap"},[n("el-input",{staticClass:"el-input-padding-0",attrs:{size:"mini",placeholder:"x1"},on:{blur:function(n){return e.handleBlur(n,t.row.field1)}},model:{value:t.row.field1.value,callback:function(n){e.$set(t.row.field1,"value","string"==typeof n?n.trim():n)},expression:"scope.row['field1'].value"}}),e._v("~\n                    "),n("el-input",{staticClass:"el-input-padding-0",attrs:{size:"mini",placeholder:"x2"},on:{blur:function(n){return e.handleBlur(n,t.row.field1)}},model:{value:t.row.field2.value,callback:function(n){e.$set(t.row.field2,"value","string"==typeof n?n.trim():n)},expression:"scope.row['field2'].value"}}),e._v("→\n                    "),n("el-input",{staticClass:"el-input-padding-0",attrs:{size:"mini",placeholder:"x3"},on:{blur:function(n){return e.handleBlur(n,t.row.field1)}},model:{value:t.row.field3.value,callback:function(n){e.$set(t.row.field3,"value","string"==typeof n?n.trim():n)},expression:"scope.row['field3'].value"}}),e._v("~\n                    "),n("el-input",{staticClass:"el-input-padding-0",attrs:{size:"mini",placeholder:"x4"},on:{blur:function(n){return e.handleBlur(n,t.row.field1)}},model:{value:t.row.field4.value,callback:function(n){e.$set(t.row.field4,"value","string"==typeof n?n.trim():n)},expression:"scope.row['field4'].value"}}),e._v(" "),n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-caret-bottom shortcut-field"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){return e.shortcutField(t.row,"","","","")}}},[e._v("\n                          无\n                        ")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){return e.shortcutField(t.row,-1e3,1e3,-100,100)}}},[e._v("\n                          -1000 ~ 1000 → -100 ~ 100\n                        ")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){return e.shortcutField(t.row,-1e4,1e4,-1e3,1e3)}}},[e._v("\n                          -10000 ~ 10000 → -1000 ~ 1000\n                        ")])],1)],1)],1):n("span",[e._v(e._s(""!==t.row.field1.value&&null!==t.row.field1.value?t.row.field1.value+" ~ "+t.row.field2.value+" → "+t.row.field3.value+" ~ "+t.row.field4.value:""))])])]):n("span",[e._v("****")])]}}])})],1)],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tcpSenserPagination.total,"page-sizes":[10,20,50,100],"page-size":e.tcpSenserPagination.pageSize,"current-page":e.tcpSenserPagination.currentPage},on:{"update:currentPage":function(t){return e.$set(e.tcpSenserPagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.tcpSenserPagination,"currentPage",t)},"size-change":e.handleSenserSizeChange,"current-change":e.handleSenserCurrentChange}})],1),e._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{loading:e.tcpSubmitLoading,type:"primary"},nativeOn:{click:function(t){return e.submitTcpGateway("gatewayForm")}}},[e._v("保存配置")])],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.mqttDialogVisible,title:"编辑",width:"1000px"},on:{"update:visible":function(t){e.mqttDialogVisible=t},close:function(){e.gatewayForm.configString=""}}},[n("el-form",{ref:"gatewayForm",attrs:{model:e.gatewayForm,rules:e.gatewayFormRules,"label-width":"100px",inline:""}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{md:24}},[n("el-form-item",{attrs:{label:"网关名称",prop:"name"}},[n("el-input",{model:{value:e.gatewayForm.name,callback:function(t){e.$set(e.gatewayForm,"name","string"==typeof t?t.trim():t)},expression:"gatewayForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"网关序列号",prop:"serialNumber"}},[n("el-input",{attrs:{disabled:""},model:{value:e.gatewayForm.serialNumber,callback:function(t){e.$set(e.gatewayForm,"serialNumber","string"==typeof t?t.trim():t)},expression:"gatewayForm.serialNumber"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"所属项目",prop:"project"}},[n("el-input",{attrs:{disabled:""},model:{value:e.gatewayForm.projectName,callback:function(t){e.$set(e.gatewayForm,"projectName","string"==typeof t?t.trim():t)},expression:"gatewayForm.projectName"}})],1)],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[n("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#233","before-upload":e.uploadMQTTConfig,accept:"application/json"}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e.gatewayForm.configString?n("em",[e._v("配置文件已上传，确认后点击『更新配置』按钮")]):n("span",[e._v("将JSON配置文件拖到此处，或"),n("em",[e._v("点击上传")])])]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n            只能上传JSON文件，且符合相关规则\n          ")])])],1),e._v(" "),n("div",{staticStyle:{margin:"30px 40px 0 40px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.MQTTPointLoading,expression:"MQTTPointLoading"}],staticStyle:{width:"100%"},attrs:{data:e.MQTTPointList,"highlight-current-row":""}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"80px"}}),e._v(" "),n("el-table-column",{attrs:{label:"点位名称",prop:"pointName"}}),e._v(" "),n("el-table-column",{attrs:{label:"数值",prop:"value"}}),e._v(" "),n("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",[e._v("更新时间")]),e._v(" "),n("el-button",{staticStyle:{float:"right","font-size":"20px"},attrs:{icon:"el-icon-refresh",type:"text"},nativeOn:{click:function(t){return e.fetchMQTTPointList(e.gatewayForm.id)}}})]}},{key:"default",fn:function(t){var n=t.row;return[e._v("\n              "+e._s(e.dayjs(n.updateDateTime).format("YYYY-MM-DD HH:mm:ss"))+"\n            ")]}}])})],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"","current-page":e.MQTTPointListPagination.current,"page-size":e.MQTTPointListPagination.size,layout:"total, prev, pager, next, jumper",total:e.MQTTPointListPagination.total},on:{"update:currentPage":function(t){return e.$set(e.MQTTPointListPagination,"current",t)},"update:current-page":function(t){return e.$set(e.MQTTPointListPagination,"current",t)},"current-change":e.fetchMQTTPointList}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.updateMQTT(t)}}},[e._v("更新配置")])],1)],1),e._v(" "),n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.templateDialogLoading,expression:"templateDialogLoading"}],attrs:{"element-loading-text":"加载中...",title:e.currentTemplate.name,visible:e.templateDialog,width:1===e.currentTemplate.type?"90%":"50%","custom-class":"template-dialog"},on:{"update:visible":function(t){e.templateDialog=t},close:e.templateDialogClose}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.senserData,stripe:"",border:""}},[n("el-table-column",{attrs:{type:"index"}}),e._v(" "),n("el-table-column",{attrs:{label:"传感器名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.sensorName.value)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"点位类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.getPointTypeLabel(t.row.sensorTypeId.value))+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"小数位"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.decimal.value)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.unit.value)+"\n        ")]}}])}),e._v(" "),1===e.currentTemplate.type?n("el-table-column",{attrs:{label:"映射"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.field1.value?t.row.field1.value+"/"+t.row.field2.value+"/"+t.row.field3.value+"/"+t.row.field4.value:"")+"\n        ")]}}],null,!1,671306085)}):e._e(),e._v(" "),1===e.currentTemplate.type?n("el-table-column",{attrs:{label:"从站地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.address.value)+"\n        ")]}}],null,!1,1850971950)}):e._e(),e._v(" "),1===e.currentTemplate.type?n("el-table-column",{attrs:{label:"功能码"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1===t.row.funcode.value?"01读写":2===t.row.funcode.value?"02只读":3===t.row.funcode.value?"03读写":4===t.row.funcode.value?"04只读":"")+"\n        ")]}}],null,!1,846435869)}):e._e(),e._v(" "),1===e.currentTemplate.type?n("el-table-column",{attrs:{label:"寄存器地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.bias.value)+"\n        ")]}}],null,!1,3347522945)}):e._e(),e._v(" "),1===e.currentTemplate.type?n("el-table-column",{attrs:{label:"数据格式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1===t.row.datatype.value?"16位有符号数":2===t.row.datatype.value?"16位无符号数":3===t.row.datatype.value?"32位有符号数":4===t.row.datatype.value?"32位无符号数":5===t.row.datatype.value?"32位浮点型数":6===t.row.datatype.value?"16位按位读取":7===t.row.datatype.value?"bit":"")+"\n        ")]}}],null,!1,2038340772)}):e._e(),e._v(" "),1===e.currentTemplate.type?n("el-table-column",{attrs:{label:"字节顺序"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.orderStr.value)+"\n        ")]}}],null,!1,1600370915)}):e._e(),e._v(" "),1===e.currentTemplate.type?n("el-table-column",{attrs:{label:"地址位"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.datas.value)+"\n        ")]}}],null,!1,707626491)}):e._e(),e._v(" "),n("el-table-column",{attrs:{label:"采集周期/s"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.cycle.value)+"\n        ")]}}])})],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.shareDialog,"show-close":!1,"custom-class":"share-dialog"},on:{"update:visible":function(t){e.shareDialog=t}}},[n("el-input",{attrs:{size:"small","suffix-icon":"el-icon-search",clearable:"",placeholder:"邮箱/手机/用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchUsers(t)}},model:{value:e.userFilterText,callback:function(t){e.userFilterText="string"==typeof t?t.trim():t},expression:"userFilterText"}}),e._v(" "),n("div",{staticStyle:{color:"#83a1a5","padding-top":"15px"}},[e._v("\n      成员列表：\n    ")]),e._v(" "),n("div",{staticClass:"search-result thin-scroll"},[e._l(e.userList,function(t,r){return~~t.user!==e.userId?n("div",{directives:[{name:"show",rawName:"v-show",value:e.userList.length,expression:"userList.length"}],key:r,staticClass:"result-item",on:{click:function(n){return e.selectUser(t)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.check,expression:"item.check"}],staticClass:"corner-label"},[n("c-svg",{attrs:{name:"true"}})],1),e._v(" "),n("img",{staticClass:"avatar",attrs:{src:e.port+"/Img/Person/"+t.avatar}}),e._v(" "),n("span",[e._v(e._s(t.nickname))])]):e._e()}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.userList.length&&e.userFilterText,expression:"!userList.length && userFilterText"}],staticStyle:{padding:"70px","text-align":"center"}},[e._v("\n        没有找到该用户\n      ")]),e._v(" "),e.userList.length||e.userFilterText?e._e():n("div",{staticStyle:{color:"#ccc","text-align":"center","line-height":"200px"}},[e._v("\n        可通过搜索进行分享\n      ")])],2)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.registerDialog,title:"注册终端",width:"500px","show-close":!1},on:{"update:visible":function(t){e.registerDialog=t},closed:e.closeregisterDialog}},[n("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"label-width":"80px",rules:e.registerterminalRules}},[n("el-row",{attrs:{gutter:25}},[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"项目选择",prop:"project"}},[n("el-select",{staticStyle:{display:"block"},attrs:{placeholder:"请选择"},model:{value:e.registerForm.project,callback:function(t){e.$set(e.registerForm,"project",t)},expression:"registerForm.project"}},e._l(e.proList,function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.label}})}),1)],1)],1)],1),e._v(" "),n("el-row",{attrs:{gutter:25}},[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"终端编号"}},[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(t){return e.addformItem(t)}}},[e._v("\n              新增\n            ")])],1)],1)],1),e._v(" "),n("el-row",{attrs:{gutter:25}},[n("el-col",{attrs:{span:18}},e._l(e.registerForm.numberList,function(t,r){return n("el-form-item",{key:t.id,attrs:{prop:"numberList."+r+".value",rules:{validator:e.checkterminalNum,trigger:"blur"}}},[n("el-input",{attrs:{placeholder:"请输入终端编号"},model:{value:t.value,callback:function(n){e.$set(t,"value","string"==typeof n?n.trim():n)},expression:"item.value"}})],1)}),1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.registerDialog=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.registerTerminal}},[e._v("注册")])],1)],1),e._v(" "),n("HistoryDialog",{ref:"historyDialog",attrs:{"point-ids":e.pointList}})],1)},staticRenderFns:[]}},541:function(e,t,n){n(708);var r=n(38)(n(706),n(709),null,null);e.exports=r.exports},587:function(e,t,n){n(1362);var r=n(38)(n(1088),n(1520),null,null);e.exports=r.exports},684:function(e,t,n){var r=n(133)("meta"),i=n(58),o=n(69),a=n(59).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(68)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},p=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},f=function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},h=function(e){return u&&d.NEED&&l(e)&&!o(e,r)&&c(e),e},d=e.exports={KEY:r,NEED:!1,fastKey:p,getWeak:f,onFreeze:h}},685:function(e,t,n){var r=n(58);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},686:function(e,t,n){var r=n(70);e.exports=Array.isArray||function(e){return"Array"==r(e)}},687:function(e,t,n){e.exports={default:n(688),__esModule:!0}},688:function(e,t,n){n(215),n(134),n(213),n(698),n(701),n(700),n(699),e.exports=n(14).Set},689:function(e,t,n){var r=n(210);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},690:function(e,t,n){var r=n(60),i=n(136),o=n(72),a=n(90),s=n(692);e.exports=function(e,t){var n=1==e,l=2==e,u=3==e,c=4==e,p=6==e,f=5==e||p,h=t||s;return function(t,s,d){for(var g,v,m=o(t),y=i(m),b=r(s,d,3),_=a(y.length),w=0,S=n?h(t,_):l?h(t,0):void 0;_>w;w++)if((f||w in y)&&(g=y[w],v=b(g,w,m),e))if(n)S[w]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return w;case 2:S.push(g)}else if(c)return!1;return p?-1:u||c?c:S}}},691:function(e,t,n){var r=n(58),i=n(686),o=n(21)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},692:function(e,t,n){var r=n(691);e.exports=function(e,t){return new(r(e))(t)}},693:function(e,t,n){"use strict";var r=n(59).f,i=n(214),o=n(212),a=n(60),s=n(211),l=n(210),u=n(137),c=n(216),p=n(217),f=n(61),h=n(684).fastKey,d=n(685),g=f?"_s":"size",v=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var c=e(function(e,r){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=r&&l(r,n,e[u],e)});return o(c.prototype,{clear:function(){for(var e=d(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=d(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[g]--}return!!r},forEach:function(e){d(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(d(this,t),e)}}),f&&r(c.prototype,"size",{get:function(){return d(this,t)[g]}}),c},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[g]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=d(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?c(0,n.k):"values"==t?c(0,n.v):c(0,[n.k,n.v]):(e._t=void 0,c(1))},n?"entries":"values",!n,!0),p(t)}}},694:function(e,t,n){var r=n(135),i=n(689);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},695:function(e,t,n){"use strict";var r=n(15),i=n(39),o=n(684),a=n(68),s=n(52),l=n(212),u=n(210),c=n(211),p=n(58),f=n(89),h=n(59).f,d=n(690)(0),g=n(61);e.exports=function(e,t,n,v,m,y){var b=r[e],_=b,w=m?"set":"add",S=_&&_.prototype,T={};return g&&"function"==typeof _&&(y||S.forEach&&!a(function(){(new _).entries().next()}))?(_=t(function(t,n){c(t,_,e,"_c"),t._c=new b,void 0!=n&&u(n,m,t[w],t)}),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in S&&(!y||"clear"!=e)&&s(_.prototype,e,function(n,r){if(c(this,_,e),!t&&y&&!p(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),y||h(_.prototype,"size",{get:function(){return this._c.size}})):(_=v.getConstructor(t,e,m,w),l(_.prototype,n),o.NEED=!0),f(_,e),T[e]=_,i(i.G+i.W+i.F,T),y||v.setStrong(_,e,m),_}},696:function(e,t,n){"use strict";var r=n(39),i=n(71),o=n(60),a=n(210);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,l=arguments[1];return i(this),t=void 0!==l,t&&i(l),void 0==e?new this:(n=[],t?(r=0,s=o(l,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},697:function(e,t,n){"use strict";var r=n(39);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},698:function(e,t,n){"use strict";var r=n(693),i=n(685);e.exports=n(695)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},699:function(e,t,n){n(696)("Set")},700:function(e,t,n){n(697)("Set")},701:function(e,t,n){var r=n(39);r(r.P+r.R,"Set",{toJSON:n(694)("Set")})},702:function(e,t,n){var r,i=i||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},c=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){l(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},f=function(t,l,f){f||(t=p(t));var h,d=this,g=t.type,v="application/octet-stream"===g,m=function(){c(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,i)return h=n().createObjectURL(t),void setTimeout(function(){r.href=h,r.download=l,o(r),m(),u(h),d.readyState=d.DONE});!function(){if((s||v&&a)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=s?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,d.readyState=d.DONE,m()},r.readAsDataURL(t),void(d.readyState=d.INIT)}if(h||(h=n().createObjectURL(t)),v)e.location.href=h;else{e.open(h,"_blank")||(e.location.href=h)}d.readyState=d.DONE,m(),u(h)}()},h=f.prototype,d=function(e,t,n){return new f(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,d)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=i:null!==n(703)&&null!==n(704)&&void 0!==(r=function(){return i}.call(t,n,t,e))&&(e.exports=r)},703:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},704:function(e,t){(function(t){e.exports=t}).call(t,{})},705:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var r=n(32),i=n(219),o=n.n(i),a=function(e){var t=e.companyId,n=e.waybillNumOrTagId,i=e.pageIndex,o=e.pageSize;return r.a.get(BASE_URI+"/api/Device/GetWaybillPage",{params:{companyId:t,waybillNumOrTagId:n,pageIndex:i,pageSize:o}})},s=function(e){var t=e.start,n=e.end,i=e.pointIdList,a=e.tmes;return r.a.get(BASE_URI+"/api/Device/GetPointData",{params:{start:t,end:n,pointIdList:i,tmes:a},paramsSerializer:function(e){return o.a.stringify(e,{indices:!1})}})}},706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(218),i=n.n(r),o=n(220),a=n.n(o),s=n(687),l=n.n(s),u=n(132),c=n.n(u),p=n(705),f=n(702),h=(n.n(f),n(138));t.default={props:{type:{type:String,default:function(){""}},pointIds:{type:Array,default:function(){return[]}},interval:{type:Number,default:function(){return 5}},startTime:{type:Date,default:function(){return new Date((new Date).getTime()-864e5)}},endTime:{type:Date,default:function(){return new Date}}},data:function(){return{dialogVisible:!1,form:{interval:this.interval,startTime:this.startTime,endTime:this.endTime},formRules:{startTime:[{type:"date",required:!0,message:"选择开始时间",trigger:"change"}],endTime:[{type:"date",required:!0,message:"选择结束时间",trigger:"change"}],interval:[{required:!0,message:"输入时间间隔(整数)",type:"number",trigger:"blur"}]},pointType:0,showStatistical:!1,showThreshold:!1,pdfLoading:!1,chartLoading:!1}},computed:{industry:function(){return this.$store.state.app.company.industry}},watch:{pointIds:function(e){e&&e.length&&this.fetchChartSeries()},startTime:function(e){this.form.startTime=e},endTime:function(e){this.form.endTime=e},interval:function(e){this.form.interval=e},dialogVisible:function(e){var t=this;e&&this.$nextTick(function(){t.myChart=echarts.init(document.getElementById("echart-wrap"))})}},mounted:function(){this.chartSeries=null},beforeDestroy:function(){},methods:{toggleDialog:function(){this.dialogVisible=!this.dialogVisible},thresholdChang:function(e){this.drawChart()},statisticalChange:function(e){this.drawChart()},search:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.fetchChartSeries()})},downPDF:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.pdfLoading=!0,t.fetchChartSeries())})},downImg:function(){n.i(f.saveAs)(n.i(h.b)(this.myChart.getDataURL()),"chart.jpg")},downloadExcel:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var n=t._dateFormat(t.form.startTime,"YYYY-MM-DD HH:mm"),r=t._dateFormat(t.form.endTime,"YYYY-MM-DD HH:mm");window.location.href=_host+"/api/Report/downHistoryData?id="+t.pointIds.join(",")+"&start="+n+"&end="+r+"&tmes="+t.form.interval}})},fetchChartSeries:function(){var e=this;this.chartLoading=!0,n.i(p.a)({start:this._dateFormat(this.form.startTime,"YYYY-MM-DD HH:mm"),end:this._dateFormat(this.form.endTime,"YYYY-MM-DD HH:mm"),pointIdList:this.pointIds,tmes:this.form.interval}).then(function(t){if(200===t.data.Code){e.dataSource=t.data.Data;var n=t.data.Data.PointList;if(!n)return e.$message("无点位数据"),!1;var r=n.map(function(e){return e.PointType});if(e.legends=n.map(function(e){return e.PointName}),1!==[].concat(c()(new l.a(r))).length)return e.$message({message:"选中的多个点位不是同一类型，无法合理显示",type:"info",duration:5e3}),!1;e.pointType=r[0],0===e.pointType&&(e.showStatistical=!0);var i=[];n.forEach(function(e){for(var t=0,n=e.DataList.length;t<n;t++)e.DataList[t]=[e.DataList[t].Time,e.DataList[t].Value];e.unitMap={},e.UnitMap&&e.UnitMap.forEach(function(t){e.unitMap[t.key]=t.value}),i.push({animation:!1,name:e.PointName,type:"line",unit:e.Unit,step:1===e.PointType?"start":"",smooth:!1,yAxisData:1===e.PointType?a()(e.unitMap).map(function(e){return parseInt(e)}):"",pointType:e.PointType,unitMap:e.unitMap,data:e.DataList,markLine:{data:[]},statisticalmarkLineData:[{type:"average",name:"",lineStyle:{type:"dashed"},label:{normal:{formatter:function(e){return e.value.toFixed(1)}}}}],ThresholdmarkLineData:function(){var t=[];return e.SuperLowerLimit&&t.push({yAxis:e.SuperLowerLimit,lineStyle:{color:"#B03A5B",type:"dotted"},label:{show:!0,position:"middle",formatter:function(t){return"下下限("+e.PointName+"): "+e.SuperLowerLimit}}}),e.SuperUpperLimit&&t.push({yAxis:e.SuperUpperLimit,lineStyle:{color:"#B03A5B",type:"dotted"},label:{show:!0,position:"middle",formatter:function(t){return"上上限("+e.PointName+"): "+e.SuperUpperLimit}}}),e.UpperLimit&&t.push({yAxis:e.UpperLimit,lineStyle:{color:"#B03A5B",type:"dotted"},label:{show:!0,position:"middle",formatter:function(t){return"上限("+e.PointName+"): "+e.UpperLimit}}}),e.LowerLimit&&t.push({yAxis:e.LowerLimit,lineStyle:{color:"#B03A5B",type:"dotted"},label:{show:!0,position:"middle",formatter:function(t){return"下限("+e.PointName+"): "+e.LowerLimit}}}),t}(),markPointCopy:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},superLowerLimit:e.SuperLowerLimit,superUpperLimit:e.SuperUpperLimit,upperLimit:e.UpperLimit,lowerLimit:e.LowerLimit})}),e.chartSeries=i,e.drawChart()}else e.$message.error("历史数据查询失败")}).catch(function(t){e.$message.error("历史数据查询失败")}).finally(function(){e.chartLoading=!1})},drawChart:function(){var e=this;this.myChart&&this.myChart.clear(),this.chartSeries.forEach(function(t){if(t.markLine.data=[],e.showStatistical){var n;t.markPoint=t.markPointCopy,(n=t.markLine.data).push.apply(n,c()(t.statisticalmarkLineData))}else delete t.markPoint;if(e.showThreshold){var r;t.ThresholdmarkLineData.length||(1===e.chartSeries.length?e.$message("选中点位没有设置阈值"):e.$message("存在点位没有设置阈值")),(r=t.markLine.data).push.apply(r,c()(t.ThresholdmarkLineData))}});var t={color:["#2297E8","#48CE38","#F8D156","#FD9827","#9764DC","#1FCA6A"],grid:{left:60,right:100,bottom:80,top:40},dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"empty",handleIcon:"M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"90%"},{type:"inside",xAxisIndex:0,filterMode:"empty"}],legend:{show:!0},tooltip:{trigger:"axis",formatter:function(t){for(var n=e._dateFormat(t[0].axisValue,"YYYY-MM-DD HH:mm")+"<br/>",r=0;r<t.length;r++)n+=function(e){return'<i class="circlepoint" style="background: '+e+'"></i>'}(t[r].color)+" "+t[r].seriesName+"："+(null===t[r].value[1]?"无数据":t[r].value[1])+" <br/>";return n}},xAxis:{type:"time",axisLabel:{formatter:function(t,n){return e._dateFormat(t,"YYYY-MM-DD HH:mm")}},splitLine:{show:!1}},series:this.chartSeries},r={};if(r=this.chartSeries.length&&this.chartSeries[0].step?{yAxis:{type:"value",name:this.chartSeries[0].data.length?"单位:"+this.chartSeries[0].unit:"",boundaryGap:["20%","20%"],minInterval:1,axisLabel:{show:!0,formatter:function(t){if(e.chartSeries[0].unitMap[t])return e.chartSeries[0].unitMap[t]}}}}:{yAxis:{type:"value",name:this.chartSeries[0].data.length?"单位:"+this.chartSeries[0].unit:"",scale:!1,boundaryGap:["20%","20%"]}},1!==this.chartSeries[0].pointType&&t.dataZoom.push({type:"slider",yAxisIndex:0,filterMode:"empty",handleIcon:"M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"90%"}),this.myChart.setOption(i()(t,r)),!0===this.pdfLoading){this.dataSource.startTime=this._dateFormat(this.form.startTime,"YYYY-MM-DD HH:mm"),this.dataSource.endTime=this._dateFormat(this.form.endTime,"YYYY-MM-DD HH:mm");try{var o=n.i(h.c)(this.myChart.getDataURL(),this.dataSource),a=new URLSearchParams;a.append("html",o),fetch("https://sinocold.net:8443/api/Report/DownloadDataPDF",{method:"POST",body:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()}).then(function(e){window.open("https://sinocold.net:8443"+e)}).catch(function(t){e.$message.error("导出失败")}).finally(function(){e.pdfLoading=!1})}catch(e){this.pdfLoading=!1,this.$message.error("导出失败")}}},historyDialogClose:function(){this.myChart&&this.myChart.clear(),this.chartSeries=[],this.showStatistical=!1,this.showThreshold=!1,this.form.interval=this.interval,this.form.startTime=new Date((new Date).getTime()-864e5),this.form.endTime=new Date}}}},707:function(e,t,n){t=e.exports=n(539)(),t.push([e.i,".history-dialog-wrap .circlepoint{display:inline-block;width:.6em;height:.6em;margin-right:5px;border-radius:50%}",""])},708:function(e,t,n){var r=n(707);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(540)("060cc275",r,!0)},709:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"历史数据",visible:e.dialogVisible,width:"1300px",top:"10vh"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.historyDialogClose}},[n("div",{staticClass:"history-dialog-wrap"},[n("div",[n("el-form",{ref:"form",staticStyle:{"margin-left":"45px"},attrs:{model:e.form,rules:e.formRules,inline:"",size:"medium","hide-required-asterisk":!0}},[n("el-form-item",{attrs:{label:"时间范围：",prop:"startTime"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm",editable:!1,type:"datetime",placeholder:"选择日期"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),e._v(" "),n("span",{staticStyle:{"margin-right":"10px",position:"relative",top:"9px"}},[e._v("-")]),e._v(" "),n("el-form-item",{attrs:{prop:"endTime"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd HH:mm",editable:!1,type:"datetime",placeholder:"选择日期"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"间隔：",prop:"interval"}},[n("el-input",{attrs:{placeholder:"分钟"},model:{value:e.form.interval,callback:function(t){e.$set(e.form,"interval",e._n("string"==typeof t?t.trim():t))},expression:"form.interval"}})],1),e._v(" "),n("span",{staticStyle:{position:"relative",top:"9px"}},[e._v("分钟")]),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"20px"}},[n("el-button",{attrs:{loading:e.chartLoading,size:"medium",type:"primary"},nativeOn:{click:function(t){return e.search("form")}}},[e._v("\n            查看数据\n          ")])],1),e._v(" "),n("div",[n("el-form-item",{attrs:{label:"数据操作："}},[1!==e.industry?n("el-button",{attrs:{size:"medium"},nativeOn:{click:function(t){return e.downloadExcel("form")}}},[e._v("\n              下载excel\n            ")]):e._e(),e._v(" "),n("el-button",{attrs:{loading:e.pdfLoading,size:"medium"},nativeOn:{click:function(t){return e.downPDF("form")}}},[e._v("\n              下载pdf\n            ")]),e._v(" "),n("el-button",{attrs:{size:"medium"},nativeOn:{click:function(t){return e.downImg(t)}}},[e._v("\n              下载图表\n            ")])],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"15px"},attrs:{label:"显示统计"}},[n("el-switch",{staticStyle:{"margin-left":"10px",position:"relative",top:"-3px"},attrs:{disabled:1===e.pointType},on:{change:e.statisticalChange},model:{value:e.showStatistical,callback:function(t){e.showStatistical=t},expression:"showStatistical"}})],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"15px"},attrs:{label:"显示阈值"}},[n("el-switch",{staticStyle:{"margin-left":"10px",position:"relative",top:"-3px"},attrs:{disabled:1===e.pointType},on:{change:e.thresholdChang},model:{value:e.showThreshold,callback:function(t){e.showThreshold=t},expression:"showThreshold"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"history-chart"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.chartLoading,expression:"chartLoading"}],staticStyle:{"min-width":"400px",height:"450px"},attrs:{id:"echart-wrap","element-loading-text":"加载中..."}})])])])},staticRenderFns:[]}},711:function(e,t,n){"use strict";n.d(t,"p",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"o",function(){return a}),n.d(t,"i",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"n",function(){return u}),n.d(t,"h",function(){return c}),n.d(t,"g",function(){return p}),n.d(t,"f",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"b",function(){return d}),n.d(t,"l",function(){return g}),n.d(t,"m",function(){return v}),n.d(t,"k",function(){return m}),n.d(t,"d",function(){return y}),n.d(t,"j",function(){return b});var r=n(32),i=function(e){return r.a.get("/api/project/loadSite",{params:{uid:e}})},o=function(e){return r.a.post("/api/project/addProject",e)},a=function(e){return r.a.post("/api/project/upProject",e)},s=function(e,t){return r.a.get("/api/project/delProject",{params:{pid:e,pwd:t}})},l=function(e,t){return r.a.get("/api/project/projectShow",{params:{page:e,num:t}})},u=function(e,t){return r.a.get("/api/project/queryProject",{params:{pid:e,uid:t}})},c=function(){return r.a.get("/api/project/getTagByUid")},p=function(e){return r.a.get("/api/project/getTag",{params:{pid:e}})},f=function(e,t){return r.a.get("/api/project/delete",{params:{pid:e,id:t}})},h=function(e,t){return r.a.get("/api/project/addTag",{params:{pid:e,tag:t}})},d=function(e){return r.a.get("/api/project/getDeviceTree",{params:{project:e}})},g=function(e,t){return r.a.get("/api/project/getDevice",{params:{project:e,user:t}})},v=function(e){return r.a.post("/api/project/updateDevOrPoint",e)},m=function(e,t){return r.a.get("/api/project/getUserbyPro",{params:{project:e,inp:t}})},y=function(e){return r.a.get("/api/project/Signout",{params:{project:e}})},b=function(e,t,n){return r.a.get("/api/project/assignMent",{params:{project:e,user:t,pwd:n}})}},714:function(e,t,n){"use strict";var r=n(740);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},715:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},716:function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}var o=n(732),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=i),r(a,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},721:function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},722:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return c}),n.d(t,"i",function(){return p}),n.d(t,"j",function(){return f}),n.d(t,"f",function(){return h});var r=n(32),i=function(e){return r.a.post("/api/PointType/PointTypeInsert",e)},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r.a.get("/api/PointType/PointTypeList",{params:{projectId:e,TypeName:t}})},a=function(e){return r.a.post("/api/PointType/PointTypeDelete",e)},s=function(e,t){return r.a.get("/api/PointType/PointTypeQuery",{params:{ID:e,projectId:t}})},l=function(e){return r.a.post("/api/PointType/PointTypeUpdate",e)},u=function(e){return r.a.post("/api/EditPoint/GetModePointType",e)},c=function(e){return r.a.post("/api/EditPoint/GetModePointUnit",e)},p=function(e){return r.a.post("/api/EditPoint/updateDmpSetS",e)},f=function(e){return r.a.post("/api/EditPoint/QueryModelSWList",e)},h=function(e){return r.a.post("/api/EditPoint/GetProjectdmpTable",e)}},723:function(e,t,n){"use strict";n.d(t,"I",function(){return i}),n.d(t,"w",function(){return o}),n.d(t,"B",function(){return a}),n.d(t,"x",function(){return s}),n.d(t,"v",function(){return l}),n.d(t,"i",function(){return u}),n.d(t,"L",function(){return c}),n.d(t,"h",function(){return p}),n.d(t,"A",function(){return f}),n.d(t,"l",function(){return h}),n.d(t,"y",function(){return d}),n.d(t,"k",function(){return g}),n.d(t,"j",function(){return v}),n.d(t,"g",function(){return m}),n.d(t,"c",function(){return y}),n.d(t,"d",function(){return b}),n.d(t,"b",function(){return _}),n.d(t,"a",function(){return w}),n.d(t,"f",function(){return S}),n.d(t,"e",function(){return T}),n.d(t,"H",function(){return x}),n.d(t,"p",function(){return k}),n.d(t,"n",function(){return E}),n.d(t,"m",function(){return I}),n.d(t,"o",function(){return D}),n.d(t,"F",function(){return O}),n.d(t,"J",function(){return P}),n.d(t,"z",function(){return C}),n.d(t,"G",function(){return L}),n.d(t,"M",function(){return A}),n.d(t,"E",function(){return M}),n.d(t,"K",function(){return N}),n.d(t,"C",function(){return j}),n.d(t,"D",function(){return R}),n.d(t,"u",function(){return B}),n.d(t,"q",function(){return U}),n.d(t,"r",function(){return F}),n.d(t,"t",function(){return z}),n.d(t,"s",function(){return $});var r=n(32),i=function(e,t,n,i){return r.a.get("/api/DeviceInfo/ShowDevice_List",{params:{uid:e,type:t,page:n,pnum:i}})},o=function(e){return r.a.post("/api/DeviceInfo/AddDevicePoint",e)},a=function(e){return r.a.get("/api/DeviceInfo/devDeleteTCP",{params:{ID:e}})},s=function(e){return r.a.get("/api/DeviceInfo/GetDevice_TCPConfig",{params:{deviceID:e}})},l=function(e){return r.a.get("/api/DeviceInfo/CkDeviceNo",{params:{deviceno:e}})},u=function(e,t){return r.a.get("/api/DeviceInfo/ControlDown",{params:{pointID:e,writeData:t}})},c=function(e){return r.a.post("/api/DeviceInfo/addDevicesNew",e)},p=function(e){return r.a.get("/api/DeviceInfo/queryDevicesIndexNew",{params:{deviceId:e}})},f=function(e){return r.a.get("/api/DeviceInfo/delDevicesNew",{params:{deviceId:e}})},h=function(e){return r.a.get("/api/DeviceInfo/delSensorNEW",{params:{SensorId:e}})},d=function(e){return r.a.get("/api/DeviceInfo/GetDevice_Config",{params:{deviceId:e}})},g=function(e){return r.a.post("/api/DeviceInfo/saveModbus",e)},v=function(e){return r.a.get("/api/DeviceInfo/QueryModbus",{params:{id:e}})},m=function(e,t,n){return r.a.get("/api/DeviceInfo/getInfoById",{params:{mtid:e,project:t,name:n}})},y=function(e){return r.a.post("/api/DeviceInfo/addModel",e)},b=function(e){return r.a.get("/api/DeviceInfo/deleteModel",{params:{mtid:e}})},_=function(e){return r.a.post("/api/DeviceInfo/updateModel",e)},w=function(){return r.a.get("/api/DeviceInfo/getBigInfo")},S=function(e){return r.a.get("/api/DeviceInfo/getSmallInfo",{params:{bid:e}})},T=function(e){return r.a.post("/api/DeviceInfo/addDeviceInfo",e)},x=function(e){return r.a.post("/api/DeviceInfo/updateDevicesNEW",e)},k=function(e){return r.a.post("/api/DeviceInfo/updateDevice",e)},E=function(e){return r.a.get("/api/DeviceInfo/deleteDevice",{params:{id:e}})},I=function(e){return r.a.post("/api/deviceInfo/imgUrl",e,{headers:{"Content-Type":"multipart/form-data"}})},D=function(e){return r.a.post("/api/DeviceInfo/FileUrl",e,{headers:{"Content-Type":"multipart/form-data"}})},O=function(e){return r.a.post("/api/DeviceInfo/addTemplate",e)},P=function(){return r.a.get("/api/DeviceInfo/getTempByUid")},C=function(e){return r.a.get("/api/DeviceInfo/getTempById",{params:{tids:e}})},L=function(e){return r.a.post("/api/DeviceInfo/updateTemplate",e)},A=function(e){return r.a.get("/api/DeviceInfo/getTempByType",{params:{inp:e}})},M=function(e){return r.a.get("/api/DeviceInfo/deleteTemplate",{params:{tid:e}})},N=function(e,t){return r.a.get("/api/DeviceInfo/getUserbyPro",{params:{tid:e,inp:t}})},j=function(e,t){return r.a.get("/api/DeviceInfo/regionUser",{params:{tid:e,uids:t}})},R=function(e,t){return r.a.get("/api/DeviceInfo/deleteUser",{params:{tid:e,uids:t}})},B=function(e){return r.a.get("/api/DeviceInfo/Get_Device_contactsList",{params:{mtid:e}})},U=function(e){return r.a.post("/api/DeviceInfo/Add_Device_contacts",e)},F=function(e){return r.a.get("/api/DeviceInfo/Delete_Device_contacts",{params:{id:e}})},z=function(e){return r.a.get("/api/Maintenance_team/QueryUser",{params:{screen:e}})},$=function(e,t,n){return r.a.get("/api/DeviceInfo/getDeviceByMtid",{params:{mtid:e,project:t,name:n}})}},729:function(e,t,n){"use strict";e.exports=n(972)()?Symbol:n(974)},732:function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,r):"string"==typeof t?c(e,t,n):h(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function u(e,t){if(s(t),e=i(e,t<0?0:0|d(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function p(e,t){var n=t.length<0?0:0|d(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=p(e,t),e}function h(e,t){if(o.isBuffer(t)){var n=0|d(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Q(t.length)?i(e,0):p(e,t);if("Buffer"===t.type&&Z(t.data))return p(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function v(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return D(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}var u;if(i){var c=-1;for(u=n;u<s;u++)if(o(e,u)===o(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===l)return c*a}else-1!==c&&(u-=u-c),c=-1}else for(n+l>s&&(n=s-l),u=n;u>=0;u--){for(var p=!0,f=0;f<l;f++)if(o(e,u+f)!==o(t,f)){p=!1;break}if(p)return u}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function S(e,t,n,r){return K(Y(t,e.length-n),e,n,r)}function T(e,t,n,r){return K(W(t),e,n,r)}function x(e,t,n,r){return T(e,t,n,r)}function k(e,t,n,r){return K(V(t),e,n,r)}function E(e,t,n,r){return K(H(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,n))}function D(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var l,u,c,p;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128==(192&l)&&(p=(31&o)<<6|63&l)>127&&(a=p);break;case 3:l=e[i+1],u=e[i+2],128==(192&l)&&128==(192&u)&&(p=(15&o)<<12|(63&l)<<6|63&u)>2047&&(p<55296||p>57343)&&(a=p);break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128==(192&l)&&128==(192&u)&&128==(192&c)&&(p=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c)>65535&&p<1114112&&(a=p)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return O(r)}function O(e){var t=e.length;if(t<=X)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=X));return n}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function L(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=q(e[o]);return i}function A(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function z(e){if(e=$(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function $(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function V(e){return G.toByteArray(z(e))}function K(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Q(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var G=n(813),J=n(827),Z=n(814);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return l(null,e,t,n)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?D(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,l=Math.min(a,s),u=this.slice(r,i),c=e.slice(t,n),p=0;p<l;++p)if(u[p]!==c[p]){a=u[p],s=c[p];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){N(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){N(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:Y(new o(e,r).toString()),l=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%l]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(53))},733:function(e,t,n){"use strict";var r,i=n(821),o=n(846),a=n(952),s=n(849);r=e.exports=function(e,t){var n,r,a,l,u;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],null==e?(n=a=!0,r=!1):(n=s.call(e,"c"),r=s.call(e,"e"),a=s.call(e,"w")),u={value:t,configurable:n,enumerable:r,writable:a},l?i(o(l),u):u},r.gs=function(e,t,n){var r,l,u,c;return"string"!=typeof e?(u=n,n=t,t=e,e=null):u=arguments[3],null==t?t=void 0:a(t)?null==n?n=void 0:a(n)||(u=n,n=void 0):(u=t,t=n=void 0),null==e?(r=!0,l=!1):(r=s.call(e,"c"),l=s.call(e,"e")),c={get:t,set:n,configurable:r,enumerable:l},u?i(o(u),c):c}},734:function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);u.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a.nextTick(o,this)}function o(e){e.end()}var a=n(757),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var l=n(753);l.inherits=n(715);var u=n(859),c=n(861);l.inherits(r,u);for(var p=s(c.prototype),f=0;f<p.length;f++){var h=p[f];r.prototype[h]||(r.prototype[h]=c.prototype[h])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},740:function(e,t,n){"use strict";var r=n(844)();e.exports=function(e){return e!==r&&null!==e}},753:function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function u(e){return void 0===e}function c(e){return"[object RegExp]"===v(e)}function p(e){return"object"==typeof e&&null!==e}function f(e){return"[object Date]"===v(e)}function h(e){return"[object Error]"===v(e)||e instanceof Error}function d(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function v(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=l,t.isUndefined=u,t.isRegExp=c,t.isObject=p,t.isDate=f,t.isError=h,t.isFunction=d,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(t,n(732).Buffer)},755:function(e,t,n){"use strict";function r(e){console&&console.warn}function i(){i.init.call(this)}function o(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function a(e,t,n,i){var a,s,l;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),l=s[t]),void 0===l)l=s[t]=n,++e._eventsCount;else if("function"==typeof l?l=s[t]=i?[n,l]:[l,n]:i?l.unshift(n):l.push(n),(a=o(e))>0&&l.length>a&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=l.length,r(u)}return e}function s(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,v(this.listener,this.target,e))}function l(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=s.bind(r);return i.listener=n,r.wrapFn=i,i}function u(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?h(i):p(i,i.length)}function c(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function f(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function h(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var d,g="object"==typeof Reflect?Reflect:null,v=g&&"function"==typeof g.apply?g.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};d=g&&"function"==typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var m=Number.isNaN||function(e){return e!==e};e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var y=10;Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(e){if("number"!=typeof e||e<0||m(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");y=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||m(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return o(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)v(s,this,t);else for(var l=s.length,u=p(s,l),n=0;n<l;++n)v(u[n],this,t);return!0},i.prototype.addListener=function(e,t){return a(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return a(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():f(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return u(this,e,!0)},i.prototype.rawListeners=function(e){return u(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):c.call(e,t)},i.prototype.listenerCount=c,i.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]}},757:function(e,t,n){"use strict";(function(t){function n(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(t,n(139))},776:function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(function(){return arguments}());e.exports=function(e){return r.call(e)===i}},777:function(e,t,n){"use strict";e.exports=n(847)()?Object.setPrototypeOf:n(848)},778:function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||r.call(e)===i)||!1}},799:function(e,t,n){t=e.exports=n(859),t.Stream=t,t.Readable=t,t.Writable=n(861),t.Duplex=n(734),t.Transform=n(860),t.PassThrough=n(1013)},813:function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t,n=r(e),i=n[0],a=n[1],s=new f(o(e,i,a)),l=0,u=a>0?i-4:i,c=0;c<u;c+=4)t=p[e.charCodeAt(c)]<<18|p[e.charCodeAt(c+1)]<<12|p[e.charCodeAt(c+2)]<<6|p[e.charCodeAt(c+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;return 2===a&&(t=p[e.charCodeAt(c)]<<2|p[e.charCodeAt(c+1)]>>4,s[l++]=255&t),1===a&&(t=p[e.charCodeAt(c)]<<10|p[e.charCodeAt(c+1)]<<4|p[e.charCodeAt(c+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t),s}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function l(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}function u(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(l(e,o,o+16383>a?a:o+16383));return 1===r?(t=e[n-1],i.push(c[t>>2]+c[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(c[t>>10]+c[t>>4&63]+c[t<<2&63]+"=")),i.join("")}t.byteLength=i,t.toByteArray=a,t.fromByteArray=u;for(var c=[],p=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,g=h.length;d<g;++d)c[d]=h[d],p[h.charCodeAt(d)]=d;p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},814:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},821:function(e,t,n){"use strict";e.exports=n(947)()?Object.assign:n(948)},822:function(e,t,n){"use strict";var r,i=n(843),o=n(821),a=n(721),s=n(714),l=n(733),u=n(932),c=n(729),p=Object.defineProperty,f=Object.defineProperties;e.exports=r=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");f(this,{__list__:l("w",s(e)),__context__:l("w",t),__nextIndex__:l("w",0)}),t&&(a(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete r.prototype.constructor,f(r.prototype,o({_next:l(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:l(function(e){return this.__list__[e]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},u({_onAdd:l(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void p(this,"__redo__",l("c",[e]));this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)}}),_onDelete:l(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:l(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),p(r.prototype,c.iterator,l(function(){return this}))},827:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,p=n?i-1:0,f=n?-1:1,h=e[t+p];for(p+=f,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+p],p+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+p>=1?f/l:f*Math.pow(2,1-p),t*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+h]=255&a,h+=d,a/=256,u-=8);e[n+h-d]|=128*g}},828:function(e,t,n){"use strict";function r(e,t){function n(n){t.rejectUnauthorized&&e.emit("error",n),r.end()}var r;return t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,r=i.connect(t),r.on("secureConnect",function(){t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",n)}),r.on("error",n),r}var i=n(1055);e.exports=r},831:function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}e.exports=n;var r=Object.prototype.hasOwnProperty},840:function(e,t,n){"use strict";function r(e){var t=parseInt(e/20);return e%20!=0&&(t+=1),t}n.d(t,"b",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return p}),n.d(t,"f",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return d}),n.d(t,"g",function(){return g});var i=n(687),o=n.n(i),a=n(234),s=n.n(a),l=this,u=function(e,t){var n=[],i=[];if(t)for(var a=0;a<e.length;a++){var l=!1;e[a].sensorName.value&&"Error"!==e[a].sensorName.value||(e[a].sensorName.msg="请输入传感器名称",l=!0),e[a].sensorTypeId.value||(e[a].sensorTypeId.msg="请选择点位类型",l=!0),e[a].decimal.value,e[a].unit.value,(e[a].field1.value||e[a].field2.value||e[a].field3.value||e[a].field4.value)&&(g(e[a].field1.value)&&g(e[a].field2.value)&&g(e[a].field3.value)&&g(e[a].field4.value)?e[a].field1.value===e[a].field2.value&&(e[a].field1.msg="映射参数 x1 不能等于 x2",l=!0):(e[a].field1.msg="映射参数由4个数{x1,x2,x3,x4}组成,如: -1000~1000 -> -100 ~ 100",l=!0)),l?(n.push(a+1),e[a].editable=!0):e[a].editable=!1}else for(var u=e.map(function(e){return e.address.value+"/"+e.funcode.value+"/"+e.bias.value+"/"+e.datas.value}),a=0;a<e.length;a++)!function(t){var r=!1;u.filter(function(n){return n===e[t].address.value+"/"+e[t].funcode.value+"/"+e[t].bias.value+"/"+e[t].datas.value}).length>1?(e[t].sensorName.msg="不可同时存在两个以上具有相同从站地址、功能码、寄存器地址、地址位的传感器，请修改完成后再校验一次",r=!0):e[t].sensorName.msg="",e[t].sensorName.value&&"Error"!==e[t].sensorName.value||(e[t].sensorName.msg="请输入传感器名称",r=!0),e[t].sensorTypeId.value||(e[t].sensorTypeId.msg="请选择点位类型",r=!0),e[t].decimal.value,e[t].unit.value,(e[t].field1.value||e[t].field2.value||e[t].field3.value||e[t].field4.value)&&(g(e[t].field1.value)&&g(e[t].field2.value)&&g(e[t].field3.value)&&g(e[t].field4.value)?e[t].field1.value===e[t].field2.value&&(e[t].field1.msg="映射参数 x1 不能等于 x2",r=!0):(e[t].field1.msg="映射参数由4个数{x1,x2,x3,x4}组成,如: -1000~1000 -> -100 ~ 100",r=!0)),g(e[t].address.value)?(Number(e[t].address.value)<1||Number(e[t].address.value)>255)&&(e[t].address.msg="请输入一个 1-255 之间的整数",r=!0):(e[t].address.msg="请输入一个 1-255 之间的整数",r=!0),g(e[t].bias.value)?(Number(e[t].bias.value)<=0||Number(e[t].bias.value)>=65535)&&(e[t].bias.msg="请输入一个 0-65535 之间的整数",r=!0):(e[t].bias.msg="请输入一个 0-65535 之间的整数",r=!0),e[t].funcode.value||(e[t].funcode.msg="功能码不能为空",r=!0),1===e[t].funcode.value||2===e[t].funcode.value?7!==e[t].datatype.value&&(e[t].datatype.msg="当功能码为 01读写 / 02只读 时，数据格式应该为 bit",r=!0):7===e[t].datatype.value&&(e[t].datatype.msg="当功能码为 03读写 / 04只读 时，数据格式不能为 bit",r=!0),e[t].datatype.value||(e[t].datatype.msg="数据格式不能为空",r=!0),e[t].orderStr.value?(1!==e[t].datatype.value&&2!==e[t].datatype.value&&6!==e[t].datatype.value||"AB"!==e[t].orderStr.value&&"BA"!==e[t].orderStr.value&&(e[t].orderStr.msg="当数据格式为 16位有符号数 / 16位无符号数 / 16位按位读取，字节顺序应该为 AB / BA",r=!0),3!==e[t].datatype.value&&4!==e[t].datatype.value&&5!==e[t].datatype.value||"AB"!==e[t].orderStr.value&&"BA"!==e[t].orderStr.value&&""!==e[t].orderStr.value||(e[t].orderStr.msg="当数据格式为 32位有符号数 / 32位无符号数 / 32位浮点型数 时，字节顺序应该为 ABCD / CDAB / BADC / DCAB",r=!0),7===e[t].datatype.value&&""!==e[t].orderStr.value&&(e[t].orderStr.msg="当数据格式为 bit 时，字节顺序应该为 空",r=!0)):7!==e[t].datatype.value&&(e[t].orderStr.msg="当数据格式不为 bit 时，字节顺序不能为 空",r=!0),e[t].datas.value?6!==e[t].datatype.value&&(e[t].datas.msg="当数据格式不为 16位按位读取 时，值应该为 空",r=!0):6===e[t].datatype.value&&(e[t].datas.msg="当数据格式为 16位按位读取 时，值不能为 空",r=!0),g(e[t].cycle.value)?10!=e[t].cycle.value&&30!=e[t].cycle.value&&e[t].cycle.value%60!=0&&(e[t].cycle.msg="可选择 10s/30s/60s/120s 或自定义(输入60的倍数)",r=!0):(e[t].cycle.msg="可选择 10s/30s/60s/120s 或自定义(输入60的倍数)",r=!0),r?(n.push(t+1),e[t].editable=!0):e[t].editable=!1}(a);return n.forEach(function(e){i.push(r(e))}),{data:e,errPages:s()(new o.a(i))}},c=function(e,t){if("fromExcel"===t)try{for(var n=0;n<e.length;n++)e[n].type=e[n]["点检类型"],e[n].content=e[n]["点检项"],e[n].mobile=e[n]["点检人账号"],e[n].cycle=e[n]["点检周期"],e[n].editable=!1,delete e[n]["点检类型"],delete e[n]["点检项"],delete e[n]["点检人账号"],delete e[n]["点检周期"]}catch(e){return void l.$message("无法识别的内容，请参照模板文件生成文件")}return e},p=function(e,t,n){if("fromExcel"===t)try{for(var r=0;r<e.length;r++)!function(t){if(e[t]["传感器名称"]?e[t].sensorName={value:e[t]["传感器名称"],msg:""}:e[t].sensorName={value:"",msg:""},e[t]["点位类型"]?(n[0].options.forEach(function(n){n.TypeName===e[t]["点位类型"]&&(e[t].typeSection="state",e[t]["小数位"]="",e[t]["单位"]="",e[t].sensorTypeId={value:n.ID,msg:""})}),n[1].options.forEach(function(n){if(n.TypeName===e[t]["点位类型"]){e[t].typeSection="simulate",e[t].sensorTypeId={value:n.ID,msg:""};var r=[];n.Value&&(r=n.Value.split("|")),-1===r.indexOf(e[t]["单位"])&&(e[t]["单位"]=""),e[t].unitOptions=r}}),e[t].sensorTypeId||(e[t].sensorTypeId={value:"",msg:""})):e[t].sensorTypeId={value:"",msg:""},e[t]["小数位"]?e[t].decimal={value:Number(e[t]["小数位"]),msg:""}:e[t].decimal={value:"",msg:""},e[t]["单位"]?e[t].unit={value:e[t]["单位"],msg:""}:e[t].unit={value:"",msg:""},e[t]["映射"]){var r=e[t]["映射"].split("/");e[t].field1={value:r[0],msg:""},e[t].field2={value:r[1],msg:""},e[t].field3={value:r[2],msg:""},e[t].field4={value:r[3],msg:""}}else e[t].field1={value:"",msg:""},e[t].field2={value:"",msg:""},e[t].field3={value:"",msg:""},e[t].field4={value:"",msg:""};if(e[t]["从站地址"]?e[t].address={value:e[t]["从站地址"],msg:""}:e[t].address={value:"",msg:""},e[t]["功能码"])switch(e[t].funcode={value:e[t]["功能码"],msg:""},e[t].funcode.value){case"01读写":e[t].funcode.value=1;break;case"02只读":e[t].funcode.value=2;break;case"03读写":e[t].funcode.value=3;break;case"04只读":e[t].funcode.value=4}else e[t].funcode={value:"",msg:""};if(e[t]["寄存器地址"]?e[t].bias={value:e[t]["寄存器地址"],msg:""}:e[t].bias={value:"",msg:""},e[t]["数据格式"])switch(e[t].datatype={value:e[t]["数据格式"],msg:""},e[t].datatype.value){case"16位有符号数":e[t].datatype.value=1;break;case"16位无符号数":e[t].datatype.value=2;break;case"32位有符号数":e[t].datatype.value=3;break;case"32位无符号数":e[t].datatype.value=4;break;case"32位浮点型数":e[t].datatype.value=5;break;case"16位按位读取":e[t].datatype.value=6;break;case"bit":e[t].datatype.value=7}else e[t].datatype={value:"",msg:""};e[t]["字节顺序"]?e[t].orderStr={value:e[t]["字节顺序"],msg:""}:e[t].orderStr={value:"",msg:""},e[t]["地址位"]?e[t].datas={value:e[t]["地址位"],msg:""}:e[t].datas={value:"",msg:""},e[t]["采集周期/s"]?e[t].cycle={value:e[t]["采集周期/s"],msg:""}:e[t].cycle={value:"",msg:""},e[t].pointType="1",e[t].editable=!1,e[t].flag=Math.random()}(r)}catch(e){return void alert("无法识别的内容，请参照模板文件生成文件")}else if("fromServer"===t)for(var r=0;r<e.length;r++)!function(t){e[t].sensorName={value:e[t].NEW_NAME,msg:""},e[t].sensorTypeId={value:e[t].TYPE,msg:""},e[t].decimal={value:e[t].DECIMAL_POINT,msg:""},e[t].unit={value:e[t].UNIT,msg:""},e[t].field1={value:""!==e[t].field1&&null!==e[t].field1?e[t].field1:"",msg:""},e[t].field2={value:""!==e[t].field2&&null!==e[t].field2?e[t].field2:"",msg:""},e[t].field3={value:""!==e[t].field3&&null!==e[t].field3?e[t].field3:"",msg:""},e[t].field4={value:""!==e[t].field4&&null!==e[t].field4?e[t].field4:"",msg:""},e[t].funcode={value:e[t].function,msg:""},e[t].bias={value:e[t].address,msg:""},e[t].datatype={value:e[t].dataType,msg:""},e[t].address={value:e[t].slaveId,msg:""},e[t].orderStr={value:e[t].orderStr,msg:""},e[t].datas={value:e[t].bit?e[t].bit:"",msg:""},e[t].cycle={value:e[t].cycle.toString(),msg:""},n[0].options.forEach(function(n){n.ID===e[t].TYPE&&(e[t].typeSection="state")}),n[1].options.forEach(function(n){if(n.ID===e[t].TYPE){e[t].typeSection="simulate";var r=[];n.Value&&(r=n.Value.split("|")),e[t].unitOptions=r}}),e[t].editable=!1,e[t].flag=Math.random()}(r);else if("templateFromServer"===t)for(var r=0;r<e.length;r++)!function(t){e[t].sensorName={value:e[t].sensorName,msg:""},n[0].options.forEach(function(n){n.ID===e[t].sensorTypeId&&(e[t].typeSection="state")}),n[1].options.forEach(function(n){if(n.ID===e[t].sensorTypeId){e[t].typeSection="simulate";var r=[];n.Value&&(r=n.Value.split("|")),e[t].unitOptions=r}}),e[t].sensorTypeId={value:e[t].sensorTypeId,msg:""},e[t].decimal={value:e[t].decimal,msg:""},e[t].unit={value:e[t].unit,msg:""},e[t].field1={value:e[t].field1,msg:""},e[t].field2={value:e[t].field2,msg:""},e[t].field3={value:e[t].field3,msg:""},e[t].field4={value:e[t].field4,msg:""},e[t].fieldId=e[t].fieldId,e[t].address={value:e[t].address,msg:""},e[t].funcode={value:e[t].funcode,msg:""},e[t].bias={value:e[t].bias,msg:""},e[t].datatype={value:e[t].datatype,msg:""},e[t].orderStr={value:e[t].orderStr,msg:""},e[t].datas={value:e[t].datas?e[t].datas:"",msg:""},e[t].cycle={value:e[t].cycle,msg:""},e[t].editable=!1,e[t].flag=Math.random()}(r);else if("tcpGateway"===t)for(var r=0;r<e.length;r++)!function(t){e[t].channel=e[t].Channel,e[t].sensorName={value:e[t].NAME,msg:""},e[t].sensorTypeId={value:e[t].TYPE,msg:""},e[t].decimal={value:e[t].DECIMAL_POINT,msg:""},e[t].unit={value:e[t].UNIT,msg:""};var r=e[t].Map?e[t].Map.split(","):[];e[t].field1={value:r.length?r[0]:"",msg:""},e[t].field2={value:r.length?r[1]:"",msg:""},e[t].field3={value:r.length?r[2]:"",msg:""},e[t].field4={value:r.length?r[3]:"",msg:""},n[0].options.forEach(function(n){n.ID===e[t].TYPE&&(e[t].typeSection="state")}),n[1].options.forEach(function(n){if(n.ID===e[t].TYPE){e[t].typeSection="simulate";var r=[];n.Value&&(r=n.Value.split("|")),e[t].unitOptions=r}}),e[t].editable=!1}(r);return e},f=function(e,t,n){var r={};r.sensorName=t.sensorName,r.sensorName.value=r.sensorName.value+"-copy",r.sensorTypeId=t.sensorTypeId,r.decimal=t.decimal,r.unit=t.unit,r.field1=t.field1,r.field2=t.field2,r.field3=t.field3,r.field4=t.field4,r.editable=!0,n||(r.address=t.address,r.funcode=t.funcode,r.bias=t.bias,r.datatype=t.datatype,r.orderStr=t.orderStr,r.datas=t.datas,r.cycle=t.cycle,r.pointType=t.pointType,r.editable=!0,r.flag=Math.random()),e.unshift(r)},h=function(e,t){var n=[];t.forEach(function(e){var t={};t.sensorName=e.sensorName,t.sensorName.value=t.sensorName.value+"-copy",t.sensorTypeId=e.sensorTypeId,t.decimal=e.decimal,t.unit=e.unit,t.field1=e.field1,t.field2=e.field2,t.field3=e.field3,t.field4=e.field4,t.address=e.address,t.funcode=e.funcode,t.bias=e.bias,t.datatype=e.datatype,t.orderStr=e.orderStr,t.datas=e.datas,t.cycle=e.cycle,t.pointType=e.pointType,t.editable=!0,t.flag=Math.random(),n.push(t)}),e.unshift.apply(e,n)},d=function(e,t,n){if(t)if(n){for(var r=[],i=1;i<n+1;i++){var o={sensorName:{value:"",msg:""},sensorTypeId:{value:"",msg:""},decimal:{value:0,msg:""},unit:{value:"",msg:""},field1:{value:"",msg:""},field2:{value:"",msg:""},field3:{value:"",msg:""},field4:{value:"",msg:""},editable:!0,channel:i};r.push(o)}e.unshift.apply(e,r)}else e.unshift({sensorName:{value:"",msg:""},sensorTypeId:{value:"",msg:""},decimal:{value:0,msg:""},unit:{value:"",msg:""},field1:{value:"",msg:""},field2:{value:"",msg:""},field3:{value:"",msg:""},field4:{value:"",msg:""},editable:!0,channel:""});else e.unshift({sensorName:{value:"",msg:""},sensorTypeId:{value:"",msg:""},decimal:{value:0,msg:""},unit:{value:"",msg:""},field1:{value:"",msg:""},field2:{value:"",msg:""},field3:{value:"",msg:""},field4:{value:"",msg:""},address:{value:"",msg:""},funcode:{value:"",msg:""},bias:{value:"",msg:""},datatype:{value:"",msg:""},orderStr:{value:"",msg:""},datas:{value:"",msg:""},cycle:{value:"",msg:""},pointType:"1",editable:!0,flag:Math.random()})},g=function(e){return""!==e&&parseInt(e,10)==e}},842:function(e,t,n){var r=n(1007),i=function(){},o=function(e){return e.setHeader&&"function"==typeof e.abort},a=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},s=function(e,t,n){if("function"==typeof t)return s(e,null,t);t||(t={}),n=r(n||i);var l=e._writableState,u=e._readableState,c=t.readable||!1!==t.readable&&e.readable,p=t.writable||!1!==t.writable&&e.writable,f=function(){e.writable||h()},h=function(){p=!1,c||n.call(e)},d=function(){c=!1,p||n.call(e)},g=function(t){n.call(e,t?new Error("exited with error code: "+t):null)},v=function(t){n.call(e,t)},m=function(){return(!c||u&&u.ended)&&(!p||l&&l.ended)?void 0:n.call(e,new Error("premature close"))},y=function(){e.req.on("finish",h)};return o(e)?(e.on("complete",h),e.on("abort",m),e.req?y():e.on("request",y)):p&&!l&&(e.on("end",f),e.on("close",f)),a(e)&&e.on("exit",g),e.on("end",d),e.on("finish",h),!1!==t.error&&e.on("error",v),e.on("close",m),function(){e.removeListener("complete",h),e.removeListener("abort",m),e.removeListener("request",y),e.req&&e.req.removeListener("finish",h),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",h),e.removeListener("exit",g),e.removeListener("end",d),e.removeListener("error",v),e.removeListener("close",m)}};e.exports=s},843:function(e,t,n){"use strict";var r=n(714);e.exports=function(){return r(this).length=0,this}},844:function(e,t,n){"use strict";e.exports=function(){}},845:function(e,t,n){"use strict";var r=n(945),i=Math.max;e.exports=function(e){return i(0,r(e))}},846:function(e,t,n){"use strict";var r=n(740),i=Array.prototype.forEach,o=Object.create,a=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=o(null);return i.call(arguments,function(e){r(e)&&a(Object(e),t)}),t}},847:function(e,t,n){"use strict";var r=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||r;return"function"==typeof e&&i(e(t(null),o))===o}},848:function(e,t,n){"use strict";var r,i=n(953),o=n(714),a=Object.prototype.isPrototypeOf,s=Object.defineProperty,l={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(e,t){if(o(e),null===t||i(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=function(e){var t,n;return e?(2===e.level?e.set?(n=e.set,t=function(e,t){return n.call(r(e,t),t),e}):t=function(e,t){return r(e,t).__proto__=t,e}:t=function e(t,n){var i;return r(t,n),i=a.call(e.nullPolyfill,t),i&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,i&&s(e.nullPolyfill,"__proto__",l),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{e=r.set,e.call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:(t={},t.__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}()),n(950)},849:function(e,t,n){"use strict";e.exports=n(959)()?String.prototype.contains:n(960)},850:function(e,t,n){"use strict";var r=n(964);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e}},853:function(e,t,n){"use strict";function r(e){return[0,1,2].map(function(t){return[0,1].map(function(n){return[0,1].map(function(r){var a=new i(1);return a.writeUInt8(o.codes[e]<<o.CMD_SHIFT|(n?o.DUP_MASK:0)|t<<o.QOS_SHIFT|r,0,!0),a})})})}var i=n(716).Buffer,o=e.exports;o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"reserved"},o.codes={};for(var a in o.types){var s=o.types[a];o.codes[s]=a}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.LENGTH_MASK=127,o.LENGTH_FIN_MASK=128,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=i.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=i.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=i.from([o.codes.connect<<o.CMD_SHIFT]),o.PUBLISH_HEADER=r("publish"),o.SUBSCRIBE_HEADER=r("subscribe"),o.UNSUBSCRIBE_HEADER=r("unsubscribe"),o.ACKS={unsuback:r("unsuback"),puback:r("puback"),pubcomp:r("pubcomp"),pubrel:r("pubrel"),pubrec:r("pubrec")},o.SUBACK_HEADER=i.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=i.from([3]),o.VERSION4=i.from([4]),o.QOS=[0,1,2].map(function(e){return i.from([e])}),o.EMPTY={pingreq:i.from([o.codes.pingreq<<4,0]),pingresp:i.from([o.codes.pingresp<<4,0]),disconnect:i.from([o.codes.disconnect<<4,0])}},854:function(e,t,n){"use strict";function r(e,t){switch(t.cork&&(t.cork(),I(i,t)),L&&(L=!1,P()),e.cmd){case"connect":return o(e,t);case"connack":return a(e,t);case"publish":return s(e,t);case"puback":case"pubrec":case"pubrel":case"pubcomp":case"unsuback":return l(e,t);case"subscribe":return u(e,t);case"suback":return c(e,t);case"unsubscribe":return p(e,t);case"pingreq":case"pingresp":case"disconnect":return f(e,t);default:return t.emit("error",new Error("Unknown command")),!1}}function i(e){e.uncork()}function o(e,t){var n=e||{},r=n.protocolId||"MQTT",i=n.protocolVersion||4,o=n.will,a=n.clean,s=n.keepalive||0,l=n.clientId||"",u=n.username,c=n.password;void 0===a&&(a=!0);var p=0;if(!r||"string"!=typeof r&&!T.isBuffer(r))return t.emit("error",new Error("Invalid protocolId")),!1;if(p+=r.length+2,3!==i&&4!==i)return t.emit("error",new Error("Invalid protocol version")),!1;if(p+=1,"string"!=typeof l&&!T.isBuffer(l)||!l&&4!==i||!l&&!a){if(i<4)return t.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*a==0)return t.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else p+=l.length+2;if("number"!=typeof s||s<0||s>65535||s%1!=0)return t.emit("error",new Error("Invalid keepalive")),!1;if(p+=2,p+=1,o){if("object"!=typeof o)return t.emit("error",new Error("Invalid will")),!1;if(!o.topic||"string"!=typeof o.topic)return t.emit("error",new Error("Invalid will topic")),!1;if(p+=T.byteLength(o.topic)+2,o.payload&&o.payload){if(!(o.payload.length>=0))return t.emit("error",new Error("Invalid will payload")),!1;"string"==typeof o.payload?p+=T.byteLength(o.payload)+2:p+=o.payload.length+2}else p+=2}var f=!1;if(null!=u){if(!w(u))return t.emit("error",new Error("Invalid username")),!1;f=!0,p+=T.byteLength(u)+2}if(null!=c){if(!f)return t.emit("error",new Error("Username is required to use password")),!1;if(!w(c))return t.emit("error",new Error("Invalid password")),!1;p+=_(c)+2}t.write(S.CONNECT_HEADER),g(t,p),b(t,r),t.write(4===i?S.VERSION4:S.VERSION3);var h=0;return h|=null!=u?S.USERNAME_MASK:0,h|=null!=c?S.PASSWORD_MASK:0,h|=o&&o.retain?S.WILL_RETAIN_MASK:0,h|=o&&o.qos?o.qos<<S.WILL_QOS_SHIFT:0,h|=o?S.WILL_FLAG_MASK:0,h|=a?S.CLEAN_SESSION_MASK:0,t.write(T.from([h])),C(t,s),b(t,l),o&&(v(t,o.topic),b(t,o.payload)),null!=u&&b(t,u),null!=c&&b(t,c),!0}function a(e,t){var n=e||{},r=n.returnCode;return"number"!=typeof r?(t.emit("error",new Error("Invalid return code")),!1):(t.write(S.CONNACK_HEADER),g(t,2),t.write(e.sessionPresent?S.SESSIONPRESENT_HEADER:k),t.write(T.from([r])))}function s(e,t){var n=e||{},r=n.qos||0,i=n.retain?S.RETAIN_MASK:0,o=n.topic,a=n.payload||x,s=n.messageId,l=0;if("string"==typeof o)l+=T.byteLength(o)+2;else{if(!T.isBuffer(o))return t.emit("error",new Error("Invalid topic")),!1;l+=o.length+2}return T.isBuffer(a)?l+=a.length:l+=T.byteLength(a),r&&"number"!=typeof s?(t.emit("error",new Error("Invalid messageId")),!1):(r&&(l+=2),t.write(S.PUBLISH_HEADER[r][e.dup?1:0][i?1:0]),g(t,l),C(t,_(o)),t.write(o),r>0&&C(t,s),t.write(a))}function l(e,t){var n=e||{},r=n.cmd||"puback",i=n.messageId,o=n.dup&&"pubrel"===r?S.DUP_MASK:0,a=0;return"pubrel"===r&&(a=1),"number"!=typeof i?(t.emit("error",new Error("Invalid messageId")),!1):(t.write(S.ACKS[r][a][o][0]),g(t,2),C(t,i))}function u(e,t){var n=e||{},r=n.dup?S.DUP_MASK:0,i=n.messageId,o=n.subscriptions,a=0;if("number"!=typeof i)return t.emit("error",new Error("Invalid messageId")),!1;if(a+=2,"object"!=typeof o||!o.length)return t.emit("error",new Error("Invalid subscriptions")),!1;for(var s=0;s<o.length;s+=1){var l=o[s].topic,u=o[s].qos;if("string"!=typeof l)return t.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof u)return t.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;a+=T.byteLength(l)+2+1}t.write(S.SUBSCRIBE_HEADER[1][r?1:0][0]),g(t,a),C(t,i);for(var c=!0,p=0;p<o.length;p++){var f=o[p],h=f.topic,d=f.qos;v(t,h),c=t.write(S.QOS[d])}return c}function c(e,t){var n=e||{},r=n.messageId,i=n.granted,o=0;if("number"!=typeof r)return t.emit("error",new Error("Invalid messageId")),!1;if(o+=2,"object"!=typeof i||!i.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(var a=0;a<i.length;a+=1){if("number"!=typeof i[a])return t.emit("error",new Error("Invalid qos vector")),!1;o+=1}return t.write(S.SUBACK_HEADER),g(t,o),C(t,r),t.write(T.from(i))}function p(e,t){var n=e||{},r=n.messageId,i=n.dup?S.DUP_MASK:0,o=n.unsubscriptions,a=0;if("number"!=typeof r)return t.emit("error",new Error("Invalid messageId")),!1;if(a+=2,"object"!=typeof o||!o.length)return t.emit("error",new Error("Invalid unsubscriptions")),!1;for(var s=0;s<o.length;s+=1){if("string"!=typeof o[s])return t.emit("error",new Error("Invalid unsubscriptions")),!1;a+=T.byteLength(o[s])+2}t.write(S.UNSUBSCRIBE_HEADER[1][i?1:0][0]),g(t,a),C(t,r);for(var l=!0,u=0;u<o.length;u++)l=v(t,o[u]);return l}function f(e,t){return t.write(S.EMPTY[e.cmd])}function h(e){return e>=0&&e<128?1:e>=128&&e<16384?2:e>=16384&&e<2097152?3:e>=2097152&&e<268435456?4:0}function d(e){var t=0,n=0,r=T.allocUnsafe(h(e));do{t=e%128|0,e=e/128|0,e>0&&(t|=128),r.writeUInt8(t,n++)}while(e>0);return r}function g(e,t){var n=A[t];n||(n=d(t),t<16384&&(A[t]=n)),e.write(n)}function v(e,t){var n=T.byteLength(t);C(e,n),e.write(t,"utf8")}function m(e,t){return e.write(D[t])}function y(e,t){return e.write(O(t))}function b(e,t){"string"==typeof t?v(e,t):t?(C(e,t.length),e.write(t)):C(e,0)}function _(e){return e?e instanceof T?e.length:T.byteLength(e):0}function w(e){return"string"==typeof e||e instanceof T}var S=n(853),T=n(716).Buffer,x=T.allocUnsafe(0),k=T.from([0]),E=n(1001),I=n(757).nextTick,D=E.cache,O=E.generateNumber,P=E.generateCache,C=m,L=!0;Object.defineProperty(r,"cacheNumbers",{get:function(){return C===m},set:function(e){e?(D&&0!==Object.keys(D).length||(L=!0),C=m):(L=!1,C=y)}});var A={};e.exports=r},855:function(e,t,n){"use strict";function r(e,t){var n,r;return t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",n=t.port,r=t.hostname,i.createConnection(n,r)}var i=n(1054);e.exports=r},856:function(e,t,n){"use strict";(function(t){function r(e,t){var n=e.protocol+"://"+e.hostname+":"+e.port+e.path;return"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}function i(e){e.hostname||(e.hostname="localhost"),e.port||("wss"===e.protocol?e.port=443:e.port=80),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={}),p||"wss"!==e.protocol||c.forEach(function(t){e.hasOwnProperty(t)&&!e.wsOptions.hasOwnProperty(t)&&(e.wsOptions[t]=e[t])})}function o(e,t){var n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";i(t);var o=r(t,e);return l(o,[n],t.wsOptions)}function a(e,t){return o(e,t)}function s(e,t){if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var n=u.parse(document.URL);t.hostname=n.hostname,t.port||(t.port=n.port)}return o(e,t)}var l=n(869),u=n(867),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],p="browser"===t.title;e.exports=p?s:a}).call(t,n(139))},857:function(e,t,n){"use strict";function r(e){u?wx.sendSocketMessage({data:e.buffer||e}):c.push(e)}function i(e,t){var n={OPEN:1,CLOSING:2,CLOSED:3,readyState:u?1:0,send:r,close:wx.closeSocket,onopen:null,onmessage:null,onclose:null,onerror:null};return wx.connectSocket({url:e,protocols:t}),wx.onSocketOpen(function(e){n.readyState=n.OPEN,u=!0;for(var t=0;t<c.length;t++)r(c[t]);c=[],n.onopen&&n.onopen.apply(n,arguments)}),wx.onSocketMessage(function(e){n.onmessage&&n.onmessage.apply(n,arguments)}),wx.onSocketClose(function(){n.onclose&&n.onclose.apply(n,arguments),n.readyState=n.CLOSED,u=!1}),wx.onSocketError(function(){n.onerror&&n.onerror.apply(n,arguments),n.readyState=n.CLOSED,u=!1}),n}function o(e,t){var n="wxs"===e.protocol?"wss":"ws",r=n+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(r=n+"://"+e.hostname+":"+e.port+e.path),"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}function a(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}function s(e,t){var n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";a(t);var r=o(t,e);return p(i(r,[n]))}function l(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");return s(e,t)}var u=!1,c=[],p=n(869);e.exports=l},858:function(e,t,n){"use strict";(function(t){function r(e){if(!(this instanceof r))return new r(e);this.options=e||{},this.options=i(s,e),this._inflights=new l}var i=n(831),o=n(799).Readable,a={objectMode:!0},s={clean:!0},l=n(966);r.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},r.prototype.createStream=function(){var e=new o(a),n=!1,r=[],i=0;return this._inflights.forEach(function(e,t){r.push(e)}),e._read=function(){!n&&i<r.length?this.push(r[i++]):this.push(null)},e.destroy=function(){if(!n){var e=this;n=!0,t.nextTick(function(){e.emit("close")})}},e},r.prototype.del=function(e,t){return e=this._inflights.get(e.messageId),e?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},r.prototype.get=function(e,t){return e=this._inflights.get(e.messageId),e?t(null,e):t&&t(new Error("missing packet")),this},r.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},e.exports=r}).call(t,n(139))},859:function(e,t,n){"use strict";(function(t,r){function i(e){return R.from(e)}function o(e){return R.isBuffer(e)||e instanceof B}function a(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?M(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function s(e,t){A=A||n(734),e=e||{};var r=t instanceof A;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new q,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&($||($=n(864).StringDecoder),this.decoder=new $(e.encoding),this.encoding=e.encoding)}function l(e){if(A=A||n(734),!(this instanceof l))return new l(e);this._readableState=new s(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),j.call(this)}function u(e,t,n,r,o){var a=e._readableState;if(null===t)a.reading=!1,g(e,a);else{var s;o||(s=p(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===R.prototype||(t=i(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):c(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?c(e,a,t,!1):y(e,a)):c(e,a,t,!1))):r||(a.reading=!1)}return f(a)}function c(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&v(e)),y(e,t)}function p(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){return e>=H?e=H:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,v(e)}}function v(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(z("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?L.nextTick(m,e):m(e))}function m(e){z("emit readable"),e.emit("readable"),x(e)}function y(e,t){t.readingMore||(t.readingMore=!0,L.nextTick(b,e,t))}function b(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(z("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function _(e){return function(){var t=e._readableState;z("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&N(e,"data")&&(t.flowing=!0,x(e))}}function w(e){z("readable nexttick read 0"),e.read(0)}function S(e,t){t.resumeScheduled||(t.resumeScheduled=!0,L.nextTick(T,e,t))}function T(e,t){t.reading||(z("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;for(z("flow",t.flowing);t.flowing&&null!==e.read(););}function k(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=E(e,t.buffer,t.decoder),n}function E(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?I(e,t):D(e,t),r}function I(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function D(e,t){var n=R.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,L.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var L=n(757);e.exports=l;var A,M=n(1015);l.ReadableState=s;var N=(n(755).EventEmitter,function(e,t){return e.listeners(t).length}),j=n(863),R=n(716).Buffer,B=t.Uint8Array||function(){},U=n(753);U.inherits=n(715);var F=n(1056),z=void 0;z=F&&F.debuglog?F.debuglog("stream"):function(){};var $,q=n(1014),Y=n(862);U.inherits(l,j);var W=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=Y.destroy,l.prototype._undestroy=Y.undestroy,l.prototype._destroy=function(e,t){this.push(null),t(e)},l.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=R.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},l.prototype.unshift=function(e){return u(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(e){return $||($=n(864).StringDecoder),this._readableState.decoder=new $(e),this._readableState.encoding=e,this};var H=8388608;l.prototype.read=function(e){z("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return z("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):v(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&O(this),null;var r=t.needReadable;z("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,z("length less than watermark",r)),t.ended||t.reading?(r=!1,z("reading or ended",r)):r&&(z("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(n,t)));var i;return i=e>0?k(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==i&&this.emit("data",i),i},l.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},l.prototype.pipe=function(e,t){function n(e,t){z("onunpipe"),e===f&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){z("onend"),e.end()}function o(){z("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",v),e.removeListener("error",l),e.removeListener("unpipe",n),f.removeListener("end",i),f.removeListener("end",p),f.removeListener("data",s),m=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){z("ondata"),y=!1,!1!==e.write(t)||y||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&-1!==C(h.pipes,e))&&!m&&(z("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,y=!0),f.pause())}function l(t){z("onerror",t),p(),e.removeListener("error",l),0===N(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),p()}function c(){z("onfinish"),e.removeListener("close",u),p()}function p(){z("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,z("pipe count=%d opts=%j",h.pipesCount,t);var d=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,g=d?i:p;h.endEmitted?L.nextTick(g):f.once("end",g),e.on("unpipe",n);var v=_(f);e.on("drain",v);var m=!1,y=!1;return f.on("data",s),a(e,"error",l),e.once("close",u),e.once("finish",c),e.emit("pipe",f),h.flowing||(z("pipe resume"),f.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=C(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},l.prototype.on=function(e,t){var n=j.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&v(this):L.nextTick(w,this))}return n},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(z("resume"),e.flowing=!0,S(this,e)),this},l.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this},l.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;e.on("end",function(){if(z("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){if(z("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){t.push(i)||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<W.length;o++)e.on(W[o],this.emit.bind(this,W[o]));return this._read=function(t){z("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),l._fromList=k}).call(t,n(53),n(139))},860:function(e,t,n){"use strict";function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(this,null,null)}function a(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=i;var s=n(734),l=n(753);l.inherits=n(715),l.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},861:function(e,t,n){"use strict";(function(t,r,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){I(t,e)}}function a(e){return M.from(e)}function s(e){return M.isBuffer(e)||e instanceof N}function l(){}function u(e,t){O=O||n(734),e=e||{};var r=t instanceof O;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,a=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function c(e){if(O=O||n(734),!(R.call(c,this)||this instanceof O))return new c(e);this._writableState=new u(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),A.call(this)}function p(e,t){var n=new Error("write after end");e.emit("error",n),D.nextTick(t,n)}function f(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),D.nextTick(r,o),i=!1),i}function h(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=M.from(t,n)),t}function d(e,t,n,r,i,o){if(!n){var a=h(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,s,r,i,o);return l}function g(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function v(e,t,n,r,i){--t.pendingcb,n?(D.nextTick(i,r),D.nextTick(k,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),k(e,t))}function m(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(m(n),t)v(e,n,r,t,i);else{var o=S(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?P(b,e,n,o,i):b(e,n,o,i)}}function b(e,t,n,r){n||_(e,t),t.pendingcb--,r(),k(e,t)}function _(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)i[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;i.allBuffers=l,g(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,p=n.callback;if(g(e,t,!1,t.objectMode?1:u.length,u,c,p),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),k(e,t)})}function x(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,D.nextTick(T,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function k(e,t){var n=S(t);return n&&(x(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function E(e,t,n){t.ending=!0,k(e,t),n&&(t.finished?D.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function I(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var D=n(757);e.exports=c;var O,P=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:D.nextTick;c.WritableState=u;var C=n(753);C.inherits=n(715);var L={deprecate:n(1020)},A=n(863),M=n(716).Buffer,N=i.Uint8Array||function(){},j=n(862);C.inherits(c,A),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:L.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var R;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(R=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return!!R.call(this,e)||this===c&&(e&&e._writableState instanceof u)}})):R=function(e){return e instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&s(e);return o&&!M.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=l),r.ended?p(this,n):(o||f(this,r,e,n))&&(r.pendingcb++,i=d(this,r,o,e,t,n)),i},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||E(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=j.destroy,c.prototype._undestroy=j.undestroy,c.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(139),n(144).setImmediate,n(53))},862:function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var a=n(757);e.exports={destroy:r,undestroy:i}},863:function(e,t,n){e.exports=n(755).EventEmitter},864:function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(y.isEncoding===b||!b(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=f,this.end=h,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=d,this.end=g,t=3;break;default:return this.write=v,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0)}function l(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function u(e){var t=this.lastTotal-this.lastNeed,n=l(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function f(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}var y=n(716).Buffer,b=y.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=p,o.prototype.text=c,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},867:function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&u.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return u.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var l=n(1008),u=n(1019);t.parse=i,t.resolve=a,t.resolveObject=s,t.format=o,t.Url=r;var c=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(h),g=["'"].concat(d),v=["%","/","?",";","#"].concat(g),m=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=n(1011);r.prototype.parse=function(e,t,n){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var p=f.exec(s);if(p)return this.path=s,this.href=s,this.pathname=p[1],p[2]?(this.search=p[2],this.query=t?T.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=c.exec(s);if(h){h=h[0];var d=h.toLowerCase();this.protocol=d,s=s.substr(h.length)}if(n||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===s.substr(0,2);!x||h&&w[h]||(s=s.substr(2),this.slashes=!0)}if(!w[h]&&(x||h&&!S[h])){for(var k=-1,E=0;E<m.length;E++){var I=s.indexOf(m[E]);-1!==I&&(-1===k||I<k)&&(k=I)}var D,O;O=-1===k?s.lastIndexOf("@"):s.lastIndexOf("@",k),-1!==O&&(D=s.slice(0,O),s=s.slice(O+1),this.auth=decodeURIComponent(D)),k=-1;for(var E=0;E<v.length;E++){var I=s.indexOf(v[E]);-1!==I&&(-1===k||I<k)&&(k=I)}-1===k&&(k=s.length),this.host=s.slice(0,k),s=s.slice(k),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var C=this.hostname.split(/\./),E=0,L=C.length;E<L;E++){var A=C[E];if(A&&!A.match(y)){for(var M="",N=0,j=A.length;N<j;N++)A.charCodeAt(N)>127?M+="x":M+=A[N];if(!M.match(y)){var R=C.slice(0,E),B=C.slice(E+1),U=A.match(b);U&&(R.push(U[1]),B.unshift(U[2])),B.length&&(s="/"+B.join(".")+s),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=l.toASCII(this.hostname));var F=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+F,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!_[d])for(var E=0,L=g.length;E<L;E++){var $=g[E];if(-1!==s.indexOf($)){var q=encodeURIComponent($);q===$&&(q=escape($)),s=s.split($).join(q)}}var Y=s.indexOf("#");-1!==Y&&(this.hash=s.substr(Y),s=s.slice(0,Y));var W=s.indexOf("?");if(-1!==W?(this.search=s.substr(W),this.query=s.substr(W+1),t&&(this.query=T.parse(this.query)),s=s.slice(0,W)):t&&(this.search="",this.query={}),s&&(this.pathname=s),S[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",H=this.search||"";this.path=F+H}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=T.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(u.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var c=s[l];"protocol"!==c&&(n[c]=e[c])}return S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!S[e.protocol]){for(var p=Object.keys(e),f=0;f<p.length;f++){var h=p[f];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||w[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",v=n.search||"";n.path=g+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||m||n.host&&e.pathname,_=b,T=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],x=n.protocol&&!S[n.protocol];if(x&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),b=b&&(""===d[0]||""===T[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,T=d;else if(d.length)T||(T=[]),T.pop(),T=T.concat(d),n.search=e.search,n.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(x){n.hostname=n.host=T.shift();var k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");k&&(n.auth=k.shift(),n.host=n.hostname=k.shift())}return n.search=e.search,n.query=e.query,u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=T.slice(-1)[0],I=(n.host||e.host||T.length>1)&&("."===E||".."===E)||""===E,D=0,O=T.length;O>=0;O--)E=T[O],"."===E?T.splice(O,1):".."===E?(T.splice(O,1),D++):D&&(T.splice(O,1),D--);if(!b&&!_)for(;D--;D)T.unshift("..");!b||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),I&&"/"!==T.join("/").substr(-1)&&T.push("");var P=""===T[0]||T[0]&&"/"===T[0].charAt(0);if(x){n.hostname=n.host=P?"":T.length?T.shift():"";var k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");k&&(n.auth=k.shift(),n.host=n.hostname=k.shift())}return b=b||n.host&&T.length,b&&!P&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},869:function(e,t,n){"use strict";(function(t,r){function i(e,t,n){var r=new a({objectMode:e.objectMode});return r._write=t,r._flush=n,r}function o(e,n,o){function a(e,t,n){if(b.readyState!==b.OPEN)return void n();E&&"string"==typeof e&&(e=u.from(e,"utf8")),b.send(e,n)}function c(e,t,n){if(b.bufferedAmount>x)return void setTimeout(c,k,e,t,n);E&&"string"==typeof e&&(e=u.from(e,"utf8"));try{b.send(e)}catch(e){return n(e)}n()}function p(e){b.close(),e()}function f(){y.setReadable(T),y.setWritable(T),y.emit("connect")}function h(){y.end(),y.destroy()}function d(e){y.destroy(e)}function g(e){var t=e.data;t=t instanceof ArrayBuffer?u.from(t):u.from(t,"utf8"),T.push(t)}function v(){b.close()}function m(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"string"==typeof e[r].chunk?n[r]=u.from(e[r],"utf8"):n[r]=e[r].chunk;this._write(u.concat(n),"binary",t)}var y,b,_="browser"===t.title,w=!!r.WebSocket,S=_?c:a;n&&!Array.isArray(n)&&"object"==typeof n&&(o=n,n=null,("string"==typeof o.protocol||Array.isArray(o.protocol))&&(n=o.protocol)),o||(o={}),void 0===o.objectMode&&(o.objectMode=!(!0===o.binary||void 0===o.binary));var T=i(o,S,p);o.objectMode||(T._writev=m);var x=o.browserBufferSize||524288,k=o.browserBufferTimeout||1e3;"object"==typeof e?b=e:(b=w&&_?new l(e,n):new l(e,n,o),b.binaryType="arraybuffer"),b.readyState===b.OPEN?y=T:(y=s.obj(),b.onopen=f),y.socket=b,b.onclose=h,b.onerror=d,b.onmessage=g,T.on("close",v);var E=!o.objectMode;return y}var a=n(799).Transform,s=n(933),l=n(1049),u=n(716).Buffer;e.exports=o}).call(t,n(139),n(53))},903:function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var r=n(32),i=function(e){return r.a.post("/api/DeviceInfo/AddDevicesMQTT",e,{headers:{"Content-Type":"application/json"}})},o=function(e){var t=e.deviceNo,n=e.deviceUserName,i=e.deviceUserPwd;return r.a.get("/api/DeviceInfo/VerifyDevice",{params:{deviceNo:t,deviceUserName:n,deviceUserPwd:i}})},a=function(e){var t=e.deviceId,n=e.pageIndex,i=e.pageSize;return r.a.get("/api/DeviceInfo/GetDeviceMQTTPointPage",{params:{deviceId:t,pageIndex:n,pageSize:i}})},s=function(e){var t=e.deviceName,n=e.deviceID;return r.a.post("/api/DeviceInfo/UpdateDevicesMQTT",null,{params:{deviceName:t,deviceID:n}})},l=function(e){return r.a.get("/api/DeviceInfo/GetDeviceMQTT",{params:{deviceNo:e}})}},906:function(e,t,n){"use strict";n.d(t,"h",function(){return i}),n.d(t,"j",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"i",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"g",function(){return p}),n.d(t,"f",function(){return f}),n.d(t,"b",function(){return h});var r=n(32),i=function(e){return r.a.post("api/Terminal/AddTerminal",e)},o=function(e){return r.a.post("api/Terminal/TerminalList",e)},a=function(e){return r.a.get("api/Terminal/GetTerminal?projectID="+e)},s=function(e){return r.a.post("api/Waybill/AddWaybill",e)},l=function(e,t){return r.a.get("api/Waybill/ExistswaybillNumber?waybillNumber="+e+"&projectID="+t)},u=function(e){return r.a.get("api/Terminal/ExistsTerminal?terminalNumber="+e)},c=function(e){return r.a.post("api/Waybill/WaybillList",e)},p=function(e){return r.a.get("api/Waybill/QueryWaybill?waybillNumber="+e)},f=function(e,t){return r.a.get("api/Waybill/UntieWaybill?terminalNumber="+e+"&waybillNumber="+t)},h=function(e){return r.a.post("api/Waybill/Upload_WaybillExcel",e)}},909:function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)})}else this.append(e);i.call(this)}var i=n(1012),o=n(1022),a=n(716).Buffer;o.inherits(r,i),r.prototype._offset=function(e){var t,n=0,r=0;if(0===e)return[0,0];for(;r<this._bufs.length;r++){if(t=n+this._bufs[r].length,e<t||r==this._bufs.length-1)return[r,e-n];n=t}},r.prototype.append=function(e){var t=0;if(a.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof r)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(a.from(e)));return this},r.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},r.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},r.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},r.prototype.end=function(e){i.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype.get=function(e){return this.slice(e,e+1)[0]},r.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},r.prototype.copy=function(e,t,n,r){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof r||r>this.length)&&(r=this.length),n>=this.length)return e||a.alloc(0);if(r<=0)return e||a.alloc(0);var i,o,s=!!e,l=this._offset(n),u=r-n,c=u,p=s&&t||0,f=l[1];if(0===n&&r==this.length){if(!s)return 1===this._bufs.length?this._bufs[0]:a.concat(this._bufs,this.length);for(o=0;o<this._bufs.length;o++)this._bufs[o].copy(e,p),p+=this._bufs[o].length;return e}if(c<=this._bufs[l[0]].length-f)return s?this._bufs[l[0]].copy(e,t,f,f+c):this._bufs[l[0]].slice(f,f+c);for(s||(e=a.allocUnsafe(u)),o=l[0];o<this._bufs.length;o++){if(i=this._bufs[o].length-f,!(c>i)){this._bufs[o].copy(e,p,f,f+c);break}this._bufs[o].copy(e,p,f),p+=i,c-=i,f&&(f=0)}return e},r.prototype.shallowSlice=function(e,t){e=e||0,t=t||this.length,e<0&&(e+=this.length),t<0&&(t+=this.length);var n=this._offset(e),i=this._offset(t),o=this._bufs.slice(n[0],i[0]+1);return 0==i[1]?o.pop():o[o.length-1]=o[o.length-1].slice(0,i[1]),0!=n[1]&&(o[0]=o[0].slice(n[1])),new r(o)},r.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},r.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},r.prototype.duplicate=function(){for(var e=0,t=new r;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},r.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e)!function(t){r.prototype[t]=function(n){return this.slice(n,n+e[t])[t](0)}}(t)}(),e.exports=r},932:function(e,t,n){"use strict";var r,i=n(949),o=n(846),a=n(721),s=n(957),l=n(721),u=n(714),c=Function.prototype.bind,p=Object.defineProperty,f=Object.prototype.hasOwnProperty;r=function(e,t,n){var r,o=u(t)&&l(t.value);return r=i(t),delete r.writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&f.call(this,e)?o:(t.value=c.call(o,n.resolveContext?n.resolveContext(this):this),p(this,e,t),this[e])},r},e.exports=function(e){var t=o(arguments[1]);return null!=t.resolveContext&&a(t.resolveContext),s(e,function(e,n){return r(n,e,t)})}},933:function(e,t,n){(function(t,r){var i=n(799),o=n(842),a=n(715),s=n(1017),l=t.from&&t.from!==Uint8Array.from?t.from([0]):new t([0]),u=function(e,t){e._corked?e.once("uncork",t):t()},c=function(e,t){e._autoDestroy&&e.destroy(t)},p=function(e,t){return function(n){n?c(e,"premature close"===n.message?null:n):t&&!e._ended&&e.end()}},f=function(e,t){return e?e._writableState&&e._writableState.finished?t():e._writableState?e.end(t):(e.end(),void t()):t()},h=function(e){return new i.Readable({objectMode:!0,highWaterMark:16}).wrap(e)},d=function(e,t,n){if(!(this instanceof d))return new d(e,t,n);i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!n||!1!==n.autoDestroy,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)};a(d,i.Duplex),d.obj=function(e,t,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new d(e,t,n)},d.prototype.cork=function(){1==++this._corked&&this.emit("cork")},d.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},d.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)return void(e&&e.destroy&&e.destroy());if(null===e||!1===e)return void this.end();var t=this,n=o(e,{writable:!0,readable:!1},p(this,this._forwardEnd)),i=function(){var e=t._ondrain;t._ondrain=null,e&&e()},a=function(){t._writable.removeListener("drain",i),n()};this._unwrite&&r.nextTick(i),this._writable=e,this._writable.on("drain",i),this._unwrite=a,this.uncork()},d.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)return void(e&&e.destroy&&e.destroy());if(null===e||!1===e)return this.push(null),void this.resume();var t=this,n=o(e,{writable:!1,readable:!0},p(this)),r=function(){t._forward()},i=function(){t.push(null)},a=function(){t._readable2.removeListener("readable",r),t._readable2.removeListener("end",i),n()};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:h(e),this._readable2.on("readable",r),this._readable2.on("end",i),this._unread=a,this._forward()},d.prototype._read=function(){this._drained=!0,this._forward()},d.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var e;this._drained&&null!==(e=s(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},d.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;r.nextTick(function(){t._destroy(e)})}},d.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},d.prototype._write=function(e,t,n){return this.destroyed?n():this._corked?u(this,this._write.bind(this,e,t,n)):e===l?this._finish(n):this._writable?void(!1===this._writable.write(e)?this._ondrain=n:n()):n()},d.prototype._finish=function(e){var t=this;this.emit("preend"),u(this,function(){f(t._forwardEnd&&t._writable,function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),u(t,e)})})},d.prototype.end=function(e,t,n){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(l),i.Writable.prototype.end.call(this,n))},e.exports=d}).call(t,n(732).Buffer,n(139))},934:function(e,t,n){"use strict";var r=n(942),i=n(845),o=n(714),a=Array.prototype.indexOf,s=Object.prototype.hasOwnProperty,l=Math.abs,u=Math.floor;e.exports=function(e){var t,n,c,p;if(!r(e))return a.apply(this,arguments);for(n=i(o(this).length),c=arguments[1],c=isNaN(c)?0:c>=0?u(c):i(this.length)-u(l(c)),t=c;t<n;++t)if(s.call(this,t)&&(p=this[t],r(p)))return t;return-1}},935:function(e,t,n){"use strict";e.exports=n(936)()?Array.from:n(937)},936:function(e,t,n){"use strict";e.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(e=["raz","dwa"],t=n(e),Boolean(t&&t!==e&&"dwa"===t[1]))}},937:function(e,t,n){"use strict";var r=n(729).iterator,i=n(776),o=n(938),a=n(845),s=n(721),l=n(714),u=n(740),c=n(778),p=Array.isArray,f=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;e.exports=function(e){var t,n,g,v,m,y,b,_,w,S,T=arguments[1],x=arguments[2];if(e=Object(l(e)),u(T)&&s(T),this&&this!==Array&&o(this))t=this;else{if(!T){if(i(e))return 1!==(m=e.length)?Array.apply(null,e):(v=new Array(1),v[0]=e[0],v);if(p(e)){for(v=new Array(m=e.length),n=0;n<m;++n)v[n]=e[n];return v}}v=[]}if(!p(e))if(void 0!==(w=e[r])){for(b=s(w).call(e),t&&(v=new t),_=b.next(),n=0;!_.done;)S=T?f.call(T,x,_.value,n):_.value,t?(h.value=S,d(v,n,h)):v[n]=S,_=b.next(),++n;m=n}else if(c(e)){for(m=e.length,t&&(v=new t),n=0,g=0;n<m;++n)S=e[n],n+1<m&&(y=S.charCodeAt(0))>=55296&&y<=56319&&(S+=e[++n]),S=T?f.call(T,x,S,g):S,t?(h.value=S,d(v,g,h)):v[g]=S,++g;m=g}if(void 0===m)for(m=a(e.length),t&&(v=new t(m)),n=0;n<m;++n)S=T?f.call(T,x,e[n],n):e[n],t?(h.value=S,d(v,n,h)):v[n]=S;return t&&(h.value=null,v.length=m),v}},938:function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(n(844));e.exports=function(e){return"function"==typeof e&&r.call(e)===i}},939:function(e,t,n){"use strict";e.exports=n(940)()?Math.sign:n(941)},940:function(e,t,n){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},941:function(e,t,n){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},942:function(e,t,n){"use strict";e.exports=n(943)()?Number.isNaN:n(944)},943:function(e,t,n){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},944:function(e,t,n){"use strict";e.exports=function(e){return e!==e}},945:function(e,t,n){"use strict";var r=n(939),i=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?r(e)*o(i(e)):e)}},946:function(e,t,n){"use strict";var r=n(721),i=n(714),o=Function.prototype.bind,a=Function.prototype.call,s=Object.keys,l=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(n,u){var c,p=arguments[2],f=arguments[3];return n=Object(i(n)),r(u),c=s(n),f&&c.sort("function"==typeof f?o.call(f,n):void 0),"function"!=typeof e&&(e=c[e]),a.call(e,c,function(e,r){return l.call(n,e)?a.call(u,p,n[e],e,n,r):t})}}},947:function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},948:function(e,t,n){"use strict";var r=n(954),i=n(714),o=Math.max;e.exports=function(e,t){var n,a,s,l=o(arguments.length,2);for(e=Object(i(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},a=1;a<l;++a)t=arguments[a],r(t).forEach(s);if(void 0!==n)throw n;return e}},949:function(e,t,n){"use strict";var r=n(935),i=n(821),o=n(714);e.exports=function(e){var t=Object(o(e)),n=arguments[1],a=Object(arguments[2]);if(t!==e&&!n)return t;var s={};return n?r(n,function(t){(a.ensure||t in e)&&(s[t]=e[t])}):i(s,e),s}},950:function(e,t,n){"use strict";var r,i=Object.create;n(847)()||(r=n(848)),e.exports=function(){var e,t,n;return r?1!==r.level?i:(e={},t={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){if("__proto__"===e)return void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0});t[e]=n}),Object.defineProperties(e,t),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return i(null===t?e:t,n)}):i}()},951:function(e,t,n){"use strict";e.exports=n(946)("forEach")},952:function(e,t,n){"use strict";e.exports=function(e){return"function"==typeof e}},953:function(e,t,n){"use strict";var r=n(740),i={function:!0,object:!0};e.exports=function(e){return r(e)&&i[typeof e]||!1}},954:function(e,t,n){"use strict";e.exports=n(955)()?Object.keys:n(956)},955:function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},956:function(e,t,n){"use strict";var r=n(740),i=Object.keys;e.exports=function(e){return i(r(e)?Object(e):e)}},957:function(e,t,n){"use strict";var r=n(721),i=n(951),o=Function.prototype.call;e.exports=function(e,t){var n={},a=arguments[2];return r(t),i(e,function(e,r,i,s){n[r]=o.call(t,a,e,r,i,s)}),n}},958:function(e,t,n){"use strict";var r=Array.prototype.forEach,i=Object.create;e.exports=function(e){var t=i(null);return r.call(arguments,function(e){t[e]=!0}),t}},959:function(e,t,n){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},960:function(e,t,n){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},961:function(e,t,n){"use strict";var r,i=n(777),o=n(849),a=n(733),s=n(729),l=n(822),u=Object.defineProperty;r=e.exports=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");l.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",u(this,"__kind__",a("",t))},i&&i(r,l),delete r.prototype.constructor,r.prototype=Object.create(l.prototype,{_resolve:a(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),u(r.prototype,s.toStringTag,a("c","Array Iterator"))},962:function(e,t,n){"use strict";var r=n(776),i=n(721),o=n(778),a=n(963),s=Array.isArray,l=Function.prototype.call,u=Array.prototype.some;e.exports=function(e,t){var n,c,p,f,h,d,g,v,m=arguments[2];if(s(e)||r(e)?n="array":o(e)?n="string":e=a(e),i(t),p=function(){f=!0},"array"===n)return void u.call(e,function(e){return l.call(t,m,e,p),f});if("string"!==n)for(c=e.next();!c.done;){if(l.call(t,m,c.value,p),f)return;c=e.next()}else for(d=e.length,h=0;h<d&&(g=e[h],h+1<d&&(v=g.charCodeAt(0))>=55296&&v<=56319&&(g+=e[++h]),l.call(t,m,g,p),!f);++h);}},963:function(e,t,n){"use strict";var r=n(776),i=n(778),o=n(961),a=n(965),s=n(850),l=n(729).iterator;e.exports=function(e){return"function"==typeof s(e)[l]?e[l]():r(e)?new o(e):i(e)?new a(e):new o(e)}},964:function(e,t,n){"use strict";var r=n(776),i=n(740),o=n(778),a=n(729).iterator,s=Array.isArray;e.exports=function(e){return!!i(e)&&(!!s(e)||(!!o(e)||(!!r(e)||"function"==typeof e[a])))}},965:function(e,t,n){"use strict";var r,i=n(777),o=n(733),a=n(729),s=n(822),l=Object.defineProperty;r=e.exports=function(e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");e=String(e),s.call(this,e),l(this,"__length__",o("",e.length))},i&&i(r,s),delete r.prototype.constructor,r.prototype=Object.create(s.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0),t>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),l(r.prototype,a.toStringTag,o("c","String Iterator"))},966:function(e,t,n){"use strict";e.exports=n(967)()?Map:n(971)},967:function(e,t,n){"use strict";e.exports=function(){var e,t,n;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(e)&&(3===e.size&&("function"==typeof e.clear&&("function"==typeof e.delete&&("function"==typeof e.entries&&("function"==typeof e.forEach&&("function"==typeof e.get&&("function"==typeof e.has&&("function"==typeof e.keys&&("function"==typeof e.set&&("function"==typeof e.values&&(t=e.entries(),n=t.next(),!1===n.done&&(!!n.value&&("raz"===n.value[0]&&"one"===n.value[1])))))))))))))}},968:function(e,t,n){"use strict";e.exports=function(){return"undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)}()},969:function(e,t,n){"use strict";e.exports=n(958)("key","value","key+value")},970:function(e,t,n){"use strict";var r,i=n(777),o=n(733),a=n(822),s=n(729).toStringTag,l=n(969),u=Object.defineProperties,c=a.prototype._unBind;r=e.exports=function(e,t){if(!(this instanceof r))return new r(e,t);a.call(this,e.__mapKeysData__,e),t&&l[t]||(t="key+value"),u(this,{__kind__:o("",t),__values__:o("w",e.__mapValuesData__)})},i&&i(r,a),r.prototype=Object.create(a.prototype,{constructor:o(r),_resolve:o(function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]}),_unBind:o(function(){this.__values__=null,c.call(this)}),toString:o(function(){return"[object Map Iterator]"})}),Object.defineProperty(r.prototype,s,o("c","Map Iterator"))},971:function(e,t,n){"use strict";var r,i=n(843),o=n(934),a=n(777),s=n(721),l=n(714),u=n(733),c=n(976),p=n(729),f=n(850),h=n(962),d=n(970),g=n(968),v=Function.prototype.call,m=Object.defineProperties,y=Object.getPrototypeOf;e.exports=r=function(){var e,t,n,i=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return n=g&&a&&Map!==r?a(new Map,y(this)):this,null!=i&&f(i),m(n,{__mapKeysData__:u("c",e=[]),__mapValuesData__:u("c",t=[])}),i?(h(i,function(n){var r=l(n)[0];n=n[1],-1===o.call(e,r)&&(e.push(r),t.push(n))},n),n):n},g&&(a&&a(r,Map),r.prototype=Object.create(Map.prototype,{constructor:u(r)})),c(m(r.prototype,{clear:u(function(){this.__mapKeysData__.length&&(i.call(this.__mapKeysData__),i.call(this.__mapValuesData__),this.emit("_clear"))}),delete:u(function(e){var t=o.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:u(function(){return new d(this,"key+value")}),forEach:u(function(e){var t,n,r=arguments[1];for(s(e),t=this.entries(),n=t._next();void 0!==n;)v.call(e,r,this.__mapValuesData__[n],this.__mapKeysData__[n],this),n=t._next()}),get:u(function(e){var t=o.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:u(function(e){return-1!==o.call(this.__mapKeysData__,e)}),keys:u(function(){return new d(this,"key")}),set:u(function(e,t){var n,r=o.call(this.__mapKeysData__,e);return-1===r&&(r=this.__mapKeysData__.push(e)-1,n=!0),this.__mapValuesData__[r]=t,n&&this.emit("_add",r,e),this}),size:u.gs(function(){return this.__mapKeysData__.length}),values:u(function(){return new d(this,"value")}),toString:u(function(){return"[object Map]"})})),Object.defineProperty(r.prototype,p.iterator,u(function(){return this.entries()})),Object.defineProperty(r.prototype,p.toStringTag,u("c","Map"))},972:function(e,t,n){"use strict";var r={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!r[typeof Symbol.iterator]&&(!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag])}},973:function(e,t,n){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},974:function(e,t,n){"use strict";var r,i,o,a,s=n(733),l=n(975),u=Object.create,c=Object.defineProperties,p=Object.defineProperty,f=Object.prototype,h=u(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),a=!0}catch(e){}}var d=function(){var e=u(null);return function(t){for(var n,r,i=0;e[t+(i||"")];)++i;return t+=i||"",e[t]=!0,n="@@"+t,p(f,n,s.gs(null,function(e){r||(r=!0,p(this,n,s(e)),r=!1)})),n}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return a?r(t):(n=u(o.prototype),t=void 0===t?"":String(t),c(n,{__description__:s("",t),__name__:s("",d(t))}))},c(i,{for:s(function(e){return h[e]?h[e]:h[e]=i(String(e))}),keyFor:s(function(e){var t;l(e);for(t in h)if(h[t]===e)return t}),hasInstance:s("",r&&r.hasInstance||i("hasInstance")),isConcatSpreadable:s("",r&&r.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",r&&r.iterator||i("iterator")),match:s("",r&&r.match||i("match")),replace:s("",r&&r.replace||i("replace")),search:s("",r&&r.search||i("search")),species:s("",r&&r.species||i("species")),split:s("",r&&r.split||i("split")),toPrimitive:s("",r&&r.toPrimitive||i("toPrimitive")),toStringTag:s("",r&&r.toStringTag||i("toStringTag")),unscopables:s("",r&&r.unscopables||i("unscopables"))}),c(o.prototype,{constructor:s(i),toString:s("",function(){return this.__name__})}),c(i.prototype,{toString:s(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:s(function(){return l(this)})}),p(i.prototype,i.toPrimitive,s("",function(){var e=l(this);return"symbol"==typeof e?e:e.toString()})),p(i.prototype,i.toStringTag,s("c","Symbol")),p(o.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag])),p(o.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive]))},975:function(e,t,n){"use strict";var r=n(973);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},976:function(e,t,n){"use strict";var r,i,o,a,s,l,u,c=n(733),p=n(721),f=Function.prototype.apply,h=Function.prototype.call,d=Object.create,g=Object.defineProperty,v=Object.defineProperties,m=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return p(t),m.call(this,"__ee__")?n=this.__ee__:(n=y.value=d(null),g(this,"__ee__",y),y.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return p(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),f.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(p(t),!m.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if("object"==typeof(r=n[e]))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},a=function(e){var t,n,r,i,o;if(m.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)f.call(r,this,o)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];f.call(i,this,o)}},s={on:r,once:i,off:o,emit:a},l={on:c(r),once:c(i),off:c(o),emit:c(a)},u=v({},l),e.exports=t=function(e){return null==e?d(u):v(Object(e),l)},t.methods=s},999:function(e,t,n){"use strict";function r(e){var t=new i;return a(e,t),t.concat()}function i(){this._array=new Array(20),this._i=0}var o=n(716).Buffer,a=n(854),s=n(755).EventEmitter;n(715)(i,s),i.prototype.write=function(e){return this._array[this._i++]=e,!0},i.prototype.concat=function(){var e,t,n=0,r=new Array(this._array.length),i=this._array,a=0;for(e=0;e<i.length&&void 0!==i[e];e++)"string"!=typeof i[e]?r[e]=i[e].length:r[e]=o.byteLength(i[e]),n+=r[e];for(t=o.allocUnsafe(n),e=0;e<i.length&&void 0!==i[e];e++)"string"!=typeof i[e]?(i[e].copy(t,a),a+=r[e]):(t.write(i[e],a),a+=r[e]);return t},e.exports=r}});
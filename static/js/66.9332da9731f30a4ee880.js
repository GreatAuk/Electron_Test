webpackJsonp([66],{1101:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e(1182);a.default={data:function(){return{chartLine:null,chartPie:null,percent:65,uid:JSON.parse(sessionStorage.getItem("userInfo")).uid,alarmLevel:{one:null,two:null,three:null,four:null},alarmPercent:{one:0,two:0,three:0,four:0},alarm_commonCompare:[],repair_commonCompare:[],energySpecified:0,EnergyChartShow:!1,proportion:0,isshowbigscreen:JSON.parse(sessionStorage.getItem("userInfo")).custompage,allEvents:[],loading:!0,repairdialogLoading:!0,alarmdialogLoading:!0}},computed:{color:function(){var t="#2db7f5";return 100==this.percent&&(t="#5cb85c"),t}},mounted:function(){var t=this;this.fetchInfo(),this.fetchalarmNum(),this.fetchsubsystemData(),e.i(r.a)().then(function(a){var e=JSON.parse(a.data);if(e.success){var r=[];e.data_list.forEach(function(t){r.push(t.name)}),t.drawMixChart(e.value_x,e.data_list,r),t.energySpecified=e.quota,t.proportion=Number(e.proportion)}else t.EnergyChartShow=!0}).catch(function(t){}).then(function(a){t.loading=!1})},methods:{drawMixChart:function(t,a,e){this.mixchart=echarts.init(document.getElementById("container")),this.mixchart.setOption({xAxis:{type:"category",boundaryGap:!1,data:t,show:!!a.length},color:["#2297E8","#48CE38","#F8D156","#FD9827","#9764DC","#339999"],grid:{top:50,bottom:60,left:"8%",right:"2%"},title:{text:a.length?"":"暂无数据",x:"center",top:5,textStyle:{fontSize:14}},tooltip:{trigger:"axis"},yAxis:{type:"value",name:"kWh",axisLabel:{formatter:function(t){return t>1e3?t/1e3+"k":t}},show:!!a.length},legend:{data:e,bottom:10},series:a}),window.addEventListener("resize",this.mixchart.resize),window.onresize=this.mixchart.resize},drawPieChart:function(t,a,e){echarts.init(document.getElementById(t)).setOption({title:{text:a.length?"":"暂无数据",top:5,left:"center",textStyle:{fontSize:14}},color:["#2297E8","#48CE38","#F8D156","#FD9827","#9764DC","#339999"],tooltip:{trigger:"item",formatter:"{b} : {d}%"},legend:{type:"scroll",show:!0,bottom:0,data:e},series:[{name:"",type:"pie",radius:"60%",center:["50%","50%"],data:a,itemStyle:{normal:{label:{show:!1}}}}]}),window.addEventListener("resize",echarts.init(document.getElementById(t)).resize),window.onresize=echarts.init(document.getElementById(t)).resize},fetchInfo:function(){var t=this;e.i(r.b)(this.uid).then(function(a){if(JSON.parse(a.data).success){t.pnum=JSON.parse(a.data).pnum,t.pointnum=JSON.parse(a.data).pointnum;new CountUp("projectTotal",0,JSON.parse(a.data).pnum,0,2.5).start();new CountUp("monitorPoint",1e3,JSON.parse(a.data).pointnum,0,2.5).start()}}).catch(function(t){})},fetchalarmNum:function(){var t=this;e.i(r.c)(this.uid).then(function(a){t.alarmLevel.one=JSON.parse(a.data).list[0].num,t.alarmLevel.two=JSON.parse(a.data).list[1].num,t.alarmLevel.three=JSON.parse(a.data).list[2].num,t.alarmLevel.four=JSON.parse(a.data).list[3].num;var e=0;JSON.parse(a.data).list.forEach(function(t){e+=t.num}),0===e&&(e=1),t.alarmPercent.one=t.toPercent(JSON.parse(a.data).list[0].num/e),t.alarmPercent.two=t.toPercent(JSON.parse(a.data).list[1].num/e),t.alarmPercent.three=t.toPercent(JSON.parse(a.data).list[2].num/e),t.alarmPercent.four=t.toPercent(JSON.parse(a.data).list[3].num/e)}).catch(function(t){})},fetchsubsystemData:function(){var t=this;e.i(r.d)().then(function(a){var e=JSON.parse(a.data),r=[],n=[];e.data.length&&(e.data.forEach(function(t){t.AnValue=Number(t.AnValue);var a={name:t.name,value:t.value};n.push(t.name),r.push(a)}),t.drawPieChart("alarm-chart",r,n),t.alarm_commonCompare=e.data)}).catch(function(t){}).then(function(a){t.alarmdialogLoading=!1}),e.i(r.e)().then(function(a){var e=JSON.parse(a.data),r=[],n=[];e.data.length&&(e.data.forEach(function(t){t.AnValue=Number(t.AnValue);var a={name:t.name,value:t.value};n.push(t.name),r.push(a)}),t.drawPieChart("repair-chart",r,n),t.repair_commonCompare=e.data)}).catch(function(t){}).then(function(a){t.repairdialogLoading=!1})},toPercent:function(t){return Number((1e4*t/100).toFixed(1))},switchbigScreen:function(){var t=JSON.parse(sessionStorage.getItem("userInfo")),a=t.token,e=t.custompage;window.location.href=e.indexOf("http")>-1?e:"http://www.sinocold.net:83?"+a},fetchcalendarInfo:function(){var t=this,a=new Date,n=a.format("yyyy-MM-dd").split("-");n.splice(2,1,"01");var i=n.join("-"),s=a.getMonth()+2,o=s>10?s:"0"+s,l=a.getFullYear()+"-"+o+"-01";e.i(r.f)(i,l).then(function(a){t.allEvents=JSON.parse(a.data)})}}}},1182:function(t,a,e){"use strict";e.d(a,"b",function(){return n}),e.d(a,"c",function(){return i}),e.d(a,"d",function(){return s}),e.d(a,"e",function(){return o}),e.d(a,"a",function(){return l}),e.d(a,"f",function(){return c});var r=e(32),n=function(t){return r.a.get("/api/menu/Info?uid="+t)},i=function(t){return r.a.get("/api/menu/alarmLevelNum?uid="+t)},s=function(){return r.a.get("/api/Alarm/alarmChildNum?pid=0")},o=function(){return r.a.get("/api/Repair_order/GetRepair_SysTemCount")},l=function(){return r.a.get("/api/Energy/GetProjectS_Energy_Month")},c=function(t,a){return r.a.get("/api/Maintain_order/Maintain_orderDate_GetList",{params:{startTime:t,endTime:a}})}},1302:function(t,a,e){a=t.exports=e(539)(),a.push([t.i,".prograss-bar svg path:nth-of-type(2){stroke:#2297e8}.boxItem .el-progress__text,.chartInfo .el-progress__text{font-size:20px!important}",""])},1303:function(t,a,e){a=t.exports=e(539)(),a.push([t.i,".box[data-v-962f7dd6]{border-radius:4px}h2[data-v-962f7dd6]{margin:20px 0;font-size:24px}.panels[data-v-962f7dd6]{margin-bottom:20px;padding-right:0!important}.panel[data-v-962f7dd6]{background:#fff;padding:5px}.panel>div[data-v-962f7dd6]{display:inline-block}.panel .panel-left .title-icon[data-v-962f7dd6]{font-size:35px;vertical-align:.15em;margin:0 10px}.panel .panel-right .number[data-v-962f7dd6]{font-size:30px;font-weight:700;color:#3c3c3c}.panel .panel-right .subtitle[data-v-962f7dd6]{font-size:13px;color:#3c3c3c}.graphic-example>div[data-v-962f7dd6]{display:inline-block}.graphic-example[data-v-962f7dd6]{background:#fff;position:relative}.graphic-example .chartInfo[data-v-962f7dd6]{text-align:center;width:17%}.graphic-example .chartInfo .chartInfo-circle[data-v-962f7dd6]{height:50%;text-align:center;margin-top:40%}.graphic-example .chartInfo .chartInfo-circle .energyPercent[data-v-962f7dd6]{margin-top:10px;font-size:16px;color:#3c3c3c}.box-body[data-v-962f7dd6]{background:#fff;border-radius:0 0 4px 4px;text-align:center;height:300px;padding-top:10px}.box-body .body_padding[data-v-962f7dd6]{height:220px;padding:15px}.backBigscreen[data-v-962f7dd6]{position:absolute;right:10px}.chartBox[data-v-962f7dd6]{height:370px}.chartBox .insideBox[data-v-962f7dd6]{border-radius:4px;height:350px;margin-bottom:20px;background:#fff}.boxItem[data-v-962f7dd6]{height:145px;text-align:center}.boxItem .alarmNum[data-v-962f7dd6]{font-size:14px;margin-top:5px;color:#3c3c3c}#container[data-v-962f7dd6]{height:300px;width:83%}.chart-wrapper[data-v-962f7dd6]{height:370px;border-radius:4px;background:#fff;margin-bottom:20px;position:relative}.chart-wrapper .chart-wrap[data-v-962f7dd6]{position:relative;height:330px}.chart-wrapper .chart-wrap .chart-box[data-v-962f7dd6]{height:320px;width:calc(100% - 240px)}.chart-wrapper .chart-wrap .commonCompare-wrapper[data-v-962f7dd6]{min-width:200px;position:absolute;top:0;margin-left:20px;right:0;height:100%;padding-top:20px;box-sizing:border-box;overflow-y:auto}.chart-wrapper .chart-wrap .commonCompare-wrapper .commonCompare-cell[data-v-962f7dd6]{line-height:40px;box-sizing:border-box;width:200px;color:#3c3c3c}.chart-wrapper .chart-wrap .commonCompare-wrapper .commonCompare-cell .commonCompare-cell_icon[data-v-962f7dd6]{color:#399;font-size:25px;vertical-align:-.25em}.chart-wrapper .chart-wrap .commonCompare-wrapper .commonCompare-cell .commonCompare-cell_name[data-v-962f7dd6]{display:inline-block;font-size:12px}.index-no-data[data-v-962f7dd6]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#5e6d82;font-size:14px}@media (min-width:768px){.el-col-sm-8[data-v-962f7dd6]{width:20%;box-sizing:border-box}}@media (min-width:768px) and (max-width:1560px){.el-col-sm-8[data-v-962f7dd6]{width:25%;box-sizing:border-box}}@media (max-width:768px){.el-col-xs-18[data-v-962f7dd6]{width:60%}}",""])},1432:function(t,a,e){var r=e(1302);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e(540)("757b26b6",r,!0)},1433:function(t,a,e){var r=e(1303);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e(540)("29d0ba9a",r,!0)},1579:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-row",{staticClass:"pdg2",attrs:{gutter:20}},[e("el-row",{staticClass:"mg0",attrs:{gutter:20}},[e("el-col",{staticClass:"panels",attrs:{xs:24,sm:8,md:6,lg:3}},[e("div",{staticClass:"box panel"},[e("div",{staticClass:"panel-left"},[e("c-svg",{attrs:{name:"checked","class-name":"title-icon"}})],1),t._v(" "),e("div",{staticClass:"panel-right"},[e("div",{staticClass:"number",attrs:{id:"projectTotal"}}),t._v(" "),e("div",{staticClass:"subtitle"},[t._v("\n            项目总数\n          ")])])])]),t._v(" "),e("el-col",{staticClass:"panels",attrs:{xs:24,sm:8,md:6,lg:3}},[e("div",{staticClass:"box panel"},[e("div",{staticClass:"panel-left"},[e("c-svg",{attrs:{name:"parameter","class-name":"title-icon"}})],1),t._v(" "),e("div",{staticClass:"panel-right"},[e("div",{staticClass:"number",attrs:{id:"monitorPoint"}}),t._v(" "),e("div",{staticClass:"subtitle"},[t._v("\n            监测点数\n          ")])])])]),t._v(" "),t.isshowbigscreen?e("el-button",{staticClass:"backBigscreen",attrs:{type:"primary"},on:{click:t.switchbigScreen}},[t._v("\n      切换大屏模式\n    ")]):t._e()],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"chartBox",attrs:{xs:24,sm:24,md:24,lg:16}},[e("div",{staticClass:"insideBox",staticStyle:{overflow:"hidden"}},[e("div",{staticClass:"title-wrap"},[e("h3",[e("c-svg",{staticClass:"title-icon",attrs:{name:"comparison"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("能耗趋势")])],1)]),t._v(" "),e("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"graphic-example",attrs:{"element-loading-text":"加载中..."}},[e("el-col",{attrs:{id:"container"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.EnergyChartShow,expression:"EnergyChartShow"}],staticClass:"index-no-data"},[t._v("\n            暂无数据\n          ")]),t._v(" "),e("el-col",{staticClass:"chartInfo",attrs:{span:4}},[e("div",{staticClass:"chartInfo-circle"},[e("el-progress",{staticClass:"prograss-bar",attrs:{type:"circle",percentage:t.proportion,"stroke-width":10,width:100}}),t._v(" "),e("p",{staticClass:"energyPercent"},[t._v("\n                本月实际能耗占比\n              ")])],1)])],1)],1)]),t._v(" "),e("el-col",{staticClass:"chartBox",attrs:{xs:24,sm:24,md:24,lg:8}},[e("div",{staticClass:"insideBox",staticStyle:{overflow:"hidden"}},[e("div",{staticClass:"title-wrap"},[e("h3",[e("c-svg",{attrs:{name:"s_passenger_flow","class-name":"title-icon"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("当月报警统计")])],1)]),t._v(" "),e("el-col",{staticClass:"box-body"},[e("el-col",{staticClass:"boxItem",attrs:{span:12}},[e("el-progress",{staticClass:"prograss-bar",attrs:{type:"circle",percentage:t.alarmPercent.one,"stroke-width":10,width:100}}),t._v(" "),e("p",{staticClass:"alarmNum"},[t._v("\n              一级警报 "+t._s(t.alarmLevel.one)+"个\n            ")])],1),t._v(" "),e("el-col",{staticClass:"boxItem",attrs:{span:12}},[e("el-progress",{staticClass:"prograss-bar",attrs:{type:"circle",percentage:t.alarmPercent.two,"stroke-width":10,width:100}}),t._v(" "),e("p",{staticClass:"alarmNum"},[t._v("\n              二级警报 "+t._s(t.alarmLevel.two)+"个\n            ")])],1),t._v(" "),e("el-col",{staticClass:"boxItem",attrs:{span:12}},[e("el-progress",{staticClass:"prograss-bar",attrs:{type:"circle",percentage:t.alarmPercent.three,"stroke-width":10,width:100}}),t._v(" "),e("p",{staticClass:"alarmNum"},[t._v("\n              三级警报 "+t._s(t.alarmLevel.three)+"个\n            ")])],1),t._v(" "),e("el-col",{staticClass:"boxItem",attrs:{span:12}},[e("el-progress",{staticClass:"prograss-bar",attrs:{type:"circle",percentage:t.alarmPercent.four,"stroke-width":10,width:100}}),t._v(" "),e("p",{staticClass:"alarmNum"},[t._v("\n              四级警报 "+t._s(t.alarmLevel.four)+"个\n            ")])],1)],1)],1)])],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[e("div",{staticClass:"chart-wrapper",staticStyle:{overflow:"hidden"}},[e("div",{staticClass:"title-wrap"},[e("h3",[e("c-svg",{attrs:{name:"bar_chart","class-name":"title-icon"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("维修子系统分类")])],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.repairdialogLoading,expression:"repairdialogLoading"}],staticClass:"chart-wrap",attrs:{"element-loading-text":"加载中..."}},[e("div",{staticClass:"chart-box",attrs:{id:"repair-chart"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.repair_commonCompare.length,expression:"!repair_commonCompare.length"}],staticClass:"index-no-data"},[t._v("\n            暂无数据\n          ")]),t._v(" "),e("div",{staticClass:"commonCompare-wrapper"},t._l(t.repair_commonCompare,function(a){return e("div",{key:a.index,staticClass:"commonCompare-cell"},[e("span",{staticClass:"commonCompare-cell_name"},[t._v(t._s(a.name))]),t._v(" "),e("span",{staticClass:"commonCompare-cell_count"},[e("c-svg",{staticClass:"commonCompare-cell_icon",attrs:{name:a.AnValue>0?"arrowsupline":"arrowsdownline"}}),t._v("\n                "+t._s(a.AnValue)+"%\n              ")],1)])}),0)])])]),t._v(" "),e("el-col",{attrs:{xs:24,sm:24,md:24,lg:12}},[e("div",{staticClass:"chart-wrapper",staticStyle:{overflow:"hidden"}},[e("div",{staticClass:"title-wrap"},[e("h3",[e("c-svg",{attrs:{name:"bar_chart","class-name":"title-icon"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("报警子系统分类")])],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.alarmdialogLoading,expression:"alarmdialogLoading"}],staticClass:"chart-wrap",attrs:{"element-loading-text":"加载中..."}},[e("div",{staticClass:"chart-box",attrs:{id:"alarm-chart"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.alarm_commonCompare.length,expression:"!alarm_commonCompare.length"}],staticClass:"index-no-data"},[t._v("\n            暂无数据\n          ")]),t._v(" "),e("div",{staticClass:"commonCompare-wrapper thin-scroll"},t._l(t.alarm_commonCompare,function(a){return e("div",{key:a.index,staticClass:"commonCompare-cell"},[e("span",{staticClass:"commonCompare-cell_name"},[t._v(t._s(a.name))]),t._v(" "),e("span",{staticClass:"commonCompare-cell_count"},[e("c-svg",{staticClass:"commonCompare-cell_icon",attrs:{name:a.AnValue>0?"arrowsupline":"arrowsdownline"}}),t._v("\n                "+t._s(a.AnValue)+"%\n              ")],1)])}),0)])])])],1)],1)},staticRenderFns:[]}},600:function(t,a,e){e(1433),e(1432);var r=e(38)(e(1101),e(1579),"data-v-962f7dd6",null);t.exports=r.exports}});
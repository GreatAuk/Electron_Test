webpackJsonp([16,74,115],{1025:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"transfer",style:{width:e.KDLsubuser?"":"458px"}},[e.KDLsubuser?r("div",{staticClass:"transfer-left"},[r("div",{staticClass:"transfer-header"},[r("el-input",{attrs:{clearable:"",size:"small","suffix-icon":"el-icon-search"},model:{value:e.filter,callback:function(t){e.filter="string"==typeof t?t.trim():t},expression:"filter"}})],1),e._v(" "),r("el-table",{staticStyle:{width:"458px"},attrs:{data:e.leftData,height:"400"},on:{"selection-change":e.leftSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),r("el-table-column",{attrs:{prop:"pname",label:"点位名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"DeviceName",label:"设备"}}),e._v(" "),r("el-table-column",{attrs:{prop:"SysName",label:"系统"}})],1)],1):e._e(),e._v(" "),e.KDLsubuser?r("div",{staticClass:"transfer-center"},[r("el-button",{attrs:{size:"mini",type:e.leftSelect.length?"primary":"",disabled:!e.leftSelect.length},nativeOn:{click:function(t){return e.transferRight(t)}}},[r("i",{staticClass:"el-icon-arrow-right"})]),e._v(" "),r("br"),e._v(" "),r("el-button",{attrs:{size:"mini",type:e.rightSelect.length?"primary":"",disabled:!e.rightSelect.length},nativeOn:{click:function(t){return e.transferLeft(t)}}},[r("i",{staticClass:"el-icon-arrow-left"})])],1):e._e(),e._v(" "),r("div",{staticClass:"transfer-right"},[e._m(0),e._v(" "),r("el-table",{staticStyle:{width:"458px"},attrs:{data:e.rightData,height:"400"},on:{"selection-change":e.rightSelectionChange}},[e.KDLsubuser?r("el-table-column",{attrs:{type:"selection",width:"35"}}):e._e(),e._v(" "),r("el-table-column",{attrs:{prop:"pname",label:"点位名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"DeviceName",label:"设备"}}),e._v(" "),r("el-table-column",{attrs:{prop:"SysName",label:"系统"}})],1)],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"transfer-header"},[r("span",{staticStyle:{color:"#fff"}},[e._v("已选中点位")])])}]}},1026:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-popover",{attrs:{placement:e.placement,width:"200",trigger:"click","popper-class":"user-select","visible-arrow":!1},on:{hide:e.hide}},[e._t("default",null,{slot:"reference"}),e._v(" "),r("div",{staticClass:"us-header"},[r("el-input",{attrs:{size:"small",clearable:"","suffix-icon":"el-icon-search",placeholder:"用户名"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),e._v(" "),r("ul",{staticClass:"us-list thin-scroll"},e._l(e.list,function(t,a){return r("li",{key:a,class:["us-list-item",1===t.check?"us-list-item-select":""],on:{click:function(r){return e.select(t)}}},[r("c-svg",{class:["us-check",1===t.check?"us-check-show":""],attrs:{name:"true"}}),e._v(" "),r("img",{staticClass:"us-avatar",attrs:{src:e.BASE_URL+"/Img/Person/"+t.avatar,alt:""}}),e._v(" "),r("span",{staticClass:"us-name"},[e._v(e._s(t.name))])],1)}),0)],2)},staticRenderFns:[]}},1087:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(687),i=r.n(a),l=r(132),s=r.n(l),n=r(93),o=r.n(n),c=r(562),u=r.n(c),p=r(563),m=r.n(p),d=r(722),f=r(837);t.default={components:{Transfer:u.a,UserSelect:m.a},data:function(){var e=this,t=function(t,r,a){var i=e.getIndex(t.field);if(e.simulateRegularForm.regulars[i].noticeCheck){var l=e.isInteger(r);l.res?a():a(new Error(l.msg))}else a()},r=function(t,r,a){var i=e.getIndex(t.field);if(e.simulateRegularForm.regulars[i].thresholdCheck){var l=e.isInteger(r);l.res?a():a(new Error(l.msg))}else a()},a=function(t,r,a){var i=e.getIndex(t.field),l=t.field.split(".")[2].replace("limitValue","");if(e.simulateRegularForm.regulars[i]["check"+l]){var s=e.isInteger(r);s.res?a():a(new Error(s.msg))}else a()},i=function(t,r,a){var i=e.getIndex(t.field),l=t.field.split(".")[2].replace("duration","");if(e.simulateRegularForm.regulars[i]["check"+l]){var s=e.isInteger(r);s.res?a():a(new Error(s.msg))}else a()},l=function(t,r,a){var i=e.getIndex(t.field);if(e.stateRegularForm.regulars[i].noticeCheck){var l=e.isInteger(r);l.res?a():a(new Error(l.msg))}else a()},s=function(t,r,a){var i=e.getIndex(t.field),l=i.index1,s=i.index2;if(e.stateRegularForm.regulars[l].states[s].check){var n=e.isInteger(r);n.res?a():a(new Error(n.msg))}else a()},n=function(t,r,a){if(e.noticeForm.repeatCheck){var i=e.isInteger(r);i.res?a():a(new Error(i.msg))}else a()},o=function(t,r,a){if(e.noticeForm.updateCheck){var i=e.isInteger(r);i.res?a():a(new Error(i.msg))}else a()};return{basicForm:{name:"",project:"",remark:"",pointType:"",points:[]},basicFormRules:{project:[{required:!0,message:"请选择所属项目",trigger:"change"}],name:[{required:!0,message:"请输入策略名称",trigger:"blur"},{min:2,max:25,message:"长度在 2 到 25 个字符",trigger:"blur"}],pointType:[{required:!0,message:"请选择占位类型",trigger:"change"}]},pointTypeList:[],pointSource:[],currentPointType:"simulate",simulateRegularForm:{regulars:[{popoverVisible:!1,time:"",noticeCheck:!1,delayNoticeTime:"",thresholdCheck:!1,threshold:"",check1:!0,limitValue1:"",duration1:"",level1:1,check2:!1,limitValue2:"",duration2:"",level2:1,check3:!1,limitValue3:"",duration3:"",level3:1,check4:!1,limitValue4:"",duration4:"",level4:1,errorMsg:""}]},stateRegularForm:{regulars:[],stateOptions:[]},noticeForm:{normal:["微信"],important:["微信"],emergency:["微信"],repeatCheck:!1,repeatTime:"",updateCheck:!1,updateTime1:"",updateTime2:"",updateTime3:""},noticeFormRules:{repeatTime:[{validator:n,trigger:"blur"}],updateTime1:[{validator:o,trigger:"blur"}],updateTime2:[{validator:o,trigger:"blur"}],updateTime3:[{validator:o,trigger:"blur"}]},contactTableData:[],userList:[],checkDelayNoticeTime:t,checkThreshold:r,checkLimit:a,checkDuration:i,checkStateDuration:s,checkStateDelayNoticeTime:l,KDLsubuser:!0,uid:JSON.parse(sessionStorage.getItem("userInfo")).uid}},computed:{proList:function(){return this.$store.state.app.proList}},mounted:function(){var e=this;this.$route.query.id&&(630!==this.uid&&631!==this.uid&&632!==this.uid||(this.KDLsubuser=!1),r.i(f.a)(this.$route.query.id).then(function(t){var r=JSON.parse(t.data);r.basicForm.points=r.checkPoint,e.basicForm=r.basicForm,e.noticeForm=r.noticeForm,r.simulateRegulars.length?r.simulateRegulars.forEach(function(t){t.time=[e.stringToDate(t.time[0]),e.stringToDate(t.time[1])]}):r.stateRegulars.forEach(function(t){t.time=[e.stringToDate(t.time[0]),e.stringToDate(t.time[1])]}),e.simulateRegularForm.regulars=r.simulateRegulars,e.stateRegularForm.regulars=r.stateRegulars,r.concats.forEach(function(t){t.range=[e.stringToDate(t.range[0]),e.stringToDate(t.range[1])]}),e.contactTableData=r.concats,e.fetchPointList(),e.fetchUserList(e.basicForm.ID),e.fetchPointTypeList(e.basicForm.project)}).catch(function(t){e.$message.error("服务器错误，策略获取失败")}))},beforeDestroy:function(){clearTimeout(this.timer)},methods:{changeProject:function(e){this.fetchPointTypeList(e),this.fetchUserList(),this.clearForm(),this.basicForm.pointType=""},changePointType:function(e){var t=this;this.fetchPointList(),this.clearForm(),this.pointTypeList[0].options.forEach(function(r){if(r.ID===e){t.currentPointType="state";r.Value.split(" | ").map(function(e){return e.split("：")}).forEach(function(e){t.stateRegularForm.stateOptions.push({tag:e[1],value:e[0]})});var a=t.stateRegularForm.stateOptions.map(function(e,t){return{tag:e.tag,tag_value:e.value,check:0===t,limitValue:"",duration:"",level:1,errorMsg:""}});t.stateRegularForm.regulars.push({popoverVisible:!1,time:"",noticeCheck:!1,delayNoticeTime:"",states:a})}}),this.pointTypeList[1].options.forEach(function(r){r.ID===e&&(t.currentPointType="simulate")})},addRegularItem:function(){var e=this;if("simulate"===this.currentPointType)this.simulateRegularForm.regulars.push({time:"",noticeCheck:!1,delayNoticeTime:"",thresholdCheck:!1,threshold:"",check1:!0,limitValue1:"",duration1:"",level1:1,check2:!1,limitValue2:"",duration2:"",level2:1,check3:!1,limitValue3:"",duration3:"",level3:1,check4:!1,limitValue4:"",duration4:"",level4:1,errorMsg:""});else{var t=this.stateRegularForm.stateOptions.map(function(e,t){return{tag:e.tag,tag_value:e.value,check:0===t,limitValue:"",duration:"",level:1,errorMsg:""}});this.stateRegularForm.regulars.push({popoverVisible:!1,time:"",noticeCheck:!1,delayNoticeTime:"",states:t})}this.$nextTick(function(){e.smoothScroll(".scroll-target")})},removeRegularItem:function(e,t){t.popoverVisible=!1,"state"===this.currentPointType?this.stateRegularForm.regulars.splice(e,1):this.simulateRegularForm.regulars.splice(e,1)},submit:function(){var e=this,t=[];return this.$refs.basicForm.validate(function(e){if(!e)return t.push(!1),!1;t.push(!0)}),"state"===this.currentPointType?this.$refs.stateRegularForm.validate(function(e){if(!e)return t.push(!1),!1;t.push(!0)}):this.$refs.simulateRegularForm.validate(function(r){if(!r)return t.push(!1),!1;t.push(!0),e.simulateRegularForm.regulars.length&&e.simulateRegularForm.regulars.forEach(function(t){for(var r=[],a=[],i=1;i<=4;i++)t["check"+i]&&(r.push(t["limitValue"+i]),a.push(t["level"+i]));if(e.compare(r)?e.$set(t,"errorMsg",""):e.$set(t,"errorMsg","错误的限定值大小关系（上上限 > 上限 > 下限 > 下下限）"),t.check1&&t.check2&&t.level2<=t.level1){var l=t.errorMsg?t.errorMsg+"   &    上上限的报警等级必须大于上限":"上上限的报警等级必须大于上限";e.$set(t,"errorMsg",l)}if(t.check3&&t.check4&&t.level4>=t.level3){var s=t.errorMsg?t.errorMsg+"   &    下限的报警等级必须小于下下限":"下限的报警等级必须小于下下限";e.$set(t,"errorMsg",s)}})}),this.$refs.noticeForm.validate(function(e){if(!e)return t.push(!1),!1;t.push(!0)}),this.basicForm.points.length?this.contactTableData.some(function(e){return!e.levels.length})?(this.$message.warning("请为所有的报警联系人添加接收通知等级"),!1):void this.$nextTick(function(){if(t.includes(!1)||document.querySelectorAll(".el-alert--error").length)return e.$message({message:"请确保不存在错误提示后再提交",type:"warning",duration:3e3}),!1;var a={},i=JSON.parse(o()(e.basicForm));if(i.points=i.points.map(function(e){return e.point}),a.basicForm=i,"state"===e.currentPointType){var l=JSON.parse(o()(e.stateRegularForm.regulars));l.forEach(function(t){t.time=[e.timeFormat(t.time[0]),e.timeFormat(t.time[1])]}),a.stateRegulars=l,a.strategyType=2}else{var s=JSON.parse(o()(e.simulateRegularForm.regulars));s.forEach(function(t){t.time=[e.timeFormat(t.time[0]),e.timeFormat(t.time[1])]}),a.simulateRegulars=s,a.strategyType=1}a.noticeForm=e.noticeForm;var n=JSON.parse(o()(e.contactTableData));n.forEach(function(t){t.range=[e.timeFormat(t.range[0]),e.timeFormat(t.range[1])]}),a.concats=n,e.$route.query.id?(a.basicForm.ID=e.$route.query.id,r.i(f.b)(a).then(function(t){t.data?(e.$message.success("报警策略编辑成功"),e.timer=setTimeout(function(){e.$router.go(-1)},1500)):e.$message.error("报警策略新增失败")})):r.i(f.c)(a).then(function(t){t.data?(e.$message.success("报警策略新增成功"),e.timer=setTimeout(function(){e.$router.go(-1)},1500)):e.$message.error("报警策略新增失败")}).catch(function(e){})}):(this.$message.warning("请至少选择一个报警点位"),!1)},changeSimulateTimeRange:function(e){var t=this.simulateRegularForm.regulars.filter(function(t,r){return r!==e&&t.time}).map(function(e){return e.time});if(!this.isOverlay(this.simulateRegularForm.regulars[e].time,t)){var r=JSON.parse(o()(this.simulateRegularForm.regulars[e]));r.time="",this.$message.warning("当前时间段与其它时间段有重合部分"),this.$set(this.simulateRegularForm.regulars,e,r)}},changeStateTimeRange:function(e){var t=this.stateRegularForm.regulars.filter(function(t,r){return r!==e&&t.time}).map(function(e){return e.time});if(this.isOverlay(this.stateRegularForm.regulars[e].time,t)){var r=JSON.parse(o()(this.stateRegularForm.regulars[e]));r.errorMsg="",this.$set(this.stateRegularForm.regulars,e,r)}else{var a=JSON.parse(o()(this.stateRegularForm.regulars[e]));a.errorMsg="当前时间段与其它时间段有重合部分",this.$set(this.stateRegularForm.regulars,e,a)}},toggleSimulateTriggerCondition:function(e){e.check1||e.check2||e.check3||e.check4?e.errorMsg="":(e.error=!0,e.errorMsg="请至少开启一项触发条件")},toggleStateTriggerCondition:function(e){e.states.map(function(e){return e.check}).includes(!0)?e.errorMsg="":e.errorMsg="请至少开启一项触发条件"},selectAlarmLevel:function(e,t){e.levels.includes(t)?e.levels=e.levels.filter(function(e){return e!==t}):e.levels.push(t)},fetchPointTypeList:function(e){var t=this;r.i(d.e)(e).then(function(e){var r=JSON.parse(e.data);t.pointTypeList=[{label:"状态量",options:r.State},{label:"模拟量",options:r.Analog}],t.basicForm.pointType&&(t.pointTypeList[0].options.forEach(function(e){if(e.ID===t.basicForm.pointType){t.currentPointType="state";e.Value.split(" | ").map(function(e){return e.split("：")}).forEach(function(e){t.stateRegularForm.stateOptions.push({tag:e[1],value:e[0]})});t.stateRegularForm.stateOptions.map(function(e,t){return{tag:e.tag,tag_value:e.value,check:0===t,limitValue:"",duration:"",level:1,errorMsg:""}})}}),t.pointTypeList[1].options.forEach(function(e){e.ID===t.basicForm.pointType&&(t.currentPointType="simulate")}))})},clearForm:function(){this.basicForm.points=[],this.simulateRegularForm.regulars=[],this.simulateRegularForm.regulars.push({popoverVisible:!1,time:"",noticeCheck:!1,delayNoticeTime:"",thresholdCheck:!1,threshold:"",check1:!0,limitValue1:"",duration1:"",level1:1,check2:!1,limitValue2:"",duration2:"",level2:1,check3:!1,limitValue3:"",duration3:"",level3:1,check4:!1,limitValue4:"",duration4:"",level4:1,errorMsg:""}),this.stateRegularForm.regulars=[],this.stateRegularForm.stateOptions=[],this.contactTableData=[],this.fetchUserList()},selectUser:function(e){e.check?(e.range=[new Date("2016","9","06","00","00","00"),new Date("2016","9","06","23","59","59")],this.contactTableData.push(e)):this.contactTableData=this.contactTableData.filter(function(t){return t.userId!==e.userId})},deleteContact:function(e){this.contactTableData=this.contactTableData.filter(function(t){return t.userId!==e.userId}),this.userList.forEach(function(t){t.userId===e.userId&&(t.check=!1)})},fetchPointList:function(){var e=this;this.pointSource=[],r.i(f.d)(this.basicForm.project,this.basicForm.pointType).then(function(t){var r=JSON.parse(t.data);e.pointSource=r}).catch(function(e){})},fetchUserList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.userList=[],r.i(f.e)(this.basicForm.project,t).then(function(t){var r=JSON.parse(t.data);r.forEach(function(e){e.levels||(e.levels=[])}),e.userList=r}).catch(function(e){})},isInteger:function(e){return""===e?{res:!1,msg:"必填"}:parseFloat(e,10)!=e?{res:!1,msg:"必须是数字"}:{res:!0}},getIndex:function(e){var t=e.split(".");return 3===t.length?t[1]:{index1:t[1],index2:t[3]}},smoothScroll:function(e){document.querySelector(e).scrollIntoView({block:"start",behavior:"smooth"})},compare:function(e){return[].concat(s()(new i.a(e))).length===e.length&&e.slice().sort(function(e,t){return t-e}).join(",")===e.join(",")},isOverlay:function(e,t){if(!t.length)return!0;for(var r=!0,a=[60*new Date(e[0]).getHours()*60+60*new Date(e[0]).getMinutes()+new Date(e[0]).getSeconds(),60*new Date(e[1]).getHours()*60+60*new Date(e[1]).getMinutes()+new Date(e[1]).getSeconds()],i=t.map(function(e){return[60*new Date(e[0]).getHours()*60+60*new Date(e[0]).getMinutes()+(new Date).getMinutes,60*new Date(e[1]).getHours()*60+new Date(e[1]).getSeconds()]}),l=0;l<i.length;l++)if(!(i[l][1]<a[0]||a[0]<i[l][0])){r=!1;break}return r},timeFormat:function(e){var t=new Date(e),r=t.getHours(),a=t.getMinutes(),i=t.getSeconds();return(r>9?r:"0"+r)+":"+(a>9?a:"0"+a)+":"+(i>9?i:"0"+i)},stringToDate:function(e){return new Date("2018-8-30 "+e)}}}},1259:function(e,t,r){t=e.exports=r(539)(),t.push([e.i,".alarm-stragegy-edit .custom-panel[data-v-4f3e7276]{background:#fff;border-radius:5px;margin-bottom:22px}.alarm-stragegy-edit .custom-panel-header[data-v-4f3e7276]{padding:16px 24px;font-size:16px;font-weight:700;color:#3c3c3c;border-bottom:1px solid #f7f7f7}.alarm-stragegy-edit .custom-panel-body[data-v-4f3e7276]{padding:24px}.alarm-stragegy-edit .box-light[data-v-4f3e7276]{position:relative;padding:24px;margin:0 84px;background:#fafafa;border-radius:5px}.alarm-stragegy-edit .box-light+.box-light[data-v-4f3e7276]{margin-top:24px}.alarm-stragegy-edit .delete-icon-btn[data-v-4f3e7276]{position:absolute;right:25px;top:30px;width:24px;height:24px;line-height:24px;text-align:center;background:#fe786b;border-radius:50%;z-index:100;cursor:pointer}.alarm-stragegy-edit .delete-icon-btn .icon[data-v-4f3e7276]{color:#fff}.alarm-stragegy-edit .delete-icon-btn[data-v-4f3e7276]:hover{background:red}.alarm-stragegy-edit .box-light-title-weight[data-v-4f3e7276]{margin-right:24px;font-weight:700;color:#3c3c3c}.alarm-stragegy-edit .box-light-title[data-v-4f3e7276]{margin-right:15px;color:#656565;margin-top:10px}.alarm-stragegy-edit .attention-text[data-v-4f3e7276]{color:#878787}.alarm-stragegy-edit .notice-row[data-v-4f3e7276]{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start}.alarm-stragegy-edit .notice-row .el-form-item[data-v-4f3e7276]{margin-bottom:0}.alarm-stragegy-edit .regular-row1[data-v-4f3e7276]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;width:970px}.alarm-stragegy-edit .regular-row1>div[data-v-4f3e7276]{-ms-flex:1;flex:1;color:#656565}.alarm-stragegy-edit .regular-row2[data-v-4f3e7276]{color:#656565}.alarm-stragegy-edit .inline-form-item[data-v-4f3e7276]{display:inline-block}.alarm-stragegy-edit .width85[data-v-4f3e7276]{width:85px}.alarm-stragegy-edit .marginTop10[data-v-4f3e7276]{margin-top:10px}.alarm-stragegy-edit .transfer-wrap[data-v-4f3e7276]{margin-left:80px;width:1000px}",""])},1389:function(e,t,r){var a=r(1259);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(540)("043bc969",a,!0)},1544:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alarm-stragegy-edit pdg2"},[r("el-form",{ref:"basicForm",attrs:{model:e.basicForm,rules:e.basicFormRules,"label-width":"80px",size:"medium"}},[r("div",{staticClass:"custom-panel"},[r("div",{staticClass:"custom-panel-header"},[e._v("\n        基本信息\n      ")]),e._v(" "),r("div",{staticClass:"custom-panel-body"},[r("el-form-item",{attrs:{label:"所属项目",prop:"project"}},[r("el-select",{staticStyle:{width:"360px"},attrs:{placeholder:"请选择项目",disabled:Boolean(e.$route.query.id)},on:{change:e.changeProject},model:{value:e.basicForm.project,callback:function(t){e.$set(e.basicForm,"project",t)},expression:"basicForm.project"}},e._l(e.proList,function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.label}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"策略名称",prop:"name"}},[r("el-input",{staticStyle:{width:"360px"},attrs:{disabled:!e.KDLsubuser,placeholder:"请输入策略名称"},model:{value:e.basicForm.name,callback:function(t){e.$set(e.basicForm,"name","string"==typeof t?t.trim():t)},expression:"basicForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{staticStyle:{width:"360px"},attrs:{rows:3,type:"textarea",disabled:!e.KDLsubuser,placeholder:"请输入备注细则"},model:{value:e.basicForm.remark,callback:function(t){e.$set(e.basicForm,"remark","string"==typeof t?t.trim():t)},expression:"basicForm.remark"}})],1),e._v(" "),r("div",[r("el-form-item",{staticClass:"inline-form-item",attrs:{label:"报警点位",prop:"pointType"}},[r("el-select",{staticStyle:{width:"360px"},attrs:{placeholder:"请选择点位类型",size:"small",disabled:Boolean(e.$route.query.id)},on:{change:e.changePointType},model:{value:e.basicForm.pointType,callback:function(t){e.$set(e.basicForm,"pointType",t)},expression:"basicForm.pointType"}},e._l(e.pointTypeList,function(t){return r("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(a){return r("el-option",{key:a.ID,attrs:{label:a.TypeName,value:a.ID}},[r("span",{staticStyle:{float:"left","margin-right":"25px"}},[e._v(e._s(a.TypeName))]),e._v(" "),"状态量"===t.label?r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(a.Value))]):e._e()])}),1)}),1)],1),e._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"单条报警策略中只能配置一种类型点位的报警",placement:"right"}},[r("c-svg",{staticStyle:{"font-size":"16px","margin-left":"15px"},attrs:{name:"attention"}})],1)],1),e._v(" "),r("div",{staticClass:"transfer-wrap"},[r("Transfer",{attrs:{data:e.pointSource},model:{value:e.basicForm.points,callback:function(t){e.$set(e.basicForm,"points",t)},expression:"basicForm.points"}})],1)],1)])]),e._v(" "),r("div",{staticClass:"custom-panel"},[r("div",{staticClass:"custom-panel-header"},[e._v("\n      报警规则\n      "),e.KDLsubuser?r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{disabled:!Boolean(e.basicForm.pointType),type:"primary",size:"small"},nativeOn:{click:function(t){return e.addRegularItem(t)}}},[e._v("\n        新增\n      ")]):e._e()],1),e._v(" "),r("div",{staticClass:"custom-panel-body"},["simulate"===e.currentPointType?r("el-form",{ref:"simulateRegularForm",attrs:{model:e.simulateRegularForm,"label-width":"80px",size:"small"}},e._l(e.simulateRegularForm.regulars,function(t,a){return r("div",{key:a,class:["box-light",a+1===e.simulateRegularForm.regulars.length?"scroll-target":""]},[r("el-popover",{attrs:{placement:"top",width:"190"},model:{value:t.popoverVisible,callback:function(r){e.$set(t,"popoverVisible",r)},expression:"regular.popoverVisible"}},[r("p",[e._v("确定要删除这条报警规则吗？")]),e._v(" "),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.popoverVisible=!1}}},[e._v("\n                取消\n              ")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.removeRegularItem(a,t)}}},[e._v("\n                确定\n              ")])],1),e._v(" "),r("div",{staticClass:"delete-icon-btn",attrs:{slot:"reference"},slot:"reference"},[r("c-svg",{attrs:{name:"shanchu"}})],1)]),e._v(" "),r("el-form-item",{attrs:{prop:"regulars."+a+".time",rules:{type:"array",required:!0,message:"选择时间范围",trigger:"change"},"label-width":"0"}},[r("el-time-picker",{staticStyle:{width:"220px"},attrs:{"is-range":"",disabled:!e.KDLsubuser,format:"HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围",clearable:!1},on:{change:function(t){return e.changeSimulateTimeRange(a)}},model:{value:t.time,callback:function(r){e.$set(t,"time",r)},expression:"regular.time"}})],1),e._v(" "),r("div",{staticClass:"regular-row1"},[r("div",[r("el-checkbox",{model:{value:t.noticeCheck,callback:function(r){e.$set(t,"noticeCheck",r)},expression:"regular.noticeCheck"}}),e._v("\n              报警恢复时通知，延时\n              "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".delayNoticeTime",rules:{validator:e.checkDelayNoticeTime,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.noticeCheck},model:{value:t.delayNoticeTime,callback:function(r){e.$set(t,"delayNoticeTime",e._n("string"==typeof r?r.trim():r))},expression:"regular.delayNoticeTime"}})],1),e._v("\n              分钟推送\n            ")],1),e._v(" "),r("div",[r("el-checkbox",{model:{value:t.thresholdCheck,callback:function(r){e.$set(t,"thresholdCheck",r)},expression:"regular.thresholdCheck"}}),e._v("\n              阈值死区\n              "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".threshold",rules:{validator:e.checkThreshold,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.thresholdCheck},model:{value:t.threshold,callback:function(r){e.$set(t,"threshold",r)},expression:"regular.threshold"}})],1),e._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"在原报警阈值上下增加两个界限，使报警触发区域变成带状，避免波动引起的误报",placement:"right"}},[e._v("\n                  "),r("c-svg",{staticStyle:{"font-size":"16px","margin-left":"15px"},attrs:{name:"what","class-name":"icon-what"}})],1)],1)]),e._v(" "),r("div",{staticClass:"regular-row2",style:{color:t.check1?"":"#D5D5D5"}},[r("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#ff4949"},on:{change:function(r){return e.toggleSimulateTriggerCondition(t)}},model:{value:t.check1,callback:function(r){e.$set(t,"check1",r)},expression:"regular.check1"}}),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 15px"}},[e._v("超过上上限")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".limitValue1",rules:{validator:e.checkLimit,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.check1,placeholder:"输入阈值"},model:{value:t.limitValue1,callback:function(r){e.$set(t,"limitValue1",r)},expression:"regular.limitValue1"}})],1),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("持续")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".duration1",rules:{validator:e.checkDuration,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.check1,placeholder:"输入时间"},model:{value:t.duration1,callback:function(r){e.$set(t,"duration1",r)},expression:"regular.duration1"}})],1),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("分钟后产生报警，等级为")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item",attrs:{"label-width":"0"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{disabled:!t.check1,placeholder:"请选择报警等级"},model:{value:t.level1,callback:function(r){e.$set(t,"level1",r)},expression:"regular.level1"}},[r("el-option",{attrs:{label:"记录报警",value:4}}),e._v(" "),r("el-option",{attrs:{label:"一般报警",value:3}}),e._v(" "),r("el-option",{attrs:{label:"重要报警",value:2}}),e._v(" "),r("el-option",{attrs:{label:"紧急报警",value:1}})],1)],1)],1),e._v(" "),r("div",{staticClass:"regular-row2",style:{color:t.check2?"":"#D5D5D5"}},[r("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#ff4949"},on:{change:function(r){return e.toggleSimulateTriggerCondition(t)}},model:{value:t.check2,callback:function(r){e.$set(t,"check2",r)},expression:"regular.check2"}}),e._v(" "),r("span",{staticStyle:{margin:"0 24px 0 15px"}},[e._v("超过上限")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".limitValue2",rules:{validator:e.checkLimit,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.check2,placeholder:"输入阈值"},model:{value:t.limitValue2,callback:function(r){e.$set(t,"limitValue2",r)},expression:"regular.limitValue2"}})],1),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("持续")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".duration2",rules:{validator:e.checkDuration,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.check2,placeholder:"输入时间"},model:{value:t.duration2,callback:function(r){e.$set(t,"duration2",r)},expression:"regular.duration2"}})],1),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("分钟后产生报警，等级为")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item",attrs:{"label-width":"0"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{disabled:!t.check2,placeholder:"请选择报警等级"},model:{value:t.level2,callback:function(r){e.$set(t,"level2",r)},expression:"regular.level2"}},[r("el-option",{attrs:{label:"记录报警",value:4}}),e._v(" "),r("el-option",{attrs:{label:"一般报警",value:3}}),e._v(" "),r("el-option",{attrs:{label:"重要报警",value:2}}),e._v(" "),r("el-option",{attrs:{label:"紧急报警",value:1}})],1)],1)],1),e._v(" "),r("div",{staticClass:"regular-row2",style:{color:t.check3?"":"#D5D5D5"}},[r("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#ff4949"},on:{change:function(r){return e.toggleSimulateTriggerCondition(t)}},model:{value:t.check3,callback:function(r){e.$set(t,"check3",r)},expression:"regular.check3"}}),e._v(" "),r("span",{staticStyle:{margin:"0 24px 0 15px"}},[e._v("低于下限")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".limitValue3",rules:{validator:e.checkLimit,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.check3,placeholder:"输入阈值"},model:{value:t.limitValue3,callback:function(r){e.$set(t,"limitValue3",r)},expression:"regular.limitValue3"}})],1),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("持续")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".duration3",rules:{validator:e.checkDuration,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.check3,placeholder:"输入时间"},model:{value:t.duration3,callback:function(r){e.$set(t,"duration3",r)},expression:"regular.duration3"}})],1),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("分钟后产生报警，等级为")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item",attrs:{"label-width":"0"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{disabled:!t.check3,placeholder:"请选择报警等级"},model:{value:t.level3,callback:function(r){e.$set(t,"level3",r)},expression:"regular.level3"}},[r("el-option",{attrs:{label:"记录报警",value:4}}),e._v(" "),r("el-option",{attrs:{label:"一般报警",value:3}}),e._v(" "),r("el-option",{attrs:{label:"重要报警",value:2}}),e._v(" "),r("el-option",{attrs:{label:"紧急报警",value:1}})],1)],1)],1),e._v(" "),r("div",{staticClass:"regular-row2",style:{color:t.check4?"":"#D5D5D5"}},[r("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#ff4949"},on:{change:function(r){return e.toggleSimulateTriggerCondition(t)}},model:{value:t.check4,callback:function(r){e.$set(t,"check4",r)},expression:"regular.check4"}}),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 15px"}},[e._v("低于下下限")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".limitValue4",rules:{validator:e.checkLimit,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.check4,placeholder:"输入阈值"},model:{value:t.limitValue4,callback:function(r){e.$set(t,"limitValue4",r)},expression:"regular.limitValue4"}})],1),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("持续")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".duration4",rules:{validator:e.checkDuration,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.check4,placeholder:"输入时间"},model:{value:t.duration4,callback:function(r){e.$set(t,"duration4",r)},expression:"regular.duration4"}})],1),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("分钟后产生报警，等级为")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item",attrs:{"label-width":"0"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{disabled:!t.check4,placeholder:"请选择报警等级"},model:{value:t.level4,callback:function(r){e.$set(t,"level4",r)},expression:"regular.level4"}},[r("el-option",{attrs:{label:"记录报警",value:4}}),e._v(" "),r("el-option",{attrs:{label:"一般报警",value:3}}),e._v(" "),r("el-option",{attrs:{label:"重要报警",value:2}}),e._v(" "),r("el-option",{attrs:{label:"紧急报警",value:1}})],1)],1)],1),e._v(" "),t.errorMsg?r("el-alert",{staticStyle:{width:"620px"},attrs:{title:t.errorMsg,type:"error",closable:!1,"show-icon":""}}):e._e()],1)}),0):e._e(),e._v(" "),"state"===e.currentPointType?r("el-form",{ref:"stateRegularForm",attrs:{model:e.stateRegularForm,"label-width":"80px",size:"small"}},e._l(e.stateRegularForm.regulars,function(t,a){return r("div",{key:a,class:["box-light",a+1===e.stateRegularForm.regulars.length?"scroll-target":""]},[r("el-popover",{attrs:{placement:"top",width:"190"},model:{value:t.popoverVisible,callback:function(r){e.$set(t,"popoverVisible",r)},expression:"regular.popoverVisible"}},[r("p",[e._v("确定要删除这条报警规则吗？")]),e._v(" "),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.popoverVisible=!1}}},[e._v("\n                取消\n              ")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.removeRegularItem(a,t)}}},[e._v("\n                确定\n              ")])],1),e._v(" "),r("div",{staticClass:"delete-icon-btn",attrs:{slot:"reference"},slot:"reference"},[r("c-svg",{staticStyle:{"font-size":"16px"},attrs:{name:"shanchu"}})],1)]),e._v(" "),r("el-form-item",{attrs:{prop:"regulars."+a+".time",rules:{type:"array",required:!0,message:"选择时间范围",trigger:"change"},"label-width":"0"}},[r("el-time-picker",{staticStyle:{width:"220px"},attrs:{"is-range":"",format:"HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围",clearable:!1},on:{change:function(t){return e.changeStateTimeRange(a)}},model:{value:t.time,callback:function(r){e.$set(t,"time",r)},expression:"regular.time"}})],1),e._v(" "),r("div",[r("el-checkbox",{model:{value:t.noticeCheck,callback:function(r){e.$set(t,"noticeCheck",r)},expression:"regular.noticeCheck"}}),e._v("\n            报警恢复时通知，延时\n            "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".delayNoticeTime",rules:{validator:e.checkStateDelayNoticeTime,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!t.noticeCheck},model:{value:t.delayNoticeTime,callback:function(r){e.$set(t,"delayNoticeTime",r)},expression:"regular.delayNoticeTime"}})],1),e._v("\n            分钟推送\n          ")],1),e._v(" "),e._l(t.states,function(i,l){return r("div",{key:l,style:{color:i.check?"":"#D5D5D5"}},[r("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#ff4949"},on:{change:function(r){return e.toggleStateTriggerCondition(t)}},model:{value:i.check,callback:function(t){e.$set(i,"check",t)},expression:"item.check"}}),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 15px"}},[e._v("触发")]),e._v(" "),r("el-tag",{staticStyle:{"font-size":"12px"},attrs:{type:i.check?"":"info",size:"small"}},[e._v("\n              "+e._s(i.tag)+"\n            ")]),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("状态持续")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item width85",attrs:{prop:"regulars."+a+".states."+l+".duration",rules:{validator:e.checkStateDuration,trigger:"blur"},"label-width":"0"}},[r("el-input",{attrs:{disabled:!i.check},model:{value:i.duration,callback:function(t){e.$set(i,"duration",t)},expression:"item.duration"}})],1),e._v(" "),r("span",{staticStyle:{margin:"0 10px 0 10px"}},[e._v("分钟后产生报警，等级为")]),e._v(" "),r("el-form-item",{staticClass:"inline-form-item",attrs:{"label-width":"0"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{disabled:!i.check,placeholder:"请选择报警等级"},model:{value:i.level,callback:function(t){e.$set(i,"level",t)},expression:"item.level"}},[r("el-option",{attrs:{label:"记录报警",value:4}}),e._v(" "),r("el-option",{attrs:{label:"一般报警",value:3}}),e._v(" "),r("el-option",{attrs:{label:"重要报警",value:2}}),e._v(" "),r("el-option",{attrs:{label:"紧急报警",value:1}})],1)],1)],1)}),e._v(" "),Boolean(t.errorMsg)?r("el-alert",{staticStyle:{width:"583px"},attrs:{title:t.errorMsg,closable:!1,type:"error","show-icon":""}}):e._e()],2)}),0):e._e()],1)]),e._v(" "),r("el-form",{ref:"noticeForm",attrs:{model:e.noticeForm,rules:e.noticeFormRules,"label-width":"80px",size:"small"}},[r("div",{staticClass:"custom-panel"},[r("div",{staticClass:"custom-panel-header"},[e._v("\n        通知规则\n      ")]),e._v(" "),r("div",{staticClass:"custom-panel-body"},[r("div",{staticClass:"box-light"},[r("div",{staticStyle:{"margin-bottom":"15px"}},[r("span",{staticClass:"box-light-title-weight"},[e._v("\n              通知方式\n            ")]),e._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"使用短信、语音电话、人工客服方式通知需要支付相关通信费用",placement:"right"}},[r("c-svg",{staticStyle:{"font-size":"16px"},attrs:{name:"attention"}})],1)],1),e._v(" "),r("div",{staticClass:"notice-row"},[r("span",{staticClass:"box-light-title"},[e._v("记录报警：")]),e._v(" "),r("span",{staticStyle:{height:"37px","line-height":"37px",color:"#606266"}},[e._v("不通知")])]),e._v(" "),r("div",{staticClass:"notice-row"},[r("span",{staticClass:"box-light-title"},[e._v("一般报警：")]),e._v(" "),r("el-form-item",{attrs:{"label-width":"0"}},[r("el-checkbox-group",{model:{value:e.noticeForm.normal,callback:function(t){e.$set(e.noticeForm,"normal",t)},expression:"noticeForm.normal"}},[r("el-checkbox",{attrs:{label:"微信",disabled:""}}),e._v(" "),r("el-checkbox",{attrs:{label:"短信"}}),e._v(" "),r("el-checkbox",{attrs:{label:"语音电话"}}),e._v(" "),r("el-checkbox",{attrs:{label:"人工客服"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"notice-row"},[r("span",{staticClass:"box-light-title"},[e._v("重要报警：")]),e._v(" "),r("el-form-item",{attrs:{"label-width":"0"}},[r("el-checkbox-group",{model:{value:e.noticeForm.important,callback:function(t){e.$set(e.noticeForm,"important",t)},expression:"noticeForm.important"}},[r("el-checkbox",{attrs:{label:"微信",disabled:""}}),e._v(" "),r("el-checkbox",{attrs:{label:"短信"}}),e._v(" "),r("el-checkbox",{attrs:{label:"语音电话"}}),e._v(" "),r("el-checkbox",{attrs:{label:"人工客服"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"notice-row"},[r("span",{staticClass:"box-light-title"},[e._v("紧急报警：")]),e._v(" "),r("el-form-item",{attrs:{"label-width":"0"}},[r("el-checkbox-group",{model:{value:e.noticeForm.emergency,callback:function(t){e.$set(e.noticeForm,"emergency",t)},expression:"noticeForm.emergency"}},[r("el-checkbox",{attrs:{label:"微信",disabled:""}}),e._v(" "),r("el-checkbox",{attrs:{label:"短信"}}),e._v(" "),r("el-checkbox",{attrs:{label:"语音电话"}}),e._v(" "),r("el-checkbox",{attrs:{label:"人工客服"}})],1)],1)],1)]),e._v(" "),r("div",{staticClass:"box-light",staticStyle:{"margin-top":"24px"}},[r("div",{staticStyle:{"margin-bottom":"15px",position:"relative"}},[r("span",{staticClass:"box-light-title-weight"},[e._v("\n              重复通知\n            ")]),e._v(" "),r("el-switch",{staticStyle:{position:"absolute",right:"-2px",top:"-4px"},attrs:{disabled:!e.KDLsubuser,"active-color":"#409EFF","inactive-color":"#ff4949"},model:{value:e.noticeForm.repeatCheck,callback:function(t){e.$set(e.noticeForm,"repeatCheck",t)},expression:"noticeForm.repeatCheck"}})],1),e._v(" "),r("div",{staticClass:"notice-row"},[r("span",{staticClass:"box-light-title"},[e._v("重复通知时间间隔：")]),e._v(" "),r("el-form-item",{attrs:{"label-width":"0",prop:"repeatTime"}},[r("el-input",{staticStyle:{width:"70px"},attrs:{disabled:!e.noticeForm.repeatCheck,placeholder:"请输入"},model:{value:e.noticeForm.repeatTime,callback:function(t){e.$set(e.noticeForm,"repeatTime","string"==typeof t?t.trim():t)},expression:"noticeForm.repeatTime"}})],1),e._v(" "),r("span",{staticStyle:{"margin-top":"10px","margin-left":"10px",color:"#656565"}},[e._v("分钟")])],1)]),e._v(" "),r("div",{staticClass:"box-light",staticStyle:{"margin-top":"24px"}},[r("div",{staticStyle:{"margin-bottom":"15px",position:"relative"}},[r("span",{staticClass:"box-light-title-weight"},[e._v("\n              通知升级\n            ")]),e._v(" "),r("el-switch",{staticStyle:{position:"absolute",right:"-2px",top:"-4px"},attrs:{disabled:!e.KDLsubuser,"active-color":"#409EFF","inactive-color":"#ff4949"},model:{value:e.noticeForm.updateCheck,callback:function(t){e.$set(e.noticeForm,"updateCheck",t)},expression:"noticeForm.updateCheck"}})],1),e._v(" "),r("div",{staticClass:"notice-row",staticStyle:{"margin-bottom":"15px"}},[r("span",{staticClass:"box-light-title",staticStyle:{"margin-top":"5px"}},[r("el-tag",{staticClass:"record-tag",attrs:{size:"small"}},[e._v("记录")]),e._v("  到 \n              "),r("el-tag",{staticClass:"normal-tag",attrs:{size:"small"}},[e._v("一般")]),e._v("\n               升级时间间隔：\n            ")],1),e._v(" "),r("el-form-item",{attrs:{"label-width":"0",prop:"updateTime1"}},[r("el-input",{staticStyle:{width:"70px"},attrs:{disabled:!e.noticeForm.updateCheck,placeholder:"请输入"},model:{value:e.noticeForm.updateTime1,callback:function(t){e.$set(e.noticeForm,"updateTime1","string"==typeof t?t.trim():t)},expression:"noticeForm.updateTime1"}})],1),e._v(" "),r("span",{staticStyle:{"margin-top":"10px","margin-left":"10px",color:"#656565"}},[e._v("分钟")])],1),e._v(" "),r("div",{staticClass:"notice-row",staticStyle:{"margin-bottom":"15px"}},[r("span",{staticClass:"box-light-title",staticStyle:{"margin-top":"5px"}},[r("el-tag",{staticClass:"normal-tag",attrs:{size:"small"}},[e._v("一般")]),e._v("  到 \n              "),r("el-tag",{staticClass:"important-tag",attrs:{size:"small"}},[e._v("重要")]),e._v("\n               升级时间间隔：\n            ")],1),e._v(" "),r("el-form-item",{attrs:{"label-width":"0",prop:"updateTime2"}},[r("el-input",{staticStyle:{width:"70px"},attrs:{disabled:!e.noticeForm.updateCheck,placeholder:"请输入"},model:{value:e.noticeForm.updateTime2,callback:function(t){e.$set(e.noticeForm,"updateTime2","string"==typeof t?t.trim():t)},expression:"noticeForm.updateTime2"}})],1),e._v(" "),r("span",{staticStyle:{"margin-top":"10px","margin-left":"10px",color:"#656565"}},[e._v("分钟")])],1),e._v(" "),r("div",{staticClass:"notice-row"},[r("span",{staticClass:"box-light-title",staticStyle:{"margin-top":"5px"}},[r("el-tag",{staticClass:"important-tag",attrs:{size:"small"}},[e._v("重要")]),e._v("  到 \n              "),r("el-tag",{staticClass:"emergency-tag",attrs:{size:"small"}},[e._v("紧急")]),e._v("\n               升级时间间隔：\n            ")],1),e._v(" "),r("el-form-item",{attrs:{"label-width":"0",prop:"updateTime3"}},[r("el-input",{staticStyle:{width:"70px"},attrs:{disabled:!e.noticeForm.updateCheck,placeholder:"请输入"},model:{value:e.noticeForm.updateTime3,callback:function(t){e.$set(e.noticeForm,"updateTime3","string"==typeof t?t.trim():t)},expression:"noticeForm.updateTime3"}})],1),e._v(" "),r("span",{staticStyle:{"margin-top":"10px","margin-left":"10px",color:"#656565"}},[e._v("分钟")])],1)])])])]),e._v(" "),r("div",{staticClass:"custom-panel"},[r("div",{staticClass:"custom-panel-header"},[e._v("\n      联系人\n      "),e.KDLsubuser?r("user-select",{attrs:{data:e.userList},on:{change:e.selectUser}},[r("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",size:"mini",circle:"",icon:"el-icon-plus"}})],1):e._e()],1),e._v(" "),r("div",{staticClass:"custom-panel-body"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.contactTableData}},[e.KDLsubuser?r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticClass:"btn-danger",attrs:{type:"text"},nativeOn:{click:function(r){return e.deleteContact(t.row)}}},[e._v("\n              删除\n            ")])]}}],null,!1,2534725379)}):e._e(),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),e._v(" "),r("el-table-column",{attrs:{prop:"binding",label:"是否绑定公众号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"level",label:"接收通知等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{staticStyle:{width:"210px"},attrs:{size:"small",disabled:!e.KDLsubuser,multiple:"",placeholder:"请选择接收通知等级"},model:{value:t.row.levels,callback:function(r){e.$set(t.row,"levels",r)},expression:"scope.row.levels"}},[r("el-option",{attrs:{label:"一般",value:3}}),e._v(" "),r("el-option",{attrs:{label:"重要",value:2}}),e._v(" "),r("el-option",{attrs:{label:"紧急",value:1}})],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"range",label:"接收通知时段"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-time-picker",{staticStyle:{width:"220px"},attrs:{"is-range":"",format:"HH:mm:ss","range-separator":"至",clearable:!1,disabled:!e.KDLsubuser,"start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围",size:"small"},model:{value:t.row.range,callback:function(r){e.$set(t.row,"range",r)},expression:"scope.row.range"}})]}}])})],1)],1)]),e._v(" "),r("div",{staticClass:"custom-panel"},[r("div",{staticClass:"custom-panel-body",staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{size:"medium"},nativeOn:{click:function(t){return e.$router.back()}}},[e._v("\n        取消\n      ")]),e._v(" "),e.KDLsubuser?r("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary",size:"medium"},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("\n        提交\n      ")]):e._e()],1)])],1)},staticRenderFns:[]}},562:function(e,t,r){r(980),r(979);var a=r(38)(r(890),r(1025),"data-v-0e7fdd25",null);e.exports=a.exports},563:function(e,t,r){r(981);var a=r(38)(r(891),r(1026),null,null);e.exports=a.exports},586:function(e,t,r){r(1389);var a=r(38)(r(1087),r(1544),"data-v-4f3e7276",null);e.exports=a.exports},684:function(e,t,r){var a=r(133)("meta"),i=r(58),l=r(69),s=r(59).f,n=0,o=Object.isExtensible||function(){return!0},c=!r(68)(function(){return o(Object.preventExtensions({}))}),u=function(e){s(e,a,{value:{i:"O"+ ++n,w:{}}})},p=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!l(e,a)){if(!o(e))return"F";if(!t)return"E";u(e)}return e[a].i},m=function(e,t){if(!l(e,a)){if(!o(e))return!0;if(!t)return!1;u(e)}return e[a].w},d=function(e){return c&&f.NEED&&o(e)&&!l(e,a)&&u(e),e},f=e.exports={KEY:a,NEED:!1,fastKey:p,getWeak:m,onFreeze:d}},685:function(e,t,r){var a=r(58);e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},686:function(e,t,r){var a=r(70);e.exports=Array.isArray||function(e){return"Array"==a(e)}},687:function(e,t,r){e.exports={default:r(688),__esModule:!0}},688:function(e,t,r){r(215),r(134),r(213),r(698),r(701),r(700),r(699),e.exports=r(14).Set},689:function(e,t,r){var a=r(210);e.exports=function(e,t){var r=[];return a(e,!1,r.push,r,t),r}},690:function(e,t,r){var a=r(60),i=r(136),l=r(72),s=r(90),n=r(692);e.exports=function(e,t){var r=1==e,o=2==e,c=3==e,u=4==e,p=6==e,m=5==e||p,d=t||n;return function(t,n,f){for(var h,g,v=l(t),b=i(v),x=a(n,f,3),y=s(b.length),_=0,k=r?d(t,y):o?d(t,0):void 0;y>_;_++)if((m||_ in b)&&(h=b[_],g=x(h,_,v),e))if(r)k[_]=g;else if(g)switch(e){case 3:return!0;case 5:return h;case 6:return _;case 2:k.push(h)}else if(u)return!1;return p?-1:c||u?u:k}}},691:function(e,t,r){var a=r(58),i=r(686),l=r(21)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),a(t)&&null===(t=t[l])&&(t=void 0)),void 0===t?Array:t}},692:function(e,t,r){var a=r(691);e.exports=function(e,t){return new(a(e))(t)}},693:function(e,t,r){"use strict";var a=r(59).f,i=r(214),l=r(212),s=r(60),n=r(211),o=r(210),c=r(137),u=r(216),p=r(217),m=r(61),d=r(684).fastKey,f=r(685),h=m?"_s":"size",g=function(e,t){var r,a=d(t);if("F"!==a)return e._i[a];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var u=e(function(e,a){n(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[h]=0,void 0!=a&&o(a,r,e[c],e)});return l(u.prototype,{clear:function(){for(var e=f(this,t),r=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete r[a.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var r=f(this,t),a=g(r,e);if(a){var i=a.n,l=a.p;delete r._i[a.i],a.r=!0,l&&(l.n=i),i&&(i.p=l),r._f==a&&(r._f=i),r._l==a&&(r._l=l),r[h]--}return!!a},forEach:function(e){f(this,t);for(var r,a=s(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(a(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!g(f(this,t),e)}}),m&&a(u.prototype,"size",{get:function(){return f(this,t)[h]}}),u},def:function(e,t,r){var a,i,l=g(e,t);return l?l.v=r:(e._l=l={i:i=d(t,!0),k:t,v:r,p:a=e._l,n:void 0,r:!1},e._f||(e._f=l),a&&(a.n=l),e[h]++,"F"!==i&&(e._i[i]=l)),e},getEntry:g,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=f(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?u(0,r.k):"values"==t?u(0,r.v):u(0,[r.k,r.v]):(e._t=void 0,u(1))},r?"entries":"values",!r,!0),p(t)}}},694:function(e,t,r){var a=r(135),i=r(689);e.exports=function(e){return function(){if(a(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},695:function(e,t,r){"use strict";var a=r(15),i=r(39),l=r(684),s=r(68),n=r(52),o=r(212),c=r(210),u=r(211),p=r(58),m=r(89),d=r(59).f,f=r(690)(0),h=r(61);e.exports=function(e,t,r,g,v,b){var x=a[e],y=x,_=v?"set":"add",k=y&&y.prototype,w={};return h&&"function"==typeof y&&(b||k.forEach&&!s(function(){(new y).entries().next()}))?(y=t(function(t,r){u(t,y,e,"_c"),t._c=new x,void 0!=r&&c(r,v,t[_],t)}),f("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!b||"clear"!=e)&&n(y.prototype,e,function(r,a){if(u(this,y,e),!t&&b&&!p(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,a);return t?this:i})}),b||d(y.prototype,"size",{get:function(){return this._c.size}})):(y=g.getConstructor(t,e,v,_),o(y.prototype,r),l.NEED=!0),m(y,e),w[e]=y,i(i.G+i.W+i.F,w),b||g.setStrong(y,e,v),y}},696:function(e,t,r){"use strict";var a=r(39),i=r(71),l=r(60),s=r(210);e.exports=function(e){a(a.S,e,{from:function(e){var t,r,a,n,o=arguments[1];return i(this),t=void 0!==o,t&&i(o),void 0==e?new this:(r=[],t?(a=0,n=l(o,arguments[2],2),s(e,!1,function(e){r.push(n(e,a++))})):s(e,!1,r.push,r),new this(r))}})}},697:function(e,t,r){"use strict";var a=r(39);e.exports=function(e){a(a.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},698:function(e,t,r){"use strict";var a=r(693),i=r(685);e.exports=r(695)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return a.def(i(this,"Set"),e=0===e?0:e,e)}},a)},699:function(e,t,r){r(696)("Set")},700:function(e,t,r){r(697)("Set")},701:function(e,t,r){var a=r(39);a(a.P+a.R,"Set",{toJSON:r(694)("Set")})},722:function(e,t,r){"use strict";r.d(t,"c",function(){return i}),r.d(t,"e",function(){return l}),r.d(t,"a",function(){return s}),r.d(t,"b",function(){return n}),r.d(t,"d",function(){return o}),r.d(t,"g",function(){return c}),r.d(t,"h",function(){return u}),r.d(t,"i",function(){return p}),r.d(t,"j",function(){return m}),r.d(t,"f",function(){return d});var a=r(32),i=function(e){return a.a.post("/api/PointType/PointTypeInsert",e)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a.a.get("/api/PointType/PointTypeList",{params:{projectId:e,TypeName:t}})},s=function(e){return a.a.post("/api/PointType/PointTypeDelete",e)},n=function(e,t){return a.a.get("/api/PointType/PointTypeQuery",{params:{ID:e,projectId:t}})},o=function(e){return a.a.post("/api/PointType/PointTypeUpdate",e)},c=function(e){return a.a.post("/api/EditPoint/GetModePointType",e)},u=function(e){return a.a.post("/api/EditPoint/GetModePointUnit",e)},p=function(e){return a.a.post("/api/EditPoint/updateDmpSetS",e)},m=function(e){return a.a.post("/api/EditPoint/QueryModelSWList",e)},d=function(e){return a.a.post("/api/EditPoint/GetProjectdmpTable",e)}},837:function(e,t,r){"use strict";r.d(t,"d",function(){return i}),r.d(t,"e",function(){return l}),r.d(t,"c",function(){return s}),r.d(t,"h",function(){return n}),r.d(t,"i",function(){return o}),r.d(t,"f",function(){return c}),r.d(t,"g",function(){return u}),r.d(t,"a",function(){return p}),r.d(t,"b",function(){return m});var a=r(32),i=function(e,t){return a.a.get("/api/Alarm_strategy/Query_Project_point",{params:{projectID:e,typeID:t}})},l=function(e,t){return a.a.get("/api/Alarm_strategy/Query_Project_concats",{params:{projectID:e,strategyID:t}})},s=function(e){return a.a.post("/api/Alarm_strategy/Alarm_strategyAdd",e)},n=function(){return a.a.get("/api/Alarm_strategy/GetAlarm_Strategy_List_Type")},o=function(e,t,r){return a.a.post("/api/Alarm_strategy/Alarm_strategyList",{projectId:e,typeID:t,strategyName:r})},c=function(e){return a.a.get("/api/Alarm_strategy/Alarm_strategyRun",{params:{ID:e}})},u=function(e){return a.a.get("api/Alarm_strategy/Alarm_strategyDelete",{params:{ID:e}})},p=function(e){return a.a.get("/api/Alarm_strategy/QueryAlarm_strategy",{params:{ID:e}})},m=function(e){return a.a.post("/api/Alarm_strategy/Alarm_strategyUpdate",e)}},890:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(132),i=r.n(a);t.default={props:{data:{type:Array,required:!0},value:{type:Array}},data:function(){return{leftDataSource:this.data,leftData:this.data,leftSelect:[],rightData:[],rightSelect:[],filter:"",KDLsubuser:!0,uid:JSON.parse(sessionStorage.getItem("userInfo")).uid}},watch:{filter:function(e){var t=e.toLowerCase();this.leftData=this.leftDataSource.filter(function(e){return e.DeviceName.toLowerCase().indexOf(t)>-1||e.pname.toLowerCase().indexOf(t)>-1||e.SysName.toLowerCase().indexOf(t)>-1})},value:function(e){e.length?this.rightData=e:(this.rightData=[],this.rightSelect=[])},data:function(e){this.leftDataSource=e,this.leftData=e}},mounted:function(){630!==this.uid&&631!==this.uid&&632!==this.uid||(this.KDLsubuser=!1)},methods:{leftSelectionChange:function(e){this.leftSelect=e},transferRight:function(){var e,t=this.leftSelect.map(function(e){return e.point});(e=this.rightData).push.apply(e,i()(this.leftSelect)),this.leftSelect=[],this.leftData=this.leftData.filter(function(e){return!t.includes(e.point)}),this.leftDataSource=this.leftDataSource.filter(function(e){return!t.includes(e.point)}),this.$emit("input",this.rightData.map(function(e){return e}))},rightSelectionChange:function(e){this.rightSelect=e},transferLeft:function(){var e,t,r=this.rightSelect.map(function(e){return e.point});(e=this.leftData).push.apply(e,i()(this.rightSelect)),(t=this.leftDataSource).push.apply(t,i()(this.rightSelect)),this.rightSelect=[],this.rightData=this.rightData.filter(function(e){return!r.includes(e.point)}),this.$emit("input",this.rightData)}}}},891:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){t.default={props:{placement:{type:String,default:"right-start"},data:{type:Array,required:!0}},data:function(){return{list:this.data,filter:"",BASE_URL:e._host}},watch:{filter:function(e){this.list=this.data.filter(function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1})},data:function(e){this.list=e}},methods:{select:function(e){1===e.check?e.check=0:e.check=1,this.$emit("change",e)},hide:function(){this.filter="",this.$emit("hide")}}}}.call(t,r(53))},915:function(e,t,r){t=e.exports=r(539)(),t.push([e.i,".transfer .el-table{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.transfer .el-table td{padding:5px 0}.transfer .el-table th{padding:5px 0;background:#eaf6fe}",""])},916:function(e,t,r){t=e.exports=r(539)(),t.push([e.i,".transfer[data-v-0e7fdd25]{display:-ms-flexbox;display:flex}.transfer-left[data-v-0e7fdd25],.transfer-right[data-v-0e7fdd25]{-ms-flex:1;flex:1;border:1px solid #e1e1e1;border-radius:4px}.transfer-header[data-v-0e7fdd25]{background:#1890ff;height:40px;line-height:39px;padding:0 25px;border-top-left-radius:4px;border-top-right-radius:4px}.transfer-center[data-v-0e7fdd25]{-ms-flex:0 0 80px;flex:0 0 80px;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;-ms-flex-direction:column;flex-direction:column}.transfer-center .el-button[data-v-0e7fdd25]{padding:7px 10px}",""])},917:function(e,t,r){t=e.exports=r(539)(),t.push([e.i,".user-select{border:1px solid #dadfe6;border-radius:5px;background:#fff;box-shadow:none;padding:0;overflow:hidden}.user-select *{box-sizing:border-box}.user-select .us-header{padding:6px 10px;background:#f2f4f6;box-shadow:0 1px 0 0 #d8dde4;border-radius:5px 5px 0 0;border-bottom:1px solid #dadfe6}.user-select .us-list{max-height:250px;overflow:auto;list-style:none;margin:0;padding:0}.user-select .us-list-item{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:36px;line-height:36px;padding-left:10px;padding-right:10px;border-bottom:1px solid #f5f7fa;cursor:pointer}.user-select .us-list-item-select{background:#f5f7fa}.user-select .us-avatar{width:24px;height:24px;border-radius:50%;margin:0 10px}.user-select .us-check{-ms-flex:0 0 14px;flex:0 0 14px;visibility:hidden}.user-select .us-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-select .us-check-show{visibility:visible}",""])},979:function(e,t,r){var a=r(915);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(540)("df69f0ea",a,!0)},980:function(e,t,r){var a=r(916);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(540)("5af8d302",a,!0)},981:function(e,t,r){var a=r(917);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(540)("ae0827f0",a,!0)}});
webpackJsonp([80],{1146:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(710);t.default={data:function(){return{deviceTable:[],formVisible:!1,searchForm:{deviceName:"",deviceUtime:"",deviceStatic:""},tableTotal:0,tableLoading:!0,tableParams:{page:1,num:10,project:JSON.parse(sessionStorage.getItem("project")).id,sid:this.$route.query.sid,mname:"",pname:"",stime:"",etime:"",status:-1,mtid:this.$route.query.mtid},videoDialog:!1,videoUrl:"",videoLoading:!1}},mounted:function(){this.fetchdeviceTable()},methods:{fetchdeviceTable:function(){var e=this;this.tableLoading=!0,this.tableParams.status=""==this.searchForm.deviceStatic?-2:this.searchForm.deviceStatic,this.tableParams.pname=this.searchForm.deviceName,a.i(r.a)(this.tableParams).then(function(t){JSON.parse(t.data).success?(e.deviceTable=JSON.parse(t.data).list,e.tableTotal=Number(JSON.parse(t.data).total),e.tableLoading=!1):(e.deviceTable=[],e.tableTotal=0,e.tableLoading=!1)})},handleSizeChange:function(e){this.tableParams.num=e,this.fetchdeviceTable()},handleCurrentChange:function(e){this.tableParams.page=e,this.fetchdeviceTable()},handleformatTime:function(e){this.tableParams.stime=e[0],this.tableParams.etime=e[1]},handleformVisible:function(){this.searchForm.deviceStatic="",this.formVisible=!this.formVisible},resetForm:function(){this.searchForm.deviceName="",this.searchForm.deviceStatic="",this.searchForm.deviceUtime="",this.fetchdeviceTable()},openVideo:function(e){var t=this;this.videoUrl=e,this.videoDialog=!0,this.$nextTick(function(){var e={container:"#video",variable:"player",flashplayer:!1,autoplay:!0,video:t.videoUrl};new ckplayer(e)})},tableheaderClass:function(e,t){return"header-row"}}}},1214:function(e,t,a){t=e.exports=a(539)(),t.push([e.i,".video-wrapper[data-v-17ea35e2]{text-align:center;overflow:hidden}.mgb22[data-v-17ea35e2]{margin-bottom:22px}",""])},1344:function(e,t,a){var r=a(1214);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(540)("618164dd",r,!0)},1503:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pdg2"},[a("div",{staticClass:"params-container"},[a("div",{staticClass:"params-wrap"},[a("div",{staticClass:"searchBox"},[a("el-form",{ref:"searchForm",attrs:{"label-width":"70px",model:e.searchForm}},[a("el-row",{attrs:{gutter:48}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"参数名称"}},[a("el-input",{attrs:{placeholder:"请输入",size:"small"},model:{value:e.searchForm.deviceName,callback:function(t){e.$set(e.searchForm,"deviceName","string"==typeof t?t.trim():t)},expression:"searchForm.deviceName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"参数状态"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:e.searchForm.deviceStatic,callback:function(t){e.$set(e.searchForm,"deviceStatic",t)},expression:"searchForm.deviceStatic"}},[a("el-option",{attrs:{value:"1",label:"在线"}}),e._v(" "),a("el-option",{attrs:{value:"0",label:"离线"}})],1)],1)],1),e._v(" "),e.formVisible?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"更新时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始时间","end-placeholder":"结束时间",size:"small"},on:{change:e.handleformatTime},model:{value:e.searchForm.deviceUtime,callback:function(t){e.$set(e.searchForm,"deviceUtime",t)},expression:"searchForm.deviceUtime"}})],1)],1):e._e(),e._v(" "),a("el-col",{staticClass:"handleWrapper",attrs:{span:8}},[a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:e.fetchdeviceTable}},[e._v("\n                  搜索\n                ")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"small",type:"danger"},on:{click:e.resetForm}},[e._v("\n                  重置\n                ")]),e._v(" "),a("div",{staticClass:"searchBtn"},[a("el-button",{staticStyle:{padding:"4px 0"},attrs:{icon:e.formVisible?"el-icon-arrow-up":"el-icon-arrow-down",type:"text",size:"mini"},on:{click:e.handleformVisible}},[e._v("\n                    "+e._s(e.formVisible?"收起":"展开")+"\n                  ")])],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"device-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.deviceTable,fit:"","header-row-class-name":e.tableheaderClass,"element-loading-text":"加载中..."}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"area",label:"位置",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0===t.row.status?"离线":"在线"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"utime",label:"更新时间",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"视频连接"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("c-svg",{staticStyle:{width:"20px",height:"18px",cursor:"pointer"},attrs:{name:"monitor"},nativeOn:{click:function(a){return e.openVideo(t.row.camera)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{background:"","page-sizes":[10,20,50,100],"page-size":e.tableParams.num,"current-page-sync":e.tableParams.page,layout:"total, sizes, prev, pager, next, jumper",total:e.tableTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{visible:e.videoDialog,"show-close":!1,"custom-class":"video-dialog"},on:{"update:visible":function(t){e.videoDialog=t}}},[e.videoDialog?a("div",{staticClass:"video-wrapper"},[a("div",{staticStyle:{width:"960px",height:"540px"},attrs:{id:"video"}})]):e._e()])],1)])},staticRenderFns:[]}},651:function(e,t,a){a(1344);var r=a(38)(a(1146),a(1503),"data-v-17ea35e2",null);e.exports=r.exports},710:function(e,t,a){"use strict";a.d(t,"y",function(){return i}),a.d(t,"x",function(){return n}),a.d(t,"m",function(){return o}),a.d(t,"b",function(){return s}),a.d(t,"h",function(){return l}),a.d(t,"c",function(){return c}),a.d(t,"w",function(){return d}),a.d(t,"a",function(){return u}),a.d(t,"l",function(){return m}),a.d(t,"i",function(){return p}),a.d(t,"j",function(){return f}),a.d(t,"k",function(){return v}),a.d(t,"e",function(){return h}),a.d(t,"f",function(){return b}),a.d(t,"d",function(){return g}),a.d(t,"g",function(){return y}),a.d(t,"n",function(){return _}),a.d(t,"o",function(){return T}),a.d(t,"p",function(){return x}),a.d(t,"q",function(){return w}),a.d(t,"r",function(){return S}),a.d(t,"s",function(){return C}),a.d(t,"t",function(){return F}),a.d(t,"u",function(){return k}),a.d(t,"v",function(){return j});var r=a(32),i=function(e){return r.a.get("/api/model/getchild",{params:{project:e}})},n=function(e,t,a,i,n,o){return r.a.get("/api/model/queryDeviceInfo",{params:{project:e,sid:t,model:a,inp:i,num:n,page:o}})},o=function(e,t,a,i,n,o,s){return r.a.get("/api/model/getTableList",{params:{project:e,sid:t,mname:a,model:i,page:n,num:o,pname:s}})},s=function(e,t){return r.a.get("/api/model/getTab",{params:{project:e,sid:t}})},l=function(e,t,a,i){return r.a.get("/api/Report/dataInfo",{params:{id:e,start:t,end:a,tmes:i}})},c=function(e,t,a,i,n,o){return r.a.get("/api/model/getCard",{params:{project:e,sid:t,model:a,inp:i,page:n,num:o}})},d=function(e){return r.a.post("/api/model/alarmTable",e)},u=function(e){return r.a.post("/api/model/showTable",e)},m=function(e){return r.a.post("/api/model/queryPoint",e)},p=function(e,t,a,i,n){return r.a.get("/api/model/GetDmplist",{params:{project:e,sid:t,startTime:a,endTime:i,type:n}})},f=function(e,t,a,i){return r.a.get("/api/model/GetArealist",{params:{project:e,sid:t,startTime:a,endTime:i}})},v=function(e,t,a,i,n){return r.a.get("/api/model/GetPersonlist",{params:{project:e,sid:t,startTime:a,endTime:i,type:n}})},h=function(e){return r.a.post("/api/car/getCarList",e)},b=function(e){return r.a.get("/api/car/getCarInfo",{params:{id:e}})},g=function(e){return r.a.get("/api/car/getdataInfo",{params:{id:e}})},y=function(e){return r.a.post("/api/car/updateCarInfo",e)},_=function(e){return r.a.get("/api/model/getSymbol",{params:{mtid:e}})},T=function(e){return r.a.get("/api/model/deviceInfo",{params:{mtid:e}})},x=function(e){return r.a.get("/api/model/contact",{params:{mtid:e}})},w=function(e,t){return r.a.get("/api/model/normal",{params:{pid:e,mtid:t}})},S=function(e,t,a,i){return r.a.get("/api/Report/dataInfo",{params:{pid:e,start:t,end:a,tmes:i}})},C=function(e){return r.a.post("/api/alarm/",e)},F=function(e){return r.a.get("/api/DeviceInfo/QueryModbus",{params:{Id:e}})},k=function(e){return r.a.post("/api/DeviceInfo/saveModbus",e)},j=function(e,t){return r.a.get("/api/model/updateSymbol",{params:{sid:e,write:t}})}}});
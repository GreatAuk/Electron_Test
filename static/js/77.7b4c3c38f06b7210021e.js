webpackJsonp([77],{1169:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(731);t.default={data:function(){return{imgDialogVisible:!1,evaluate:null,essentialInfo:{},port:"https://sinocold.net:8443",seeBigImg:[],stepInfo:[],tableLog:[],userInfo:{},revokeDialogVisible:!1,revokeForm:{revokeReason:"",revokeRemark:""},divisionDialogVisible:!1,ways:[{id:1,name:"保内维修"},{id:2,name:"保外维修"}],divisionForm:{repairType:"",repairMan:"",repairDate:"",remark:""},rules:{repairType:[{required:!0,message:"请选择服务类型",trigger:"change"}],repairMan:[{required:!0,message:"请选择维修工",trigger:"change"}]},manList:[],pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},NICKNAME:"",remoteDialogVisible:!1,repairWay:"",repairResult:"",refuseDialogVisible:!1,refuseForm:{refuseReason:"",refuseRemark:""},refuseRule:{refuseReason:[{required:!0,message:"请选择拒绝类型",trigger:"change"}],refuseRemark:[{required:!0,message:"请填写拒绝原因",trigger:"blur"}]},checkDialogVisible:!1,nopass:5,show:!0,disabled:!1,forms:{pay_type:"",pay_money:"",pay_content:""},rateDialogVisible:!1,rateForm:{score:null,rateRemark:""}}},mounted:function(){this.userInfo=JSON.parse(sessionStorage.getItem("userInfo")),this.QueryRepair_orderReport(),this.Repair_ScheduleWebNew(),this.Repair_ScheduleLogWebNew()},methods:{repairPrint:function(){this.printstatus=!0,setTimeout(function(){var e=document.getElementById("printId").outerHTML;document.body.innerHTML=e,window.print(),window.location.reload(),this.printstatus=!1},100)},imgDialog:function(e){var t=this;this.imgDialogVisible=!0,e.split(",").forEach(function(e){t.seeBigImg.push(t.port+"/"+e)})},handleSubmit:function(){var e=this;this.status=0,this.$confirm("是否提交该条报修？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.Repair_Status(),e.QueryRepair_orderReport(),e.Repair_ScheduleWebNew(),e.Repair_ScheduleLogWebNew()})},handleDelete:function(){var e=this;this.$confirm("此操作将永远删除该条数据，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){i.i(a.k)(e.$route.query.Repair_Orderno).then(function(t){JSON.parse(t.data)?(e.$message({message:"删除成功",type:"success"}),e.$router.go(-1)):e.$message.error("删除失败")})})},handleRevoke:function(){this.status=-1,this.revokeDialogVisible=!0},submitRevoke:function(){var e=this,t=this.revokeForm.revokeReason+this.revokeForm.revokeRemark;i.i(a.l)({Repair_Orderno:this.$route.query.Repair_Orderno,Status:this.status,UserName:this.userInfo.nickname,Describe:t}).then(function(t){JSON.parse(t.data)?(e.$message({message:"操作成功",type:"success"}),e.revokeDialogVisible=!1,e.QueryRepair_orderReport(),e.Repair_ScheduleWebNew(),e.Repair_ScheduleLogWebNew()):e.$message.error("操作失败")}).catch(function(e){})},handleReceive:function(){var e=this;this.$confirm("确定要受理该条报修吗？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){i.i(a.m)({Repair_Orderno:e.$route.query.Repair_Orderno,AcceptanceUser:e.userInfo.uid,UserName:e.userInfo.nickname}).then(function(t){JSON.parse(t.data)?(e.$message({message:"受理成功",type:"success"}),e.QueryRepair_orderReport(),e.Repair_ScheduleWebNew(),e.Repair_ScheduleLogWebNew()):e.$message.error("受理失败")}).catch(function(e){})})},handleDivision:function(){var e=this;this.divisionDialogVisible=!0,i.i(a.e)().then(function(t){e.manList=JSON.parse(t.data)}).catch(function(e){})},changeValue:function(e){var t={};void 0!==(t=this.manList.find(function(t){return t.RepairUserID===Number(e)}))&&(this.NICKNAME=t.nickname)},submitDivision:function(e){var t=this;this.$refs[e].validate(function(s){if(s){var r;r=t.divisionForm.repairDate?new Date(t.divisionForm.repairDate).format("yyyy/MM/dd"):"",i.i(a.n)({Repair_Orderno:t.$route.query.Repair_Orderno,Service_type:t.divisionForm.repairType,Repair_User:t.divisionForm.repairMan,Repair_UserName:t.NICKNAME,Service_time:r,UserName:t.userInfo.nickname}).then(function(i){JSON.parse(i.data)&&(t.$message({message:"派工成功",type:"success"}),t.$refs[e].resetFields(),t.divisionDialogVisible=!1,t.QueryRepair_orderReport(),t.Repair_ScheduleWebNew(),t.Repair_ScheduleLogWebNew())}).catch(function(e){})}})},handleAccept:function(){var e=this;this.$confirm("确定要接受/维修该条报修吗？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){i.i(a.o)({Repair_Orderno:e.$route.query.Repair_Orderno,Status:3,Describe:"",UserName:e.userInfo.nickname}).then(function(t){JSON.parse(t.data)?(e.$message({message:"操作成功",type:"success"}),e.QueryRepair_orderReport(),e.Repair_ScheduleWebNew(),e.Repair_ScheduleLogWebNew()):e.$message.error("操作失败")}).catch(function(e){})})},submitRemote:function(){var e=this;i.i(a.p)({Repair_orderno:this.$route.query.Repair_Orderno,Repair_process:this.repairWay,Repair_result:this.repairResult}).then(function(t){JSON.parse(t.data)?(e.$message({message:"操作成功",type:"success"}),e.repairWay="",e.repairResult="",e.remoteDialogVisible=!1,e.status=4,e.Repair_Status()):e.$message.error("操作失败")}).catch(function(e){})},submitRefuse:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var s=t.refuseForm.refuseReason+t.refuseForm.refuseRemark;i.i(a.o)({Repair_Orderno:t.$route.query.Repair_Orderno,Status:1,Describe:s,UserName:t.userInfo.nickname}).then(function(e){JSON.parse(e.data)?(t.$message({message:"操作成功",type:"success"}),t.refuseDialogVisible=!1,t.QueryRepair_order()):t.$message.error("操作失败")}).catch(function(e){})}})},handleFinished:function(){var e=this;this.status=4,this.$confirm("确定该条报修已完工吗？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.Repair_Status(),e.QueryRepair_orderReport(),e.Repair_ScheduleWebNew(),e.Repair_ScheduleLogWebNew()})},handlePass:function(e){1===e?(this.nopass=5,this.show=!0):(this.nopass=4,this.show=!1)},handleCheckFailure:function(e){this.nopass=e},submitnoPass:function(){var e=this;i.i(a.q)({Repair_Orderno:this.$route.query.Repair_Orderno,Status:this.nopass,Describe:this.repairResult,UserName:this.userInfo.nickname}).then(function(t){JSON.parse(t.data)?(e.$message({message:"操作成功",type:"success"}),e.repairResult="",e.checkDialogVisible=!1,e.nopass=6,e.QueryRepair_orderReport(),e.Repair_ScheduleWebNew(),e.Repair_ScheduleLogWebNew()):e.$message.error("操作失败")}).catch(function(e){})},submitPass:function(e){var t=this;i.i(a.q)({Repair_Orderno:this.$route.query.Repair_Orderno,Status:5,Settlement:this.forms.pay_type,Cost:this.forms.pay_money,Describe:this.forms.pay_content,UserName:this.userInfo.nickname}).then(function(i){JSON.parse(i.data)?(t.$message({message:"操作成功",type:"success"}),t.$refs[e].resetFields(),t.checkDialogVisible=!1,t.QueryRepair_orderReport(),t.Repair_ScheduleWebNew(),t.Repair_ScheduleLogWebNew()):t.$message.error("操作失败")}).catch(function(e){})},submitRate:function(){var e=this;i.i(a.r)({Repair_Orderno:this.$route.query.Repair_Orderno,Evaluate:this.rateForm.rateRemark,Score:this.rateForm.score}).then(function(t){JSON.parse(t.data)?(e.rateDialogVisible=!1,e.$message({message:"操作成功",type:"success"}),e.QueryRepair_orderReport(),e.Repair_ScheduleWebNew(),e.Repair_ScheduleLogWebNew()):e.$message.error("操作失败")}).catch(function(e){})},QueryRepair_orderReport:function(){var e=this;i.i(a.s)(this.$route.query.Repair_Orderno).then(function(t){e.essentialInfo=JSON.parse(t.data)}).catch(function(e){})},Repair_ScheduleWebNew:function(){var e=this;i.i(a.t)(this.$route.query.Repair_Orderno).then(function(t){e.stepInfo=JSON.parse(t.data);for(var i=e.stepInfo.length;i<5;i++)e.stepInfo.push({Repair_Orderno:"",Operator:"",CreateTime:"",Status:null,Description:"",Company:"",Phone:""})}).catch(function(e){})},Repair_ScheduleLogWebNew:function(){var e=this;i.i(a.u)(this.$route.query.Repair_Orderno).then(function(t){e.tableLog=JSON.parse(t.data)}).catch(function(e){})},Repair_Status:function(){var e=this;i.i(a.l)({Repair_Orderno:this.$route.query.Repair_Orderno,Status:this.status,UserName:this.userInfo.nickname}).then(function(t){JSON.parse(t.data)?e.$message({message:"操作成功",type:"success"}):e.$message.error("操作失败")}).catch(function(e){})}}}},1250:function(e,t,i){t=e.exports=i(539)(),t.push([e.i,".r-details{color:#324057}.r-details .info_module{padding:10px}.r-details .info_module,.r-details .info_table{border-radius:4px;margin-bottom:20px;background:#fff}.r-details .r-info{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.r-details .r-info .r-info-icon{font-size:36px;margin-right:12px}.r-details .r-info .r-num{font-size:16px}.r-details .dialogBox .el-dialog .ct{margin:0 10px 12px 0;display:inline-block}.r-details .dialogBox .el-dialog .cm{margin:12px 10px 12px 0;display:inline-block}.r-details .r-img{margin-right:10px;font-size:20px;vertical-align:middle}.r-details .r-rinfo{text-align:right}.r-details .r-rinfos{text-align:right;line-height:40px;width:49%;display:inline-block}.r-details .r-rinfos .rinfo-title{color:#999}.r-details .r-rinfos .rinfo-status{font-size:30px}.r-details .el-steps .step_line{border-width:1px}.r-details .el-steps .step_noline{border-width:0}.r-details .commonHeader{height:46px;border-bottom:1px solid #dedfe0}.r-details .commonHeader .commonTitle{height:26px;line-height:46px;font-size:15px;font-weight:700}.r-details .imgdialog .el-dialog .el-dialog__header{border:0}.r-details .table-cell div{display:table-cell;padding-bottom:20px;vertical-align:top}.r-details .table-cell div:nth-child(2){color:rgba(0,0,0,.65)}.r-details .table-cell .table-title{white-space:nowrap}.r-details .table-cell .table-describe{width:200px;white-space:wrapper}.r-details .table-cell .r-step-img{font-size:20px}.r-details .dialogBox .el-dialog{width:600px}.r-details .passBtn{text-align:center;margin-bottom:10px}.star .el-rate__icon{font-size:30px}.el-step__executor{color:#324057;line-height:30px}.el-step__executor.is-finish{color:#409eff}@media (max-width:1180px){.r-details .table-cell .table-describe{width:100px}}@media (max-width:1330px){.r-details .r-rinfos{width:100%;line-height:30px}.r-details .r-rinfos .rinfo-status{font-size:20px}}",""])},1380:function(e,t,i){var a=i(1250);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(540)("434c5b80",a,!0)},1534:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"r-details pdg2"},[i("div",[i("div",{staticClass:"info_module"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"r-info"},[i("c-svg",{staticClass:"r-info-icon",attrs:{name:"repire"}}),e._v(" "),i("h1",{staticClass:"r-num"},[e._v("\n              单号："+e._s(e.essentialInfo.Repair_Orderno)+"\n            ")])],1)]),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-col",{staticClass:"r-rinfo",staticStyle:{"text-align":"right","margin-right":"20px"},attrs:{span:24}},[i("el-button",{attrs:{size:"small"},on:{click:e.repairPrint}},[e._v("\n              打印\n            ")]),e._v(" "),i("el-button",{attrs:{size:"small",disabled:""}},[e._v("\n              导出\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:-1==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Companyid,expression:"essentialInfo.Status==-1 && userInfo.uid===essentialInfo.Companyid"}],attrs:{size:"small",type:"primary"},on:{click:e.handleSubmit}},[e._v("\n              提交\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:-1==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Companyid,expression:"essentialInfo.Status==-1 && userInfo.uid===essentialInfo.Companyid"}],attrs:{size:"small",type:"primary"},on:{click:e.handleDelete}},[e._v("\n              删除\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Companyid,expression:"essentialInfo.Status==0 && userInfo.uid===essentialInfo.Companyid"}],attrs:{size:"small",type:"primary"},on:{click:e.handleRevoke}},[e._v("\n              撤销\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Repair_unitID,expression:"essentialInfo.Status==0 && userInfo.uid===essentialInfo.Repair_unitID"}],attrs:{size:"small",type:"primary"},on:{click:e.handleReceive}},[e._v("\n              受理\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Repair_unitID,expression:"essentialInfo.Status==1 && userInfo.uid===essentialInfo.Repair_unitID"}],attrs:{size:"small",type:"primary"},on:{click:e.handleDivision}},[e._v("\n              派工\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Repair_unitID,expression:"essentialInfo.Status==1 && userInfo.uid===essentialInfo.Repair_unitID"}],attrs:{size:"small",type:"primary"},on:{click:e.handleAccept}},[e._v("\n              维修\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Repair_unitID,expression:"essentialInfo.Status==1 && userInfo.uid===essentialInfo.Repair_unitID"}],attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){e.remoteDialogVisible=!0}}},[e._v("\n              远程\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:2==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Repair_UserID,expression:"essentialInfo.Status==2 && userInfo.uid===essentialInfo.Repair_UserID"}],attrs:{size:"small",type:"primary"},on:{click:e.handleAccept}},[e._v("\n              接受\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:2==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Repair_UserID,expression:"essentialInfo.Status==2 && userInfo.uid===essentialInfo.Repair_UserID"}],attrs:{size:"small",type:"primary"},on:{click:function(t){e.refuseDialogVisible=!0}}},[e._v("\n              拒绝\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:3==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Repair_UserID,expression:"essentialInfo.Status==3 && userInfo.uid===essentialInfo.Repair_UserID"}],attrs:{size:"small",type:"primary"},on:{click:e.handleFinished}},[e._v("\n              完工\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:4==e.essentialInfo.Status&&(e.userInfo.uid===e.essentialInfo.Repair_unitID||e.userInfo.uid===e.essentialInfo.Companyid),expression:"essentialInfo.Status==4 &&\n                (userInfo.uid===essentialInfo.Repair_unitID || userInfo.uid===essentialInfo.Companyid)"}],attrs:{size:"small",type:"primary"},on:{click:function(t){e.checkDialogVisible=!0}}},[e._v("\n              验收\n            ")]),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:5==e.essentialInfo.Status&&e.userInfo.uid===e.essentialInfo.Companyid,expression:"essentialInfo.Status==5 && userInfo.uid===essentialInfo.Companyid"}],attrs:{size:"small",type:"primary"},on:{click:function(t){e.rateDialogVisible=!0}}},[e._v("\n              评价\n            ")])],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:16}},[i("div",{staticStyle:{padding:"10px 40px"}},[i("el-col",{staticClass:"table-cell",attrs:{span:10}},[i("div",{staticClass:"table-title"},[e._v("\n                报修人：\n              ")]),e._v(" "),i("div",[e._v(e._s(e.essentialInfo.Repair_man))])]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:14}},[i("div",{staticClass:"table-title"},[e._v("\n                故障设备：\n              ")]),e._v(" "),i("div",[e._v(e._s(e.essentialInfo.bigname)+e._s(e.essentialInfo.Smallname))])]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:10}},[i("div",{staticClass:"table-title"},[e._v("\n                报修时间：\n              ")]),e._v(" "),i("div",[e._v(e._s(e.essentialInfo.CreateTime))])]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:14}},[i("div",{staticClass:"table-title"},[e._v("\n                希望完成日期：\n              ")]),e._v(" "),i("div",[e._v(e._s(e.essentialInfo.Desired_date))])]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:10}},[i("div",{staticClass:"table-title"},[e._v("\n                项目：\n              ")]),e._v(" "),i("div",[e._v(e._s(e.essentialInfo.address)+e._s(e.essentialInfo.pname))])]),e._v(" "),i("el-col",{staticClass:"table-cell",attrs:{span:14}},[i("div",{staticClass:"table-title"},[e._v("\n                故障描述：\n              ")]),e._v(" "),i("div",{staticClass:"table-describe"},[e._v("\n                "+e._s(e.essentialInfo.Fault_description)+"\n              ")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.essentialInfo.photo,expression:"essentialInfo.photo!==null"}],staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(t){return e.imgDialog(e.essentialInfo.photo)}}},[i("c-svg",{staticClass:"r-img",attrs:{name:"img"}}),e._v("查看照片\n              ")],1)])],1)]),e._v(" "),i("el-col",{attrs:{span:8}},[i("div",{staticClass:"r-rinfos"},[i("div",{staticClass:"rinfo-title"},[e._v("\n              状态\n            ")]),e._v(" "),i("div",{staticClass:"rinfo-status"},[e._v("\n              "+e._s(-1==e.essentialInfo.Status?"未提交":0==e.essentialInfo.Status?"待受理":1==e.essentialInfo.Status?"待派工":2==e.essentialInfo.Status?"待接单":3==e.essentialInfo.Status?"维修中":4==e.essentialInfo.Status?"待验收":5==e.essentialInfo.Status?"已完成":"已评价")+"\n            ")])]),e._v(" "),i("div",{staticClass:"r-rinfos"},[i("div",{staticClass:"rinfo-title"},[e._v("\n              评价\n            ")]),e._v(" "),i("el-rate",{staticClass:"star",attrs:{disabled:""},model:{value:e.essentialInfo.evaluate,callback:function(t){e.$set(e.essentialInfo,"evaluate",t)},expression:"essentialInfo.evaluate"}})],1)])],1)],1)]),e._v(" "),i("div",[i("div",{staticClass:"info_module"},[i("div",{staticClass:"el-steps el-steps--horizontal"},e._l(e.stepInfo,function(t,a){return i("div",{key:a,staticClass:"el-step is-horizontal is-center",staticStyle:{"flex-basis":"25%"}},[i("div",{staticClass:"el-step__head",class:null==t.Status?"is-wait":"is-finish"},[i("div",{staticClass:"el-step__line",staticStyle:{"margin-right":"0px"}},[i("i",{staticClass:"el-step__line-inner",class:null==t.Status?"step_noline":"step_line",staticStyle:{width:"100%"}})]),e._v(" "),i("el-popover",{attrs:{placement:"top-start",title:t.Operator,width:"200",trigger:"hover",disabled:null==t.Status}},[i("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[i("span",[e._v("维保范围：")]),i("span",{attrs:{title:t.Description}},[e._v(e._s(t.Description))])]),e._v(" "),i("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[i("span",[e._v("公司：")]),i("span",{attrs:{title:t.Company}},[e._v(e._s(t.Company))])]),e._v(" "),i("div",[e._v("电话："+e._s(t.Phone))]),e._v(" "),i("div",{staticClass:"el-step__icon is-text",attrs:{slot:"reference"},slot:"reference"},[i("div",{staticClass:"el-step__icon-inner"},[i("c-svg",{directives:[{name:"show",rawName:"v-show",value:null!=t.Status,expression:"item.Status==null?false:true"}],staticClass:"r-step-img",attrs:{name:"duihao"}}),e._v(e._s(null!=t.Status?"":a+1)+"\n                ")],1)])])],1),e._v(" "),i("div",{staticClass:"el-step__main"},[i("div",{staticClass:"el-step__title",class:null==t.Status?"is-wait":"is-finish"},[e._v("\n              "+e._s(0==a?"报修发起":1==a?"受理报修":2==a?"维修接单":3==a?"维修验收":"完工")+"\n            ")]),e._v(" "),i("div",{staticClass:"el-step__executor",class:null==t.Status?"is-wait":"is-finish"},[e._v("\n              "+e._s(t.Operator)+"\n            ")]),e._v(" "),i("div",{staticClass:"el-step__description",class:null==t.Status?"is-wait":"is-finish"},[e._v("\n              "+e._s(t.CreateTime)+"\n            ")])])])}),0)])]),e._v(" "),i("div",[i("div",{staticClass:"info_table clearfix"},[i("el-col",{staticClass:"commonHeader",staticStyle:{padding:"0 20px"},attrs:{span:24}},[i("span",{staticClass:"commonTitle"},[e._v("操作日志")])]),e._v(" "),i("el-table",{staticStyle:{padding:"15px"},attrs:{data:e.tableLog}},[i("el-table-column",{attrs:{prop:"Action",label:"操作类型","min-width":"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"Operator",label:"操作人","min-width":"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"CreateTime",label:"操作时间","min-width":"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"Description",label:"备注","min-width":"180"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作详情","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"}},[e._v("\n              查看详情\n            ")])]}}])})],1)],1)]),e._v(" "),i("el-dialog",{staticClass:"imgdialog",staticStyle:{"margin-top":"0"},attrs:{visible:e.imgDialogVisible},on:{"update:visible":function(t){e.imgDialogVisible=t}}},[i("el-carousel",{attrs:{interval:5e3,arrow:"always"}},e._l(e.seeBigImg,function(e){return i("el-carousel-item",{key:e},[i("img",{attrs:{width:"100%",height:"100%",src:e,alt:""}})])}),1)],1),e._v(" "),i("el-dialog",{staticClass:"dialogBox",attrs:{title:"撤销",visible:e.revokeDialogVisible},on:{"update:visible":function(t){e.revokeDialogVisible=t}}},[i("el-form",{ref:"revokeForm",attrs:{model:e.revokeForm,"label-position":"right"}},[i("el-form-item",{attrs:{label:"撤销原因","label-width":"80px",prop:"revokeReason"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择撤销原因"},model:{value:e.revokeForm.revokeReason,callback:function(t){e.$set(e.revokeForm,"revokeReason",t)},expression:"revokeForm.revokeReason"}},[i("el-option",{key:"1",attrs:{label:"误报",value:"误报"}}),e._v(" "),i("el-option",{key:"2",attrs:{label:"其他原因",value:"其他原因"}})],1)],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"备注信息","label-width":"80px",prop:"revokeRemark"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:2,placeholder:"请输入",resize:"none"},model:{value:e.revokeForm.revokeRemark,callback:function(t){e.$set(e.revokeForm,"revokeRemark",t)},expression:"revokeForm.revokeRemark"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitRevoke}},[e._v("\n        提交\n      ")])],1)],1),e._v(" "),i("el-dialog",{staticClass:"dialogBox",attrs:{title:"主管派工",visible:e.divisionDialogVisible},on:{"update:visible":function(t){e.divisionDialogVisible=t}}},[i("el-form",{ref:"divisionForm",attrs:{model:e.divisionForm,rules:e.rules,"label-position":"right"}},[i("el-form-item",{attrs:{label:"服务类型","label-width":"100px",prop:"repairType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择服务类型"},model:{value:e.divisionForm.repairType,callback:function(t){e.$set(e.divisionForm,"repairType",t)},expression:"divisionForm.repairType"}},e._l(e.ways,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id.toString()}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"派工","label-width":"100px",prop:"repairMan"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择维修工"},on:{change:e.changeValue},model:{value:e.divisionForm.repairMan,callback:function(t){e.$set(e.divisionForm,"repairMan",t)},expression:"divisionForm.repairMan"}},e._l(e.manList,function(e){return i("el-option",{key:e.id,attrs:{label:e.nickname,value:e.RepairUserID.toString()}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"指定服务时间","label-width":"100px",prop:"repairDate"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.divisionForm.repairDate,callback:function(t){e.$set(e.divisionForm,"repairDate",t)},expression:"divisionForm.repairDate"}})],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"备注","label-width":"100px",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入10字以上",resize:"none"},model:{value:e.divisionForm.remark,callback:function(t){e.$set(e.divisionForm,"remark",t)},expression:"divisionForm.remark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitDivision("divisionForm")}}},[e._v("\n        提交\n      ")])],1)],1),e._v(" "),i("el-dialog",{staticClass:"dialogBox",attrs:{title:"主管远程维修",visible:e.remoteDialogVisible},on:{"update:visible":function(t){e.remoteDialogVisible=t}}},[i("div",{staticClass:"ct"},[e._v("\n      处理方法\n    ")]),e._v(" "),i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入10字以上",resize:"none"},model:{value:e.repairWay,callback:function(t){e.repairWay=t},expression:"repairWay"}}),e._v(" "),i("div",{staticClass:"cm"},[e._v("\n      处理结果\n    ")]),e._v(" "),i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入10字以上",resize:"none"},model:{value:e.repairResult,callback:function(t){e.repairResult=t},expression:"repairResult"}}),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitRemote}},[e._v("\n        提交\n      ")])],1)],1),e._v(" "),i("el-dialog",{staticClass:"dialogBox",attrs:{title:"维修工拒绝接单",visible:e.refuseDialogVisible},on:{"update:visible":function(t){e.refuseDialogVisible=t}}},[i("el-form",{ref:"refuseForm",attrs:{model:e.refuseForm,rules:e.refuseRule,"label-position":"right"}},[i("el-form-item",{attrs:{label:"拒绝原因","label-width":"100px",prop:"refuseReason"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择拒绝原因"},model:{value:e.refuseForm.refuseReason,callback:function(t){e.$set(e.refuseForm,"refuseReason",t)},expression:"refuseForm.refuseReason"}},[i("el-option",{key:"1",attrs:{label:"时间冲突",value:"时间冲突"}}),e._v(" "),i("el-option",{key:"2",attrs:{label:"出差在外",value:"出差在外"}}),e._v(" "),i("el-option",{key:"3",attrs:{label:"无法维修",value:"无法维修"}}),e._v(" "),i("el-option",{key:"4",attrs:{label:"其他原因",value:"其他原因"}})],1)],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"详细说明","label-width":"100px",prop:"refuseRemark"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入10字以上",resize:"none"},model:{value:e.refuseForm.refuseRemark,callback:function(t){e.$set(e.refuseForm,"refuseRemark",t)},expression:"refuseForm.refuseRemark"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitRefuse("refuseForm")}}},[e._v("\n        提交\n      ")])],1)],1),e._v(" "),i("el-dialog",{staticClass:"dialogBox",attrs:{title:"验收",visible:e.checkDialogVisible},on:{"update:visible":function(t){e.checkDialogVisible=t}}},[i("div",{staticClass:"passBtn"},[i("el-button",{class:1==e.show?"el-button--primary":"",attrs:{size:"small"},on:{click:function(t){return e.handlePass(1)}}},[e._v("\n        通过\n      ")]),e._v(" "),i("el-button",{class:0==e.show?"el-button--primary":"",attrs:{size:"small"},on:{click:function(t){return e.handlePass(2)}}},[e._v("\n        不通过\n      ")])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}]},[i("div",{staticClass:"passBtn"},[i("el-button",{class:4==e.nopass?"el-button--primary":"",attrs:{size:"small"},on:{click:function(t){return e.handleCheckFailure(4)}}},[e._v("\n          补全信息\n        ")]),e._v(" "),i("el-button",{class:3==e.nopass?"el-button--primary":"",attrs:{size:"small"},on:{click:function(t){return e.handleCheckFailure(3)}}},[e._v("\n          二次维修\n        ")]),e._v(" "),i("el-button",{class:1==e.nopass?"el-button--primary":"",attrs:{size:"small",disabled:e.disabled},on:{click:function(t){return e.handleCheckFailure(1)}}},[e._v("\n          重新派工\n        ")])],1),e._v(" "),i("div",{staticClass:"cm"},[e._v("\n        详细说明\n      ")]),e._v(" "),i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入10字以上",resize:"none"},model:{value:e.repairResult,callback:function(t){e.repairResult=t},expression:"repairResult"}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitnoPass}},[e._v("\n        提交\n      ")])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[i("el-form",{ref:"forms",attrs:{model:e.forms,"label-position":"right"}},[i("el-form-item",{attrs:{label:"维修结算","label-width":"100px",prop:"pay_type"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.forms.pay_type,callback:function(t){e.$set(e.forms,"pay_type",t)},expression:"forms.pay_type"}},[i("el-option",{key:"1",attrs:{label:"无偿维修",value:"1"}}),e._v(" "),i("el-option",{key:"2",attrs:{label:"有偿结算",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"维修费用/元","label-width":"100px",prop:"pay_money"}},[i("el-input",{model:{value:e.forms.pay_money,callback:function(t){e.$set(e.forms,"pay_money",t)},expression:"forms.pay_money"}})],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"验收批注",prop:"pay_content","label-width":"100px"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入10字以上",resize:"none"},model:{value:e.forms.pay_content,callback:function(t){e.$set(e.forms,"pay_content",t)},expression:"forms.pay_content"}})],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitPass("forms")}}},[e._v("\n        提交\n      ")])],1)]),e._v(" "),i("el-dialog",{staticClass:"dialogBox",attrs:{title:"评价",visible:e.rateDialogVisible},on:{"update:visible":function(t){e.rateDialogVisible=t}}},[i("el-form",{ref:"rateForm",attrs:{model:e.rateForm,"label-position":"right"}},[i("el-form-item",{attrs:{label:"评价","label-width":"80px",prop:"score"}},[i("el-rate",{staticClass:"star",model:{value:e.rateForm.score,callback:function(t){e.$set(e.rateForm,"score",t)},expression:"rateForm.score"}})],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"备注","label-width":"80px",prop:"rateRemark"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:2,placeholder:"请输入维修评价......",resize:"none"},model:{value:e.revokeForm.rateRemark,callback:function(t){e.$set(e.revokeForm,"rateRemark",t)},expression:"revokeForm.rateRemark"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitRate}},[e._v("\n        提交\n      ")])],1)],1)],1)},staticRenderFns:[]}},674:function(e,t,i){i(1380);var a=i(38)(i(1169),i(1534),null,null);e.exports=a.exports},731:function(e,t,i){"use strict";i.d(t,"c",function(){return s}),i.d(t,"d",function(){return r}),i.d(t,"g",function(){return n}),i.d(t,"h",function(){return o}),i.d(t,"x",function(){return l}),i.d(t,"y",function(){return u}),i.d(t,"z",function(){return p}),i.d(t,"v",function(){return c}),i.d(t,"w",function(){return d}),i.d(t,"k",function(){return m}),i.d(t,"m",function(){return f}),i.d(t,"n",function(){return v}),i.d(t,"o",function(){return _}),i.d(t,"p",function(){return h}),i.d(t,"t",function(){return b}),i.d(t,"u",function(){return g}),i.d(t,"e",function(){return R}),i.d(t,"A",function(){return y}),i.d(t,"B",function(){return w}),i.d(t,"C",function(){return I}),i.d(t,"D",function(){return k}),i.d(t,"E",function(){return x}),i.d(t,"q",function(){return S}),i.d(t,"G",function(){return D}),i.d(t,"H",function(){return C}),i.d(t,"i",function(){return N}),i.d(t,"j",function(){return F}),i.d(t,"l",function(){return $}),i.d(t,"s",function(){return O}),i.d(t,"I",function(){return z}),i.d(t,"J",function(){return V}),i.d(t,"F",function(){return W}),i.d(t,"r",function(){return T}),i.d(t,"a",function(){return B}),i.d(t,"b",function(){return L}),i.d(t,"f",function(){return U});var a=i(32),s=function(e){return a.a.get("/api/Maintenance_team/QueryRepair_user",{params:{mobile:e}})},r=function(e){return a.a.post("/api/Maintenance_team/AddRepair_user",e)},n=function(e,t){return a.a.get("/api/SystemMsg/Register_sms",{params:{username:e,phone:t}})},o=function(e){return a.a.post("/api/Maintenance_team/InvitationRepair_user",e)},l=function(e){return a.a.post("/api/Upload_File/Upload_Repairimg",e,{headers:{"Content-Type":"multipart/form-data"}})},u=function(e,t,i){return a.a.get("/api/DeviceInfo/getDeviceByMtid",{params:{name:e,mtid:t,project:i}})},p=function(e){return a.a.post("/api/Repair_order/AddRepair_order",e)},c=function(){return a.a.get("/api/Repair_Statistical_Analysis/GetRepair_Order_Statistics")},d=function(e,t){return a.a.get("/api/Repair_Statistical_Analysis/GetRepair_Cost_Statistics",{params:{starttime:e,endtime:t}})},m=function(e){return a.a.get("/api/Repair_order/Repair_Delete",{params:{ID:e}})},f=function(e){return a.a.post("/api/Repair_order/Repair_Acceptance",e)},v=function(e){return a.a.post("/api/Repair_order/Repair_Dispatching",e)},_=function(e){return a.a.post("/api/Repair_order/Repair_Dispatching_Acceptance",e)},h=function(e){return a.a.post("/api/Repair_order/RemoteRepair_process_details",e)},b=function(e){return a.a.get("/api/Repair_order/Repair_ScheduleWebNew",{params:{repair_orderno:e}})},g=function(e){return a.a.get("/api/Repair_order/Repair_ScheduleLogWebNew",{params:{repair_orderno:e}})},R=function(){return a.a.get("/api/Maintenance_team/Repair_userList")},y=function(e){return a.a.post("/api/Repair_order/AddRepair_sparepart",e)},w=function(e){return a.a.post("/api/Repair_order/AddRepair_tool",e)},I=function(e){return a.a.post("/api/Repair_order/UpdateRepair_spareparts",e)},k=function(e){return a.a.post("/api/Repair_order/UpdateRepair_tool",e)},x=function(e){return a.a.get("/api/Repair_order/DeleteRepair_spareparts",{params:{ID:e}})},S=function(e){return a.a.post("/api/Repair_order/Repair_Check",e)},D=function(e,t){return a.a.get("/api/Repair_order/GetRepair_ProjectDevice",{params:{modelid:e,projectid:t}})},C=function(e){return a.a.post("/api/Repair_order/QueryRepair_order",e)},N=function(e){return a.a.get("/api/Repair_Statistical_Analysis/GetRepair_Statistical_TimeList",{params:{time:e}})},F=function(e){return a.a.get("/api/Repair_Statistical_Analysis/GetRepair_Statistical_EvaluateList",{params:{time:e}})},$=function(e){return a.a.post("/api/Repair_order/Repair_Status",e)},O=function(e){return a.a.get("/api/Repair_order/QueryRepair_orderReport",{params:{Repair_Orderno:e}})},z=function(e){return a.a.get("/api/Repair_order/Repair_sparepartList",{params:{Repair_Orderno:e}})},V=function(e){return a.a.get("/api/Repair_order/Repair_toolList",{params:{Repair_Orderno:e}})},W=function(e){return a.a.get("/api/Repair_order/DeleteRepair_tool?ID="+e)},T=function(e){return a.a.post("/api/Repair_order/Repair_Evaluate",e)},B=function(e){return a.a.get("/api/Maintenance_team/DeleteRepair_user",{params:{id:e}})},L=function(e){return a.a.post("/api/Maintenance_team/UpdateRepair_user",e)},U=function(e){return a.a.get("/api/Maintenance_team/User_RepairList",{params:{id:e}})}}});